<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="http://5hah.in/index-122.html">
<meta name="description" content="Sometimes you gotta run before you can walk ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>شاهین (صفحهٔ ارسال‌های قدیمی 122) | شاهین</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://5hah.in/index-122.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<link rel="prev" href="index-123.html" type="text/html">
<link rel="next" href="index-121.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://5hah.in/">

                <span id="blog-title">شاهین</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href=".">Home</a>
                </li>
<li>
<a href="stories/about-me.html">About</a>
                </li>
<li>
<a href=".">Resume</a>
                </li>
<li>
<a href="archive.html">Archives</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" placeholder="جستجو…" maxlength="255" name="q"><input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910417yddshty-bry-khnfyg-i3wp.html" class="u-url">یادداشتی برای کانفیگ i3 .. date: 2012/7/7 6:32:28</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910417yddshty-bry-khnfyg-i3wp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910417yddshty-bry-khnfyg-i3wp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910417yddshty-bry-khnfyg-i3.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>در ارسال قبلی از میز‌کار i3 صحبت کردم‌. قرار شد در این پست در مورد
کانفیگ و رفع نیاز‌های اولیه‌مان روی این مدیر‌پنجره صحبت کنیم‌. اول از
همه طبق معمول باید این میزکار را نصب کنیم‌. همانطور که در پست قبل گفتم
این میزکار از نوع اعلان فونت X استفاده می‌کند که متاسفانه در فونت‌هایی
که من امتحان کردم نتوانستم تایتل فارسی پنجره‌ها را به درستی نمایش دهم‌
(دوست خوبم فرود در کامنت‌های پست قبل گفتند که از قرار با فونت Ubuntu
مشکل حل شده بود‌). پس از تماس با توسعه دهندگان i3 و راهنمایی‌شان‌، برای
پشتیبانی از xft و طبیعتا دست بازتر در انتخاب فونت‌ها سورس را با این پچ
آماده کردم‌. دوستان آرچر می‌توانند از این بسته برای نصب استفاده کنند‌.
اما باقی که می‌خواهند خودشان کامپایل کنند کافیست پچ را در پوشهٔ‌ سورس
کپی کنند و با دستور زیر ترتیب کار را بدهند:‌</p>
<pre class="code bash"><a name="rest_code_41f10338137e4abb80728e30dc0381e7-1"></a>patch -p1 &lt; i3-wm-pango.patch
</pre>
<p>دوستان اسلکوری هم می‌توانند باقی کار را به این Slackbuild بسپارند‌. پس
از نصب میزکار را اجرا کنید‌. چیزی که ما می‌خواهیم در نهایت شبیهش شویم به
صورت زیر است:</p>
<p style="text-align: center;"></p>
<p>قبل از این که بگویید این که چیزی ندارد تا بخواهیم کانفیگش کنیم بگذارید
بگویم که دو روز وقتم را گرفت تا بتوانم به اینجا برسانمش ;-)</p>
<p>برای شروع کار می‌خواهیم فونت میزکار را تعیین کنیم‌. فایل کانفیگ i3 برای
هر کاربر از شاخهٔ ‎~/.i3/config خوانده می‌شود‌ (توجه داشته باشید که در
اولین اجرا اگر این فایل وجود نداشته باشد برنامهٔ کانفیگ خودکار i3 شروع
می‌شود و از شما می‌پرسد که کدام کلید را به عنوان metaیتان تعریف کند‌ و
بعد این فایل ساخته می‌شود-اگر هم نشد در userguide دنبالش بگردید و مسیرش
را ببینید!) فایل کانفیگ را پیدا می‌کنیم و دنبال خط زیر می‌گردیم:</p>
<pre class="code bash"><a name="rest_code_79f2840d464749d49047e617590d781f-1"></a>font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
</pre>
<p>و آن را به صورت زیر ویرایش می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_cecfafa9944c473aa07f144436aad0a9-1"></a>font xft:Terminus 9
</pre>
<p>همچنین از آن‌جا که ترمینال پیش‌فرض i3 را دوست نداریم و می‌خواهیم
Terminator جایگزینش شود به دنبال ‎# start a terminal می‌گردیم و خط زیرش
را به صورت زیر ویرایش می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_a1aceb3fb8e542e1bc7a33c56b065d32-1"></a>bindsym <span class="nv">$mod</span>+Return <span class="nb">exec</span> --no-startup-id terminator
</pre>
<p>در ادامهٔ کار با کانفیگ‌های پیش‌فرض i3 می‌سازیم‌، جز این که یک مشکل کوچک
و قابل حل وجود دارد‌. آن هم این که بعد از تغییر layout کیبورد به فارسی
دیگر کلید‌های میانبر میزکارمان کار نمی‌کنند و باید layout را انگلیسی
کنیم تا به کار بیافتند‌. برای حل این مشکل باید به جای کلید‌های bindsym
(کلید‌های میانبری که با اسم کلید مثلا shift, Return و ... تعریف می‌شوند)
از bindcode استفاده کنیم‌. برای نمونه ما کلید‌های میانبر تغییر layout را
به این صورت تعریف می‌کنیم.</p>
<p>کلید‌های مدنظر ما برای تغییر صفحه کلید Alt+Shift است‌. اول از همه در اول
فایل کانفیگ یک متغیر به اسم ‎$mod1 که به Alt اشاره می‌کند به صورت زیر
تعریف می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_30654359562e43f8b85935fe4c7927ff-1"></a><span class="nb">set</span> <span class="nv">$mod1</span> Mod1
</pre>
<p>و سپس خطوط زیر را در انتهای فایل کانفیگ اضافه می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_4e5bbc782dfd428cb51d03ad8895a308-1"></a>bindcode <span class="nv">$mod1</span>+62 <span class="nb">exec</span> ~/.i3/changekb.sh
<a name="rest_code_4e5bbc782dfd428cb51d03ad8895a308-2"></a>
<a name="rest_code_4e5bbc782dfd428cb51d03ad8895a308-3"></a>bindcode <span class="nv">$mod1</span>+50 <span class="nb">exec</span> ~/.i3/changekb.sh
</pre>
<p>خوب حالا این دو خط چه می‌کنند؟ دستور bindcode به i3 می‌فهماند که باید از
کد کلید‌های کیبورد برای شناسایی کلید ترکیبی استفاده کند‌. ‎$mod1 را هم
که پیشتر خودمان به عنوان کلید Alt تعریف کردیم‌. حالا می‌ماند اعداد ۶۲ و
۵۰‌. این اعداد کد‌هایی هستند که کلید‌های شیفت چپ و راست کیبورد با آن‌ها
شناخته می‌شوند و دقیقا مختص همین کلید‌ها هستند‌. برای کشفشان می‌توانید
در ترمینال برنامهٔ xev را اجرا کنید کلید مورد نظرتان را فشار دهید و در
خروجی‌ها به دنبال عبارت keycode و عدد روبرویش بگردید‌.</p>
<p>exec هم فرمانی است که با استفاده از آن می‌توانیم یک اسکریپت خارجی را
اجرا کنیم که در اینجا ما اسکریپتی که layout را بررسی می‌کند و با توجه به
وضعیت فعلی‌اش آن را به انگلیسی یا فارسی تغییر می‌دهد را به آن
شناساندیم‌. پس لازم است کد زیر را که مربوط به این اسکریپت است در فایل
changekb.sh وارد کرده و فایل را به پوشهٔ ‎.i3 در پوشهٔ خانگیتان کپی
کنید:</p>
<pre class="code bash"><a name="rest_code_6958984841904211bbad23eac53e5263-1"></a><span class="c">#This is a script for changing keyboard between English and Persian layouts</span>
<a name="rest_code_6958984841904211bbad23eac53e5263-2"></a>
<a name="rest_code_6958984841904211bbad23eac53e5263-3"></a><span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>setxkbmap -print <span class="p">|</span> grep xkb_symbols <span class="p">|</span> awk <span class="s1">'{print $4}'</span> <span class="p">|</span> awk -F<span class="s2">"+"</span> <span class="s1">'{print $2}'</span><span class="sb">`</span> <span class="o">=</span> us <span class="o">]</span><span class="p">;</span>
<a name="rest_code_6958984841904211bbad23eac53e5263-4"></a>
<a name="rest_code_6958984841904211bbad23eac53e5263-5"></a><span class="k">then</span> <span class="nb">echo</span> <span class="s2">"EN"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"changing to IR..."</span><span class="p">;</span> setxkbmap ir<span class="p">;</span>
<a name="rest_code_6958984841904211bbad23eac53e5263-6"></a>
<a name="rest_code_6958984841904211bbad23eac53e5263-7"></a><span class="k">else</span> <span class="nb">echo</span> <span class="s2">"IR"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Changing to US..."</span><span class="p">;</span> setxkbmap us <span class="p">;</span>
<a name="rest_code_6958984841904211bbad23eac53e5263-8"></a>
<a name="rest_code_6958984841904211bbad23eac53e5263-9"></a><span class="k">fi</span>
</pre>
<p>نکته اینجاست که نمی‌دانم چرا Alt+Shift راست پس از تغییر layout به فارسی
قادر به بازگردانیش به انگلیسی نیستند‌، در حالی که کلید‌های سمت چپ به
راحتی این کار را انجام می‌دهند‌! البته این کار مزیتی برای خودش دارد و آن
هم این که با استفاده از کلید‌های سمت راست دیگر خیالم راحت است که کیبورد
فارسی است ;-)</p>
<p>در ادامه به حیاتی‌ترین بخش میزکارمان می‌رسیم‌. بخش گزارش‌گیری‌! نوار
پایینی میزکار توسط برنامهٔ i3bar کنترل می‌شود‌. این برنامه می‌تواند
خروجی برنامه‌های مختلف را در خود نمایش دهد‌. خود i3 برنامه‌ای به اسم
i3status برای گزارش‌گیری دارد که من زیاد از آن خوشم نیامد‌. این شد که
تصمیم گرفتم از conky برای این بخش استفاده کنم‌. چون هم ابزار‌های بیشتری
دارد و هم قابلیت اجرای یک اسکریپت خارجی را بدون درد و خونریزی! این شد که
به دنبال خط bar که احتمالا در انتهای فایل کانفیگ قرار دارد می‌گردیم و در
میان آکولاد‌های روبرویش دو خط زیر را اضافه می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_08f6cb879f5b4bee8de6a8d49e21dedf-1"></a>font -*-terminus-bold-*-*-*-12-*-*-*-*-*-iso10646-*
<a name="rest_code_08f6cb879f5b4bee8de6a8d49e21dedf-2"></a>
<a name="rest_code_08f6cb879f5b4bee8de6a8d49e21dedf-3"></a>status_command <span class="nb">exec </span>conky -c ~/.i3/i3conky
</pre>
<p>خط اول این دستور که فونت terminus را برای خروجی i3bar تعریف کرده را
می‌توانید نادیده بگیرید و یا به صورت xft مثل دفعهٔ قبل تعیین کنید‌. اما
خط دوم دستور conky را با فایل کانفیگ i3conky که در شاخهٔ ‎.i3 قرار دارد
اجرا می‌کند‌. پس لازم است این فایل را ایجاد کنید و دستورات زیر را در آن
کپی کنید:</p>
<pre class="code bash"><a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-1"></a>background no
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-2"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-3"></a>out_to_console yes
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-4"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-5"></a>double_buffer no
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-6"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-7"></a>short_units yes
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-8"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-9"></a>out_to_x no
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-10"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-11"></a>update_interval 1.0
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-12"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-13"></a>total_run_times 0
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-14"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-15"></a>use_spacer right
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-16"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-17"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-18"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-19"></a>TEXT
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-20"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-21"></a>CPU: <span class="si">${</span><span class="nv">cpu</span><span class="p"> cpu1</span><span class="si">}</span>,<span class="si">${</span><span class="nv">cpu</span><span class="p"> cpu2</span><span class="si">}</span>,<span class="si">${</span><span class="nv">cpu</span><span class="p"> cpu3</span><span class="si">}</span>,<span class="si">${</span><span class="nv">cpu</span><span class="p"> cpu4</span><span class="si">}</span> @ FRQ: <span class="nv">$freq</span> <span class="p">|</span> RAM:<span class="nv">$mem</span>/<span class="si">${</span><span class="nv">memmax</span><span class="si">}</span> <span class="o">(</span><span class="nv">$memperc</span>%<span class="o">)</span> <span class="si">${</span><span class="nv">if_up</span><span class="p"> eth0</span><span class="si">}</span><span class="p">|</span> LAN: D:<span class="si">${</span><span class="nv">downspeed</span><span class="p"> eth0</span><span class="si">}</span> U:<span class="si">${</span><span class="nv">upspeed</span><span class="p"> eth0</span><span class="si">}</span> <span class="si">${</span><span class="nv">endif</span><span class="si">}</span> <span class="se">\</span>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-22"></a>
<a name="rest_code_53d4a729544a4c8494fd51efc8e3184a-23"></a><span class="p">|</span> <span class="si">${</span><span class="nv">exec</span><span class="p"> ~/.i3/kbstatus.sh</span><span class="si">}</span> <span class="p">|</span> VOL: <span class="nv">$mixer</span> <span class="p">|</span> <span class="si">${</span><span class="nv">time</span><span class="p"> %a %d.%m.%y</span><span class="si">}</span> <span class="si">${</span><span class="nv">time</span><span class="p"> %H:%M</span><span class="si">}</span>
</pre>
<p>توضیح آرگومان‌های این فایل بماند به عهدهٔ خودتان‌. فقط من برای دیدن
وضعیت فعلی صفحه کلید اسکریپت تغییر صفحه کلید را ویرایش کردم و آن را به
اسم kbstatus.sh در شاخهٔ ‎.i3 قرار دادم تا از conky آن را فرا بخوانم‌.
این اسکریپت فقط layout فعلی را در خروجی نشان می‌دهد و کدش به صورت زیر
است:</p>
<pre class="code bash"><a name="rest_code_c6bb5b49f2d64c83b0c7ac56ec75f891-1"></a><span class="c">#!/usr/bin/bas</span>
<a name="rest_code_c6bb5b49f2d64c83b0c7ac56ec75f891-2"></a>
<a name="rest_code_c6bb5b49f2d64c83b0c7ac56ec75f891-3"></a>setxkbmap -print <span class="p">|</span> grep xkb_symbols <span class="p">|</span> awk <span class="s1">'{print $4}'</span> <span class="p">|</span> awk -F<span class="s2">"+"</span> <span class="s1">'{print $2}'</span>
</pre>
<p>کانفیگ میزکارمان دیگر تقریبا تمام شده‌. فقط می‌ماند یک چند تا ریزه
کاری‌. i3 به صورت پیش‌فرض صفحه را از طرفی که بزرگتر است نصف می‌کند‌. پس
دز عمدهٔ مانیتور‌ها این مسیر به صورت افقی تعریف می‌شود‌. حال آن که من
تقسیم عمودی را بیشتر ترجیح می‌دهم‌. پس با خط زیر به i3 می‌فهمانم که این
کار را طبق نظر من انجام دهد:</p>
<pre class="code bash"><a name="rest_code_82d0e92b1e9c4198904238491f6fdb7c-1"></a>default_orientation vertical
</pre>
<p>همچنین می‌خواهم تعدادی از برنامه‌هایم مثل mdic یا vlc به صورت float
(تایل نشده) باز شوند که برای این کار دستورات زیر را اضافه می‌کنم:</p>
<pre class="code bash"><a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-1"></a>for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Vlc"</span><span class="o">]</span> floating <span class="nb">enable</span>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-2"></a>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-3"></a>for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Mdic"</span><span class="o">]</span> floating <span class="nb">enable</span>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-4"></a>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-5"></a>for_window <span class="o">[</span><span class="nv">instance</span><span class="o">=</span><span class="s2">"DTA"</span><span class="o">]</span> floating <span class="nb">enable</span>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-6"></a>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-7"></a>for_window <span class="o">[</span><span class="nv">instance</span><span class="o">=</span><span class="s2">"Download"</span><span class="o">]</span> floating <span class="nb">enable</span>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-8"></a>
<a name="rest_code_b6b1399f89fe41ccb9ed71cdcd4cd73c-9"></a>for_window <span class="o">[</span><span class="nv">instance</span><span class="o">=</span><span class="s2">"xfce4-notifyd"</span><span class="o">]</span> floating <span class="nb">enable</span>
</pre>
<p>مقدار class و یا instance را می‌توانید پس از ران کردن دستور xprop
WM_CLASS و سپس کلیک روی برنامهٔ مورد نظر به دست آورید‌. مثلا در مورد
فایرفاکس خروجی به صورت زیر است:</p>
<pre class="code bash"><a name="rest_code_4827d1ec181242099810179f3599f4d8-1"></a>WM_CLASS<span class="o">(</span>STRING<span class="o">)</span> <span class="o">=</span> <span class="s2">"Navigator"</span>, <span class="s2">"Firefox"</span>
</pre>
<p>که Nvigator مقدار instance و Firefox مقدار class است‌. توجه داشته باشید
که این مقدار Case sensetive است‌!</p>
<p>من فایل کانفیگ i3 و اسکریپت‌های مورد استفاده‌ام را روی این کانال git
گذاشته‌ام‌. برای پی‌بردن بیشتر به جزئیات می‌توانید از آن‌ها استفاده
کنید!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910415tjrbh-khr-b-i3-ykh-rgyb-qdrwp.html" class="u-url">تجربهٔ کار با i3 یک رقیب قدر‌! .. date: 2012/7/5 5:46:57</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910415tjrbh-khr-b-i3-ykh-rgyb-qdrwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910415tjrbh-khr-b-i3-ykh-rgyb-qdrwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910415tjrbh-khr-b-i3-ykh-rgyb-qdr.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>قبلا در مورد این که Awesome به میزکار محبوبم بدل شده بود نوشتم‌.
همین‌طور از هفت‌خوانی که باید برای نصبش روی اسلکور می‌گذراندم. اما چند
وقت پیش که مجبور به نصب دوبارهٔ اسلکور شدم (یک اشتباه فوق‌العاده ناشیانه
سبب شد)‌ دیدم که دوباره هفت خوان قبلی جواب نمی‌دهد‌. نصب بسته‌ها با توجه
به قدیمی بودن بعضی بسته‌ها روی نسخهٔ استیبل اسلکور که من استفاده می‌کنم
داشت دیگر کار دستم می‌داد. بعد از به روزرسانی این بار بسته‌های xcb دیگر
حتی فایرفاکس هم ران نمی‌شد‌. زیاد بودن وابستگی‌های این نرم‌افزار و بعضا
دستکاری‌های لازم برای نصبش روی اسلکور دیگر داشت دردناک می‌شد‌. همچنین
مصرف بی‌خودی CPU برای یک میزکار که سبکی‌اش (که فرود عزیز در کامنت‌های
این پست اشاره کردند) باید چشم گیر باشد به دلیل استفاده از لوا در
پکیج‌های گرافیکی نیز از طرف دیگر مزید بر علت شد که زحمت چشیدن میزکاری
دیگر از این دست را به خودم بدهم‌. آپشن‌ها برای من دو تا بودند: ۱- dwm و
۲- i3*! حقیقتش را بخواهید طراحی مدرن صفحهٔ اول وبسایت میزکار i3 بود که
نظرم را جلب کرد و آن را برای نصب انتخاب کردم‌. خوشبختی‌اش اینجا بود که
یک Slackbuild با پدر مادر برای نصبش حاضر بود و بسته‌های پیشنیاز زیادی
نمی‌خواست‌. اما پس از نصب‌، ویژگی‌ها و مشکلاتی که سر راهم سبز شد را با
هم مرور می‌کنیم‌، همچنین در ارسال بعدی در مورد نصب و کانفیگ این میزکار
خواهم نوشت:</p>
<h4></h4>
<p>ویژگی‌ها:</p>
<h5></h5>
<p>مستند‌سازی عالی:</p>
<p>برای ورود به دنیای i3 جدای از این که اگر از Awesome استفاده کرده باشید
نیاز به یادگیری چیز زیادی ندارید‌، می‌توانید به یک User guide عالی که
توسط توسعه دهندگانش حاضر شده مراجعه کنید‌. چیزی که متاسفانه برای Awesome
پیدا نمی‌شد‌!</p>
<h5></h5>
<p>فایل config:</p>
<p>کانفیگ میزکار Awesome با زبان lua نوشته می‌شد‌ که همین امر قابلیت‌های
زیادی هم برایش به همراه می‌آورد‌. حال ممکن است که text بودن کانفیگ i3
کمی مایوس کننده به نظر برسد‌. اما سادگی و کارایی‌اش به خوبی کمک حالم
شد‌. حقیقتش را بخواهید تا آخرین لحظات هم از زبان lua سر در نیاوردم و
همین امر باعث شده بوده که بیشتر از کانفیگ‌های دیگران برای تنظیمات
Awesome بهره بگیرم‌. ولی الان روی i3 همه چیز تحت کنترل من است‌. از طرفی
اگر در فایل کانفیگ اشتباهی رخ داده باشد‌، سیستم خطایاب میزکار به دقت محل
خطا و دلیلش را نشان می‌دهد‌، در حالی که در Awesome دیگر فایل کانفیگ لود
نمی‌شد و از کانفیگ پیش‌فرض برای لود سیستم استفاده می‌شد‌.</p>
<h5></h5>
<p>Tiling دستی</p>
<p>حقیقتش را بخواهید دلیل جذب شدنم به Awesome قابلیت کنترل تمام و کمالش به
کیبورد بود و نه Tilingاش‌! حتما می‌پرسید چرا؟ Tiling در Awesome به صورت
خودکار انجام می‌گرفت و با وجود قابلیت استفاده از layout‌های مختلف هنوز
هم یک جای کار می‌لنگید‌!‌ مثلا من نیازی ندارم که دیکشنری mdic هم tile
شود‌! آن هم هر دفعه که می‌خواهد یک لغت ترجمه کند‌، این شد که کلا قابلیت
نمایش پنجرهٔ mdic را بی‌خیال شده بودم و برای ظاهر نشدنش در هر جا به یک
میزکار جدا محدودش کرده بودم‌. نرم‌افزار‌هایی از این دست برایم زیاد
بودند‌. مثل gimp یا vlc یا صفحهٔ گفتگوی Pidgin! حالا i3 چطور کمکم
می‌کند؟ در i3 به راحتی می‌توان تعیین کرد پنجرهٔ بعدی کجا باز شود و یا
حالت پیش‌فرضی برای باز شدن پنجره‌ها تایین کرد‌. مثلا با یک meta+v
می‌گویم پنجرهٔ بعدی زیر پنجرهٔ حاضر باز شود‌! البته هنوز یک مشکل هم دارم
که احتمالا باگ باشد‌ (با این زبان داغانم در اینجا به مشکل اشاره کردم‌).
یا اصلا می‌توان گفت که یک پنجره tile نشود‌! meta+shift+space پنجره را
می‌کند و دیگر خیالت راحت است!</p>
<h5></h5>
<p>میزکار‌های داینامیک‌:</p>
<p>در آوسام شما یک تعدادی میزکار به صورت پیش‌فرض تعیین می‌کنید و باقی
فعالیت‌هایتان محدود به همین میزکار‌هاست (البته این اواخر یک پلاگین هم
پیدا کرده بودم که امکان ایجاد میزکار‌های جدید به صورت داینامیک را
می‌داد). همچنین اگر میزکاری خالی بود هنوز هم جزو میزکار‌هایتان حساب
می‌شد‌. اما در i3 شما عملا به تعداد میزکار‌های مورد استفاده‌تان میزکار
دارید‌! همچنین میزکار‌های خالی بی‌خودی سیستمتان را معطل نمی‌کنند و
بلافاصله حذف می‌شوند‌.</p>
<h4></h4>
<p>مشکلات:</p>
<h5></h5>
<p>پشتیبانی نکردن از تایتل‌های فارسی:</p>
<p>اعلان خط به صورت
-misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1 که فکر می‌کنم
مربوط به X باشد و با استفاده xfontsel قابل تعیین است‌، متاسفانه امکان
استفاده از فونت‌های یونیکد را نمی‌دهد ( یا یه همچین چیزی! هنوز درست مشکل
را درک نکرده‌ام! باید بیشتر تحقیق کنم ) همین می‌شود که در تایتل‌های
فارسی برنامه‌ها که در فایرفاکس بیشتر از همه نمود پیدا می‌کند‌، به مشکل
بر بخوریم‌. البته این مشکل را حل کرده‌ام و در پست بعد در موردش
می‌نویسم‌.</p>
<h5></h5>
<p>قابلیت‌های گزارش دهی ضعیف i3status:</p>
<p>این برنامه در واقع برای گزارش‌گیری این نرم‌افزار و دادن اطلاعات برای
منوهای میزکار ساخته شده‌. ولی با وجود این که اطلاعات اولیه خوبی ارائه
می‌دهد ولی هنوز هم با وجود ابزاری مثل conky وجودش تقریبا بیهوده است‌.</p>
<h5></h5>
<p>keybinding برای تغییر صفحه کلید:</p>
<p>حقیقتش این یکی نابودم کرد تا حلش کنم‌! دوست نداشتم روی X کلیدی تعریف کنم
که صفحه کلید را تغییر دهد‌. از طرفی نمی‌خواستم عادت چندساله‌ام برای
Alt+shift را کنار بگذارم‌. یعنی حقیقتش در اولین اقدام آمدم با Capslock
این کلیدها را جایگزین کنم که عوض دو حالت‌، سه حالته شد‌! یعنی یک بار که
می‌زدی انگلیسی بود‌، بار بعد انگلیسی Capital بود و بار بعد فارسی می‌شد
(که باید دنبال دلیلش بگردم و اگر شد این کلید را جایگزین کنم). بگذریم‌!
مشکل اینجا بود که برای keybindingها می‌شود از یک کلید یا یک metakey به
علاوهٔ یک کلید استفاده کرد‌! حالا مشکل اینجا بود که alt و shift هر دو
meta حساب می‌شوند و خوب یعنی نمی‌شد تعیینشان کرد‌! که البته این مشکل هم
حل شده و در موردش در پست بعد می‌نویسم‌!</p>
<h4></h4>
<p>نتیجه:</p>
<p>با وجود این که i3 خیلی وقتم را برای کانفیگ و درکش گرفت و Awesome خیلی
قابلیت‌های بدرد بخور و خوشگل‌تر از i3 داشت‌، سادگی و سر راست بودن این
میزکار جذبم کرده و فعلا می‌خواهم از آن استفاده کنم‌! حتی اگر قابلیت
نمایش عکس BackGround هم نداشته باشد D:</p>
<p>*: همانطور که گفتم برای من این دو تا بودند‌! آن بیرون خیلی خیلی بیشتر
از دو انتخاب برای میزکار با این قابلیت‌ها وجود دارد!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910406wqy-ngry-shkhsy-szy-emacs-qsmt-wlwp.html" class="u-url">وقایع نگاری شخصی سازی emacs قسمت اول .. date: 2012/6/26</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910406wqy-ngry-shkhsy-szy-emacs-qsmt-wlwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910406wqy-ngry-shkhsy-szy-emacs-qsmt-wlwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910406wqy-ngry-shkhsy-szy-emacs-qsmt-wl.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>هاهاها! ایمکس شده بلای جانمان‌! حقیقتش نه این که خیلی آش دهن سوزی
باشدها‌، نه‌! لعنتی اعتیادش بالاست‌. یک بار که از میانبر‌هایش استفاده
کنید دیگر همه‌جا می‌خواهید همین میانبر‌ها باشند‌. همهٔ برنامه‌ها را مثل
آن می‌خواهید‌. دوست دارید همه چیزتان را همین لعنتی انجام دهد‌! آن‌قدر هم
ابزار و چیز میز برای بازی کردن دارد که می‌توانید وقتتان را به خوبی پایش
تلف کنید‌! زیاده‌گویی بس است و می‌رویم پی اصل ماجرا‌. اول از همه این که
emacsام را به نسخهٔ ۲۴ (بی‌خیال پیشوندش) ارتقا دادم که دو مزیت عمده
داشت‌:</p>
<p>اول این که جهت چینش هر پاراگراف را مثل مرورگر‌های جدید بر اساس نوع
نوشتار تعیین می‌کند‌. این یعنی متن فارسی را می‌توان مثل آدمی‌زاد درش
نوشت و درد نگرفت‌!</p>
<p>دوم مدیر بسته‌هاست که کلی چیز جدید می‌تواند به emacsتان اضافه کند‌. بحث
ما هم سر همین دومیست‌.</p>
<p>ایمکس به صورت پیش‌فرض خیلی خوب است‌، خیلی‌. ولی می‌توان با دستکاری خیلی
چیز بهتر و کارا‌تری هم از تویش در آورد‌. این است که می‌خواهم چند تا بسته
برای کار‌هایم توش اضافه کنم‌. اما اول از همه باید یک مخزن درست و درمان
به مدیر بسته‌هایم اضافه کنم تا برای نصب بسته‌ها درد کمتری متحمل شوم
(بماند که خود این مدیر بسته کلی دردناک می‌شود به وقتش‌!). پس اگر فایل
‎.emacs در پوشهٔ خانگی‌ام ندارم یکی می‌سازم و به صورت زیر مخزن‌هایم را
اضافه می‌کنم:</p>
<pre class="code bash"><a name="rest_code_20e35eccbf444672be1d3cfc056a10ee-1"></a><span class="o">(</span>setq package-archives <span class="err">'</span><span class="o">((</span><span class="s2">"ELPA"</span> . <span class="s2">"http://tromey.com/elpa/"</span><span class="o">)</span>
<a name="rest_code_20e35eccbf444672be1d3cfc056a10ee-2"></a>
<a name="rest_code_20e35eccbf444672be1d3cfc056a10ee-3"></a><span class="o">(</span><span class="s2">"gnu"</span> . <span class="s2">"http://elpa.gnu.org/packages/"</span><span class="o">)</span>
<a name="rest_code_20e35eccbf444672be1d3cfc056a10ee-4"></a>
<a name="rest_code_20e35eccbf444672be1d3cfc056a10ee-5"></a><span class="o">(</span><span class="s2">"marmalade"</span> . <span class="s2">"http://marmalade-repo.org/packages/"</span><span class="o">)))</span>
</pre>
<p>خوب گل سر سبد این مخازن اسمش Marmalade است که از فرود عزیز بابت معرفیش
تشکر می‌کنم ;-). خوب بسته‌ها اضافه شد و کافیست بعد از باز کردن ایمکس
کلید M + x را فشار دهیم‌. (M مخفف Meta است و منظور در اینجا کلید Alt و
یا اگر نداریدش کلید Esc هست) و در اعلان ظاهر شده بنویسیم
package-list-packages (اعلان ایمکس قابلیت Auto Completion دارد پس با Tab
کارتان را در نوشتن دستوراتش راحت‌تر کنید). پس از مدتی انتظار لیستی از
بسته‌های قابل نصب یا نصب شده روی سیستم‌تان نمایش داده می‌شود. نشانگر را
روی هر بسته ببرید‌. Enter را فشار دهید تا توضیحاتش را بخوانید‌. اما فعلا
بی‌خیال این بخش شوید و همراه من بیایید تا چند بستهٔ حیاتی به درد بخور را
نصب کنیم:</p>
<blockquote>
Auto-complete:</blockquote>
<p>اولین نیاز من برای یک ادیتور به درد بخور همین قابلیت تکمیل خودکار متن
است‌. اول این که سرعتم را بالا‌تر می‌برد‌. دوم هم این که خیالم را در
خطاهای املایی در برنامه‌نویسی راحت‌تر می‌کند ;-) این می‌شود که در ایمکس
دستور زیر را وارد می‌کنم M + x package-install RET auto-complete و بسته
نصب می‌شود‌. آن‌وقت فایل ‎.emacs را باز می‌کنم و خط‌های زیر را به آن
اضافه می‌کنم‌:</p>
<pre class="code bash"><a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-1"></a><span class="p">;;</span>Start Auto-complete config
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-2"></a>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-3"></a><span class="o">(</span>add-to-list <span class="s1">'load-path "~/.emacs.d/elpa/auto-complete-1.4")</span>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-4"></a>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-5"></a><span class="s1">(require '</span>auto-complete-config<span class="o">)</span>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-6"></a>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-7"></a><span class="o">(</span>add-to-list <span class="err">'</span>ac-dictionary-directories <span class="s2">"~/.emacs.d/elpa/auto-complete-1.4/dict"</span><span class="o">)</span>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-8"></a>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-9"></a><span class="o">(</span>ac-config-default<span class="o">)</span>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-10"></a>
<a name="rest_code_ccadba731e7d4dceae7ce2c4d3ddbea0-11"></a><span class="p">;;</span>End Auto-complete config
</pre>
<p>حالا عملا کار باید تمام شده باشد‌. اما یک مشکل وجود دارد که حدود دو سه
ساعت وقتم را نابود کرد تا بفهمم از کجاست‌. بستهٔ Auto-complete برای
نمایش دادن آن جعبهٔ خوشگلش برای کلمات پیشنهادی از یک بستهٔ دیگر به اسم
popup استفاده می‌کند که خوشبختانه مدیر بسته‌ها هم این بسته را به عنوان
پیش‌نیاز نصب می‌کند‌. اما در یک پوشهٔ جدا‌. حالا بستهٔ Auto-complete هر
چه می‌گردد در پوشهٔ خودش نمی‌تواند popup.el را پیدا کند‌. این می‌شود که
می‌نویسیم:</p>
<pre class="code bash"><a name="rest_code_f2cb9f77485043b0a66b9122b3e3200e-1"></a>cp ~/emacs.d/elpa/popup/popup.el ~/emacs.elpa/auto-complete-1.4
</pre>
<p>حالا این بسته نصب شده و در همه‌جا فعال است‌. این بسته در شاخهٔ dict در
محل نصبش یک سری فایل با شناسهٔ Modeهای مختلف ایمکس دارد که در واقع
لغت‌های پیشنهادی را از آن‌جا می‌یابد‌. لغات در بعضی از دیکشنری‌های
مخصوصا برای C+‎+‎ خیلی ناقص است‌. می‌توانید دستی فایل را باز کنید و
کاملش کنید‌.</p>
<p>zenburn-theme:</p>
<p>این تم را قبلا معرفی کرده‌ام‌. برای نصبش می‌نویسیم M + x package-install
RET zenburn-theme RET و کار تمام است. حالا برای لود شدن این تم به صورت
پیش‌فرض خطوط زیر را به ‎.emacs اضافه می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_5c8a41626d00408c9245923613d144a8-1"></a><span class="p">;;</span>Start: config theme
<a name="rest_code_5c8a41626d00408c9245923613d144a8-2"></a>
<a name="rest_code_5c8a41626d00408c9245923613d144a8-3"></a><span class="o">(</span>add-to-list <span class="s1">'custom-theme-load-path "~/.emacs.d/elpa/zenburn-theme-1.5")</span>
<a name="rest_code_5c8a41626d00408c9245923613d144a8-4"></a>
<a name="rest_code_5c8a41626d00408c9245923613d144a8-5"></a><span class="s1">(load-theme '</span>zenburn t<span class="o">)</span>
<a name="rest_code_5c8a41626d00408c9245923613d144a8-6"></a>
<a name="rest_code_5c8a41626d00408c9245923613d144a8-7"></a><span class="p">;;</span>End: config theme
</pre>
<p>این تم در حالت گرافیکی به راحتی لود می‌شود‌. اما در حالت متنی emacs -nw
به خاطر کم بودن رنگ‌ها ممکن است مشکل داشته باشید‌. برای حل این مشکل فعلا
الالحساب این خط را به فایل ‎.bashrc یا ‏‏‎.zshrc تان اضافه کنید تا بعدا
در یک پست مجزا در موردش توضیح دهم:</p>
<pre class="code bash"><a name="rest_code_a4026717f5454cbf885c61dedd1e7407-1"></a><span class="nb">export </span><span class="nv">TERM</span><span class="o">=</span>xterm-256color
</pre>
<p>بعله‌. الان دیگر تمتان هم خیلی میزان است و همه‌جا قابل استفاده ;-)</p>
<p>php-mode, js2-mode, css-mode:</p>
<p>مهم‌ترین چیز برای برنامه‌نویس‌هایی که می‌خواهند از ایمکس برای توسعهٔ
پروژه‌هایشان استفاده کنند همین مد‌های ایمکس هستند‌. در اینجا سه مد مختلف
برای زبان‌های php, javascript و CSS معرفی شده‌اند که به نظرم خیلی عالی
هستند‌. مخصوصا js2-mode که یک IDE به تمام معنا برایتان مهیا می‌کند‌!
برای نصب که دیگر باید بدانید چه کار کنید‌. هیچ خطی هم نیاز نیست به
‎.emacsتان اضافه کنید‌. تنها برای رفتن به هر مد کافیست تایپ کنید M + x
mode-name RET همین. فعلا برای قسمت اول کافیست‌. در قسمت بعد با چیز‌های
هیجان‌انگیز‌تری بر می‌گردیم D:</p>
</div>
    </div>
    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-123.html" rel="prev">ارسال‌های جدید‌تر</a>
            </li>
            <li class="next">
                <a href="index-121.html" rel="next">پست‌های قدیمی‌تر</a>
            </li>
        </ul></nav><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="assets/js/all-nocdn.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
