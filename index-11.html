<!DOCTYPE html><html lang="fa"><head><meta charset="utf-8"><meta name="description" content="بعضی وقت‌ها باید قبل از این که بتوانید راه بروید‌، بدوید‌!"><meta name="author" content="شاهین آزاد"><title>شاهینیسم (صفحهٔ ارسال‌های قدیمی 11) | شاهینیسم</title><link href="assets/css/rst.css" rel="stylesheet" type="text/css"><link href="assets/css/code.css" rel="stylesheet" type="text/css"><link href="assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="assets/css/theme.css" rel="stylesheet" type="text/css"><link href="assets/css/custom.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]--><link rel="alternate" type="application/rss+xml" title="RSS fa" href="rss.xml"></head><body class="home blog">
    
    <script type="text/javascript">var addthis_config={"ui_language":"${lang}"};</script><div id="siteWrapper">
      <h1 id="vcard author">
        <a href="." title="شاهینیسم">شاهینیسم</a>
      </h1>

      <div id="mainNav">
        <ul><li><a href="stories/drbrh-mn-2.html">About</a>



  </li><li><a href="archive.html">Archives</a>



  </li><li><a href="categories/index.html">Tags</a>



  </li><li><a href="http://feeds.feedburner.com/Shahinism">RSS</a>


</li>
        </ul></div>
      <div id="siteDescription">
        
        
        
      </div>
      <div id="coreContent" class="hfeed">
        

<div class="post hentry">
  <h5 class="postDate"><abbr class="publishd">
    ارسال شده: 2012-08-11 11:18
  </abbr></h5>
  <div class="postContent">
    <h3 class="entry-title"><a href="posts/blog13910521prwjh-ngr-w-msybsh.html">پروژهٔ نگار و مصائبش</a></h3>
    
    <div class="entry-content">
      <p></p><h5>معرفی</h5>
<a title="negar on github" href="http://shahinism.github.com/Negar/" target="_blank">نگار</a> قرار است یک ابزار ویرایش و تصحیح متن باشد‌. یعنی یک فایل متنی دریافت کند‌، اشتباهات نگارشی رایج را تصحیح کند‌، غلط‌های املایی‌اش را بگیرد و در خروجی یک متن فارسی تمیز را ارائه دهد‌. نمونه‌ای از کارکرد و امکانات فعلی نگار را می‌توانید در تصویر زیر ببینیند (البته متن تست را از صفحهٔ وب <a href="http://virastar.heroku.com/" target="_blank">ویراستار</a> به عاریت گرفته‌ام D:) :
<p style="text-align: center;"><a href="https://raw.github.com/shahinism/Negar/master/Negar-State.png"><img class="aligncenter" src="https://raw.github.com/shahinism/Negar/master/Negar-State.png" alt="" width="560" height="249"></a></p>

<p>نگار با پایتون نوشته شده‌، اما به احتمال زیاد کتابخانهٔ ویرایشش به چند زبان دیگر (نظیر PHP و javascript برگردانده خواهد شد). از این رو نگار روی <a title="negar on github" href="https://github.com/shahinism/Negar" target="_blank">گیت‌هاب</a> منتشر می‌شود و شدیدا پذیرای ایده‌های نو و صد البته همکاری شما در توسعه‌اش است‌.</p>
<p>و از همه مهمتر این که نگار توسط یک تازه‌کار در حال توسعه است و می‌تواند کمک خوبی برای تازه‌کاران یا مشتاقان یادگیری برنامه نویسی باشد‌.</p>
<h5>مصائب توسعه نگار</h5>

<p>آن‌هایی که مرا از نزدیک می‌شناسند احتمالا می‌دانند که مدت‌هاست مشتاقم که برنامه‌نویس شوم ولی درصدی تنبلی و درصدی دیگر پیچیدگی امر برنامه‌نویسی مانع از رسیدن به این علاقه‌ام شده‌. بار‌ها به سمت زبان‌های C‎+‎+‎‌، C، PHP، Javascript و ... کشیده شده‌ام‌، سینتکس‌شان را یادگرفته‌ام‌، تعدادی مسائل و الگوریتم پایه‌ای را حل کرده‌ام ولی آخر سر نتوانسته‌ام که به خودم اجازهٔ برنامه‌نویس بودن بدهم D:</p>
<p>خوبی این تلاش‌های به بن‌بست رسیده برایم این بوده که بفهمم برنامه‌نویسی را توی کتاب‌ها یاد نمی‌دهند D: (البته منظورم سینتکس و این‌ها نیست‌ها!). یاد گرفتن واقعی از وقتی شروع می‌شود که شروع به نوشتن پروژه‌ای می‌کنید‌. ایدهٔ توسعهٔ نگار را مدت زیادی بود که در سر می‌پروراندم‌. خصوصا از وقتی که ایمان <a title="ویراستیار" href="http://virastyar.ir" target="_blank">ویراستیار</a> را به عنوان جایگزینی برای <a title="ویراسباز" href="http://virasbaz.persianlanguage.ir/" target="_blank">ویراستباز</a> که من استفاده می‌کردم معرفی کرد و گفت که ای کاش یک نسخهٔ کلاینت هم برای این کار روی لینوکس بود‌. (درست که ویراستیار یک نسخهٔ کلاینت دارد‌، ولی آن با زبان جهنمی C#‎ نوشته شده که نصبش برای من هفت خوان می‌طلبد!)</p>
<p>این اشتیاق به قوت خودش باقی ماند تا این که <a href="http://www.swaroopch.org/notes/Python" target="_blank">کتاب یک بایت از پایتون</a> را تمام کردم‌. کتاب خیلی خوبی بود‌‌ و خیلی از مسائل را به سادگی و روشنی توضیح می‌داد‌. این بود که ما هم جو این که هر کاری را می‌توانیم به راحتی با پایتون انجام دهیم گرفتمان و زدیم به کار نوشتن نگار‌!</p>
<p>اولین الگوریتم پیاده‌سازی شده افتضاح بود‌! بعضی ایده‌هایش هنوز هم به نظرم جالب می‌آید ولی حجم کار بی‌خودی زیادی را به هر تابع واگذار کرده بودم که در نهایت هم نتیجهٔ دلچسبی در خروجی ظاهر نمی‌شد‌. این بود که کمی ذلسرد شدم و ناامیدانه به دنبال ابزاری گشتم که برای همین هدف نوشته شده باشد و بتوانم با بررسی سورسش مفهوم طراحی و پیاده‌سازی یک برنامه را بهتر درک کنم‌. سورس ویراستیار جدای از گندگی بیش از اندازه‌اش برای من‌، به زبانی بود که اصلا نمی‌فهمیدمش‌! جستجو‌ها نتجه نداد تا وقتی که روی صفحهٔ گیت <a href="https://github.com/behnam" target="_blank">بهنام اسفهبد</a> با پروژهٔ ویراستار آشنا شدم‌. نویسندهٔ پروژه<a href="https://github.com/aziz/virastar-app" target="_blank"> عزیز </a>(که فکر کنم توسعه دهندهٔ بالاترین هم باشد) کد <a href="https://github.com/aziz/virastar%5C" target="_blank">کتابخانه</a> را به روبی نوشته بود و یک نمونهٔ تحت وب که خروجی فوق‌العاده‌ای هم از ویرایش متن داشت با آن ساخته بود‌.</p>
<p>سادگی و کامنت شدن بیشتر توابع این کتابخانه را به شروع خوبی برای من تبدیل کرد‌. تصمیم گرفتم که آن را با پایتون دوباره نویسی کنم تا هم سواد خودم را (که بعد‌تر فهمیدم اصلا ندارم D:) محک بزنم و هم یه شروع برای پروژهٔ نگار ایجاد کنم‌.</p>
<p>کار از آن چیزی که به نظر می‌رسید سخت‌تر بود‌. تفاوت‌های زبان روبی و پایتون گاها در سینتکس خیلی کوچک بودند ولی در عملکرد زمین تا آسمان متفاوت بودند‌.</p>
<p>نکته‌ای که بیش از همه به نظرم جالب آمد طرز تفکر من نسبت به عبارات باقائده بود‌. قبلا در وبلاگ دوست خوبم علی با آن‌ها آشنا شده بودم‌. ولی زیاد دل به یاد گرفتن‌شان ندادم و فکر هم نمی‌کردم آن‌چنان دانستن‌شان به کارم بیاید‌. حقیقتش را بخواهید بیش از ۹۰ درصد ویراستار نگار بر پایهٔ همین regex‌ها بنا شده ;-)</p>
<p>یا از طرف دیگر unicode ها که در عمل آن‌قدر بهشان عادت کرده بودم که نمی‌دیدمشان‌، خودشان را در این‌جا بیش از پیش به رخ می‌کشیدند‌.</p>
<h5>کمک‌های Stackoverflow و Github</h5>

<p>این که می‌گویند همیشه ابزار درست نتیجه را بهتر می‌کند (نقل از خودم) حقیقت محض است‌. در حین نوشتن نگار به مشکلاتی بر می‌خوردم که هیچ‌جوره با منطقم جور در نمی‌آمد‌. سرچ در گوگل هم خصوصا این که با فارسی در ارتباط بود و طبیعتا نمی‌شود دلی به نتایجش خوش کرد چندان فایده‌ای نداشت‌ (البته چند باری به جای فارسی دنبال Arabic‌ها گشتم که راهنمایی‌های خوبی برای یونیکد نوشتن در پایتون به دست آوردم). در چنین شرایطی بود که <a href="http://stackoverflow.com/" target="_blank">stackoverflow</a> و کاربرانش به دادم رسیدند‌. دو سوالی که پرسیدم را آن‌چنان کامل و متناسب با شرایط مختلف جواب دادند که عمرا نمی‌شود در هیچ کتابی به این صراحت جوابی پیدا کرد D:</p>
<p>اما حل مشکلات به این راحتی‌ها هم نبود‌. بار‌ها پیش می‌آمد که شروع به ویرایش یک تابع می‌کردم و آن‌قدر تغییر می‌دادم که در نهایت نه ایده‌هایم برای حل مشکل کارساز بود و هم کل کد را خراب کرده بودم‌. این‌جا بود که Git کمک می‌کرد‌. فوق‌العاده است‌. فوق‌العاده‌. کدام ابزار دیگری را می‌شناسید که هم یک ورژن کنترل عالی باشد‌، هم به راحتی قابلیت مستندسازی پروژه را دو دستی تقدیمتان کند؟ (منظورم wiki و page است). در آینده بیشتر در مورد شگفتی‌های گیت و مخصوصا <a href="http://github.com" target="_blank">گیت‌هاب</a> می‌نویسم‌!</p>
<h5>نتیجه:</h5>

<p>نتیجهٔ کار که دیگر معلوم است‌. اما در آخر باز هم اعلام می‌کنم که اگر علاقه به همکاری در یک پروژهٔ آزاد فارسی دارید تنها زحمتی که باید به خودتان بدهید‌، این است که پروژه را از گیت‌هاب فورک کنید ;-)</p>
    </div>
    <div class="postMeta">
      <div class="comments">
        
        
    
        <a href="posts/blog13910521prwjh-ngr-w-msybsh.html#disqus_thread" data-disqus-identifier="cache/posts/old/blog13910521prwjh-ngr-w-msybsh.html">Comments</a>
    

        
      </div>
    </div>
  </div>
</div>

<div class="post hentry">
  <h5 class="postDate"><abbr class="publishd">
    ارسال شده: 2012-08-04 17:52
  </abbr></h5>
  <div class="postContent">
    <h3 class="entry-title"><a href="posts/blog13910514z-autojump-dr-trmynl-qfl-nshwyd.html">از Autojump در ترمینال غافل نشوید‌!</a></h3>
    
    <div class="entry-content">
      <p></p><a title="آدرس‌ها را در خط فرمان Bookmark کنید!" href="http://shahinism.com/blog/1391/01/03/%d8%a2%d8%af%d8%b1%d8%b3%e2%80%8c%d9%87%d8%a7-%d8%b1%d8%a7-%d8%af%d8%b1-%d8%ae%d8%b7-%d9%81%d8%b1%d9%85%d8%a7%d9%86-bookmark-%da%a9%d9%86%db%8c%d8%af/">قبلا در مورد Bashmark نوشته بودم</a> و دقیقا همین قبلا بود که <a href="http://cyberrabbits.net/" target="_blank">فرود</a> عزیز گفت که از <a title="autojump official git channel" href="https://github.com/joelthelion/autojump" target="_blank">Autojump</a> استفاده می‌کند‌. اما آن موقع‌ها بخاطر یک باگ کوچک نادیده گرفته بودمش‌! امروز که دیگر آن باگ یادم نبود بار دیگر تستش کردم و (آخه دیگه چی بگم؟ این لعنتی خیلی با شعوره‌!) اصلا خودتان این ویدئو را ببینید تا زورش را درک کنید:
<p class="aligncenter"><iframe src="http://www.youtube.com/embed/tnNyoMGnbKg" frameborder="0" width="420" height="315"></iframe></p>
<p>هــاها‌! کدام ابزار را می‌شناسید که سریع‌تر بین دایرکتوری‌ها جابجایتان کند؟ خوب دیگر پر حرفی بس است‌. برویم سر اصل ماجرا‌. نصب و حل یک مشکل‌!</p>
<h5>نصب</h5>

<p>برای نصب اگر پایتون روی سیستم‌تان بالا‌تر از ۲.۷ است که خیال‌تان راحت و تنها کافییست که آن را از کانال گیتش دریافت کنید و پس از ورود به پوشه‌اش اسکریپت install.sh را اجرا کنید‌. اما اگر مثل من با این ترافیک داغان اینترنت روی اسلکور استیبل گیر کرده‌اید (این یعنی پایتون ۲.۶) پس باید یک چند‌تا کار اضافه انجام دهید‌ (یا شاید هم بخواهید به ورژن ۱۹ که توی اسلک‌بیلد‌ها پیدا می‌شود بسنده کنید):</p>
<div class="code"><pre>sbopkg -R -i <span class="s2">"pysetuptools pip"</span>
</pre></div>


<p>امیدوارم sbopkg را نصب کرده و بی‌خودی زندگی را برای خود سخت نگیرید ;-) حالا هم کافیست که با pip بستهٔ مورد نیاز Autojump را نصب کنید‌:</p>
<div class="code"><pre>pip install argparse
</pre></div>


<p>و سپس:</p>
<div class="code"><pre>git clone git://github.com/joelthelion/autojump.git

<span class="nb">cd </span>autojump

./install.sh --force
</pre></div>


<p>و حالا خط زیر را به ‎.zshrc اضافه کنید:</p>
<div class="code"><pre><span class="o">[[</span> -s /etc/profile.d/autojump.zsh <span class="o">]]</span> &amp;amp;&amp;amp; <span class="nb">source</span> /etc/profile.d/autojump.zsh
</pre></div>


<p>و سر‌انجام:</p>
<div class="code"><pre><span class="nb">source</span> ~/.zshrc
</pre></div>


<h5>مشکل</h5>

<p>و خوب کار باید تمام شده باشد اما دستور زیر را امتحان کنید:</p>
<div class="code"><pre>vim ~/.zsh<span class="o">[</span>TAB<span class="o">]</span>
</pre></div>


<p>که احتمالا چیزی شبیه خروجی زیر نصیبتان می‌شود:</p>
<div class="code"><pre>_arguments:439: _vim_files: <span class="k">function </span>definition file not found

_arguments:439: _vim_files: <span class="k">function </span>definition file not found

_arguments:439: _vim_files: <span class="k">function </span>definition file not found
</pre></div>


<p>و این یعنی اتوکامپلیشن فوق‌العادهٔ ZSH جلوی دستور vim از کار می‌افتد‌! خوب چه کنیم؟ تنها یک راه حل در اینترنت جواب این مساله بود و آن هم <a title="Problem on Arch forum" href="https://bbs.archlinux.org/viewtopic.php?id=37245" target="_blank">از انجمن آرچر‌های </a>اعظم:</p>
<div class="code"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$fpath</span> <span class="o">(</span>see the <span class="k">function </span>PATH of zsh<span class="o">)</span>

/usr/share/zsh/site-functions /usr/share/zsh/4.3.11/functions

<span class="nv">$ </span><span class="nb">cd</span> /usr/share/zsh/4.3.11/functions

<span class="nv">$ </span>ls _vi*

_vim

rm _vim
</pre></div>


<p>و حالا لذت ببرید ;-)</p>
    </div>
    <div class="postMeta">
      <div class="comments">
        
        
    
        <a href="posts/blog13910514z-autojump-dr-trmynl-qfl-nshwyd.html#disqus_thread" data-disqus-identifier="cache/posts/old/blog13910514z-autojump-dr-trmynl-qfl-nshwyd.html">Comments</a>
    

        
      </div>
    </div>
  </div>
</div>

<div class="post hentry">
  <h5 class="postDate"><abbr class="publishd">
    ارسال شده: 2012-07-23 18:12
  </abbr></h5>
  <div class="postContent">
    <h3 class="entry-title"><a href="posts/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw.html">چگونه ایمکس‌مان را تربیت کنیم (قسمت دوم)</a></h3>
    
    <div class="entry-content">
      <p></p><a title="چگونه ایمکس‌مان را تربیت کنیم (قسمت اول)" href="http://shahinism.com/blog/1391/04/23/%da%86%da%af%d9%88%d9%86%d9%87-%d8%a7%db%8c%d9%85%da%a9%d8%b3%e2%80%8c%d9%85%d8%a7%d9%86-%d8%b1%d8%a7-%d8%aa%d8%b1%d8%a8%db%8c%d8%aa-%da%a9%d9%86%db%8c%d9%85-%d9%82%d8%b3%d9%85%d8%aa-%d8%a7%d9%88/" target="_blank">در قسمت قبل</a> نکات ساده و پایه‌ای را بیان کردیم و یک کلید ساده را جایگزین کلید قبلی پرش به پنجرهٔ بعدی کردیم‌. در این قسمت می‌خواهیم کمی هیجان کار را بالا ببریم‌.
<h5>این آرگومان‌های دوست داشتنی</h5>
<p>یکی از اجزای جدا نشدنی توابع برنامه نویسی‌، آرگومان‌هایی هستند که می‌توان با استقاده از آن‌ها کارکرد توابع را تحت تاثیر قرار داد‌. توابع ایمکس هم از این قائده مستثنا نیستند‌. برای مثال می‌توان با C-u 3 C-x C-n نشانگر را به سه پنجره بعد از پنجرهٔ حاضر منتقل کرد‌. می‌خواهید امتحان کنید؟ ایمکس‌تان را باز کنید و آن را به چهار پنجره تقسیم کنید و فرمان بالا را وارد کنید‌. همان‌طور که می‌بینید تابع other-window که در این‌جا مورد بحث ماست‌، با استفاده از آرگومان دریافتی توسط C-u که همان عدد سه است‌، می‌تواند به سه پنجره بعد بپرد و ما را از فراخوانی پیاپی‌اش نجات دهد‌. حالا نکته این‌جاست که این تابع آرگومان منفی‌ای مثل ‎-۱ را هم می‌پذیرد‌. و احتمالا این دقیقا همان چیزی است که ما برای حرکت در پنجره‌ها به سمت چپ نیاز داریم‌. یک بار امتحانش کنید: C-u -1 C-x C-n</p>
<p><strong>نکته:</strong> اکثر توابع موجود در ایمکس با استفاده از مقادیری مثل ‎-۱ عکس عمل عادی‌شان را انجام می‌دهند‌. فکر کنید که با این ترکیب چه توابع جالب و کاربردی‌ای می‌توان ساخت‌. مثلا کلید delete عقب‌گرد که در ایمکس به طور عادی تعریف نشده D: (در آینده یک نمونه خواهیم ساخت ;-))</p>
<h5>تعریف اولیه other-window-backward</h5>

<p>برای این که از سختی وارد کردن همچون دستوری بکاهیم‌، بهتر است که آن را به صورت یک تابع تعریف کنیم تا هر جایی که نیاز بود بتوانیم به راحتی از آن استفاده کنیم:</p>
<div class="code"><pre><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>

<span class="s2">"Select the previous window."</span>

<span class="o">(</span>interactive<span class="o">)</span>

<span class="o">(</span>other-window -1<span class="o">))</span>
</pre></div>


<p>خوب این خطوط به چه معناست؟ به ترتیب آن‌ها را بررسی می‌کنیم:</p>
<div class="code"><pre><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>
</pre></div>


<p>در این خط مثل اکثر زبان‌های برنامه‌نویسی دیگر‌، شروع به تعریف تابع می‌کنیم‌. defun عبارتی است مانند def در پایتون که وظیفهٔ تعریف توابع را بر عهده دارد‌. در ادامه نیز اسم تابع other-window-backward و یک جفت پرانتز خالی (که محل تعریف آرگومان‌هایمان در آینده است) را قرار می‌دهیم‌.</p>
<p>در خط دوم:</p>
<div class="code"><pre><span class="s2">"Select the previous window"</span>
</pre></div>


<p>تنها یک توضیح کوتاه برای عملکرد تابع می‌نویسیم‌. این توضیح عملا تاثیری در روند اجرا تابع ندارد‌. اما وقتی کاربر بخواهد با دستوری مثل describe-function از نحوهٔ عملکرد تابع مطلع شود‌، این توضیح است که نمایش داده می‌شود‌.</p>
<p>خط سوم شامل:</p>
<div class="code"><pre><span class="o">(</span>interactive<span class="o">)</span>
</pre></div>


<p>این خط در واقع بر نوع عملکرد تابع نسبت به آرگومان‌ها در زمان فراخوانی‌شان دلالت می‌کند‌. در ادامه با مزایای این دستور بیشتر آشنا خواهیم شد‌. فعلا الاالحساب آن را همانطور که هست وارد می‌کنیم‌.</p>
<p>و خط آخر:</p>
<div class="code"><pre><span class="o">(</span>other-window -1<span class="o">))</span>
</pre></div>


<p>همان‌طور که معلوم است‌، تابع other-window آشنایمان را با آرگومان ‎-۱ صدا می‌کند‌. این آرگومان منفی همانطور که توضیح دادیم به تابع می‌فهماند که باید عقب‌گرد حرکت کند‌.</p>
<p>حالا دیگر تقریبا کارمان تمام است‌. تنها کافی است که آن را به کلید ترکیبی مد نظرمان (C-x C-p چنان که در قسمت قبل تصمیم گرفتیم) پیوند دهیم:</p>
<div class="code"><pre><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-p"</span> <span class="err">'</span>other-window-backward<span class="o">)</span>
</pre></div>


<p>و کار تقریبا تمام است‌.</p>
<h5>افزودن مزایای آرگومان‌ها</h5>

<p>تا این‌جای کار other-window-backward کاری که می‌خواهیم را درست انجام می‌دهد‌. اما هنوز یک کمبود دارد‌. کدام کمبود؟ همانطور که بالا‌تر توضیح دادم ما می‌توانستیم با C-u به other-window بگوییم که مثلا به دو پنجره بعد بپرد و ما را از فراخوانی دوباره و دوباره‌اش نجات دهد‌. اما تابعی که الان تعریف کردیم‌، این قابلیت را ندارد‌. در نتیجه کاربر بخت برگشته باید برای پرش به سه پنجره قبل سه بار این کلید‌ها را فشار دهد‌! و این یعنی عذاب ;-)</p>
<p>برای این که تابع‌مان یک آرگومان بپذیرد‌، آن را به شکل زیر ویرایش می‌کنیم:</p>
<div class="code"><pre><span class="o">(</span>defun other-window-backward <span class="o">(</span>n<span class="o">)</span>

<span class="s2">"Select Nth previous window."</span>

<span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>

<span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">)))</span>
</pre></div>


<p>همانطور که می‌بینید در خط اول‌، یک آرگومان به لیست آرگومان‌های تابع به اسم n اضافه کردیم‌. با این کار به تابع فهماندیم اگر کاربر با C-u آرگومانی را فرستاد (مثلا ۲) آن را در متغیر n قرار بده‌.</p>
<p>همینطور در خط آخر به جای استفاده از ‎-۱ تابع other-window را با آرگومان منفی n صدا زدیم‌. یعنی هر عددی به n فرستاده شد‌، به ترکیب فوق‌، به صورت منفی به other-window فرستاده می‌شود‌.</p>
<p><strong>توجه:</strong> به فاصلهٔ میان علامت منفی و حرف n توجه کنید‌. در صورتی که بخواهید آن را به صورت:</p>
<div class="code"><pre><span class="o">(</span>-n<span class="o">)</span>
</pre></div>


<p>بنویسید‌، مفسر لیسپ به مشکل بر می‌خورد‌. احتمالا یادتان هست که برای تفریق دو عدد چه کار باید می‌کردیم:</p>
<div class="code"><pre><span class="o">(</span>- 2 6<span class="o">)</span>
</pre></div>


<p>لیسپ در این‌جا دو عدد را از هم کم می‌کند‌، اما اگر به جای دو عدد فقط یک عدد وجود داشته باشد‌، مثل تابع ما‌، آن را به صورت عدد منفی تلقی می‌کند‌.</p>
<p>اما یک نکتهٔ مهم و اساسی در خط سوم وجود دارد که باید به آن نیز بپردازیم‌. ما در این خط به صورت زیر عمل کردیم‌:</p>
<div class="code"><pre><span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>
</pre></div>


<p>جریان آن p مشکوک چیست؟ اگر تابع مثل روش اول‌مان‌، هیچ آرگومانی نگیرد‌، interactive هم بدون آرگومان می‌ماند‌. اما اگر مثل روش اخیرمان بخواهیم در تابع از آرگومانی استفاده کنیم‌، باید یک آرگومان به صورت رشته کد به interactive هم اضافه کنیم‌. کد p کوچک به تابع می‌فهماند که اگر یک آرگومان به تابع فرستاده شد آن را به صورت یک عدد ترجمه کن و به تابع برگردان‌. اما اگر آرگومانی فرستاده نشد‌، خودت به صورت پیش‌فرض عدد ۱ را به تابع برگردان‌. و این دقیقا کاری است که ما تا این‌جای کار از تابع‌مان می‌خواهیم‌.</p>
<h5>اختیاری کردن آرگومان</h5>

<p>همان‌طور که می‌بینید‌، این تابع قابلیت فراخوانی توسط توابع دیگر لیسپ را نیز دارد‌. اما در این وضعیت (منظورم در حالتی است که تابع توسط توابع دیگر فراخوانده شود و نه در صورتی که توسط کاربر صدا زده می‌شوند) حتما باید به همراه فراخوانی تابع یک آرگومان هم به آن اطلاق شود‌. و این کمی کار را پیچیده می‌کند و ممکن است در آینده خسته کننده به نظر بیاید‌. بهتر است تابع را طوری تعریف کنیم که وقتی به صورت other-window-backward صدا شد خودکار روش انجام کار پیش‌فرضش را پیش بگیرد‌. پس آن را به صورت زیر ویرایش می‌کنیم:</p>
<div class="code"><pre><span class="o">(</span>defun other-window-backward <span class="o">(</span>&amp;amp;optional n<span class="o">)</span>

<span class="s2">"Select Nth previous window."</span>

<span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>

<span class="o">(</span><span class="k">if </span>n

<span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">))</span> ; <span class="k">if </span>n is non-nil

<span class="o">(</span>other-window -1<span class="o">)))</span> ; <span class="k">if </span>n is nil
</pre></div>


<p>در خط اول با ‏‎&amp;optional به تابع می‌فهمانیم که آرگومان n باید اختیاری باشد‌. یعنی اگر فرستاده شد مقدار دهی شود و اگر نه‌، بی‌خیالش باشد‌. همچنین از یک عبارت کنترلی if هم استفاده کردیم‌. در این عبارت اگر n مقدار داشته باشد‌، پس if با یک وضعیت non-nil یا همان True در اکثر زبان‌های برنامه نویسی روبروست‌. و اگر مقدار نداشته باشد‌، برابر است با nil یا False. با توجه با کامنت‌های موجود در کد احتمالا می‌توانید بفهمید که در صورت وقوع هر یک از این وضعیت‌ها کدام حالت رخ خواهد داد‌.</p>
<p>فکر می‌کنم تا این‌جای کار برای امروز کافی باشد‌. کارمان هنوز با این تابع تمام نشده‌. هنوز کمی دیگر راه باقی است که بتوان آن را به عنوان یک تابع ایمکس لیسپی کامل قبول کرد‌. اما لازم است قبل از توضیح بیشتر و سخت کردن کار‌، مفاهیم گفته شده تا این‌جای کار کاملا درک شوند‌.</p>
<p><strong>پی‌نوشت:</strong> مرا به علت دیر‌کرد این چند وقته در انتشار ادامهٔ مطلب حاضر ببخشید‌. امروز هم احتمالا نتوانسته‌ام آن‌طور که باید و شاید حق مطلب رو عدا کنم‌. حقیقتش امروز از آن روز‌هایی بود که در مود نوشتن برای وبلاگ نبودم ولی باید حتما تا این‌جای کار را بیان می‌کردم تا نوشته‌ها از خودم عقب نمانند ;-)</p>
    </div>
    <div class="postMeta">
      <div class="comments">
        
        
    
        <a href="posts/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw.html#disqus_thread" data-disqus-identifier="cache/posts/old/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw.html">Comments</a>
    

        
      </div>
    </div>
  </div>
</div>


<div class="pageNav">
  
  <div class="prev">
    <a href="index-10.html">← ارسال‌های جدید‌تر</a>
  </div>
  
  
  <div class="next">
    <a href="index-12.html">پست‌های قدیمی‌تر →</a>
  </div>
  
</div>


    
        <script type="text/javascript">var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.type="text/javascript";a.src="http://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)}());</script></div>
    </div>
    <div id="footer">
      <h5>Elsewhere</h5>
      <ul class="elsewhere"><a href="https://plus.google.com/117086743723717964659/posts">Google Plus</a> |
<a href="http://www.goodreads.com/user/show/4795670-shahin-azad">Good Reads</a> |
<a href="https://identi.ca/shahinism">Identica</a> |
<a href="http://twitter.com/shahinism">Twitter</a> |
<a href="https://github.com/shahinism">Github</a>
      </ul><div class="footerContent">
        
<!-- Custom search -->
<form method="get" id="searchform" action="http://duckduckgo.com/">
<div id="search">
<input type="hidden" name="sites" value="http://shahinism.github.io"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="جستجو…"><input type="submit" id="searchsubmit" value="DDG Search"></div>
</form>
<!-- End of custom search -->

        <p> Contents © 2013 <a href="mailto:ishahinism@gmail.com">شاهین آزاد</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a> </p>
        <p> Design by <a href="http://themes.jimbarraud.com/manifest/">Jimbarraud</a> + some <a href="http://shahinism.com">Shahinism</a> twists. </p>
      </div>
    </div>
    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23874419-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></body></html>