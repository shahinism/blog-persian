<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>شاهینیسم (libxdg)</title><link>http://shahinism.com</link><description>بعضی وقت‌ها باید قبل از این که بتوانید راه بروید‌، بدوید‌!</description><lastBuildDate>Fri, 10 May 2013 08:08:19 GMT</lastBuildDate><generator>nikola</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>نصب Awesome WM روی اسلکور</title><link>http://shahinism.com/posts/blog13910106nsb-awesome-wm-rwy-slkhwr.html</link><description>&lt;p&gt;&lt;/p&gt;&lt;p&gt;در چند ماه گذشته یکی از عذاب‌آور‌ترین کار‌هایی که انجام دادم‌، نصب مدیر پنجره‌ی &lt;a title="Awesome wm main page" href="http://awesome.naquadah.org/" target="_blank"&gt;Awesome&lt;/a&gt; روی اسلکور بود‌! بماند که چند باری هم وسوسه شدم که به یکی از توزیع‌های مخزن دار (اسمو D:) کوچ کنم‌. ولی ارزش اسلکور برایم این‌قدر بالا بود که دست به این کار نزنم.
بعد از چند بار آزمایش و خطا‌، شکست و ... روشی که در زیر می‌بینید تمیز‌ترین روش نصب مدیر پنجره‌ی Awesome روی اسلکور است‌:&lt;/p&gt;
&lt;p&gt;اولین کاری که باید انجام دهیم‌، کامپایل دوباره‌ی بسته‌ی Cairo با قابلیت پشتیبانی از xcb است‌. برای این کار در شاخه ‎/source/l/cairo در DVD اسلکور فایل cairo.SlackBuild را با یک ویرایشگر باز کرده و به دنبال عبارت ‎‎‏‎--enable-xcb بگردید‌. پس از یافتنش علامت # را از اول آن بردارید‌. یا آن بخش را به صورت زیر ویرایش کنید‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="nv"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"$SLKCFLAGS"&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;

./configure &lt;span class="se"&gt;\&lt;/span&gt;

--prefix&lt;span class="o"&gt;=&lt;/span&gt;/usr &lt;span class="se"&gt;\&lt;/span&gt;

--libdir&lt;span class="o"&gt;=&lt;/span&gt;/usr/lib&lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;LIBDIRSUFFIX&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;

--mandir&lt;span class="o"&gt;=&lt;/span&gt;/usr/man &lt;span class="se"&gt;\&lt;/span&gt;

--sysconfdir&lt;span class="o"&gt;=&lt;/span&gt;/etc &lt;span class="se"&gt;\&lt;/span&gt;

--disable-gtk-doc &lt;span class="se"&gt;\&lt;/span&gt;

--disable-glitz &lt;span class="se"&gt;\&lt;/span&gt;

--disable-quartz &lt;span class="se"&gt;\&lt;/span&gt;

--disable-static &lt;span class="se"&gt;\&lt;/span&gt;

--enable-xcb &lt;span class="se"&gt;\&lt;/span&gt;

--disable-win32
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;فایل را ذخیره کرده و مثل یک SlackBuild عادی نصبش کنید‌. حالا به شاخه‌ی ‎/source/l/startup-notification بروید و به ترتیب دستورات زیر را اجرا کنید‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;rm startup-notification*.tar.bz2

wget -c http://www.freedesktop.org/software/startup-notification/releases/startup-notification-0.12.tar.gz

gunzip startup-notification-0.12.tar.gz

bzip2 startup-notification-0.12.tar

&lt;span class="nv"&gt;VERSION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0.12 ./startup-notification.SlackBuild

upgradepkg /tmp/startup-notification-*.txz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;حالا به شاخه ‎/source/x/x11/src/xcb در DVD بروید و دستورات زیر را اجرا کنید‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;rm xcb-util-*

wget -c http://xcb.freedesktop.org/dist/xcb-util-0.3.8.tar.bz2 http://xcb.freedesktop.org/dist/xcb-util-image-0.3.8.tar.bz2 http://xcb.freedesktop.org/dist/xcb-util-renderutil-0.3.8.tar.bz2 http://xcb.freedesktop.org/dist/xcb-util-wm-0.3.8.tar.bz2 http://xcb.freedesktop.org/dist/xcb-util-keysyms-0.3.8.tar.bz2

&lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$SLACKWARE_TREE&lt;/span&gt;/source/x/x11

&lt;span class="k"&gt;for &lt;/span&gt;i in xcb-util xcb-util-keysyms xcb-util-renderutil xcb-util-wm xcb-util-image; &lt;span class="k"&gt;do&lt;/span&gt; ./x11.SlackBuild xcb &lt;span class="nv"&gt;$i&lt;/span&gt;; &lt;span class="k"&gt;done&lt;/span&gt;

upgradepkg --install-new /tmp/x11-build/xcb-util-*.txz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;حال نوبت به نصب چند پیش‌نیاز می‌رسد‌. برای راحتی کار پیشنهاد می‌کنم &lt;a title="sbopkg official page" href="http://sbopkg.org" target="_blank"&gt;sbopkg&lt;/a&gt; و &lt;a title="src2pkg official page" href="http://src2pkg.net" target="_blank"&gt;src2pkg&lt;/a&gt; را دریافت و نصب کنید‌. باقی مراحل را با استفاده از این دو ابزار ادامه می‌دهیم‌.&lt;/p&gt;
&lt;p&gt;برای نصب libev, lua, imlib2, giblib, feh به ترتیب دستورات زیر را وارد می‌کنیم‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;sbopkg -i imlib2

sbopkg -i lua

sbopkg -i libev

sbopkg -i giblib

sbopkg -i feh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;و حالا آخرین نسخه libxdg را از&lt;a href="http://n.ethz.ch/~nevillm/download/libxdg-basedir/" target="_blank"&gt; این آدرس&lt;/a&gt; دریافت کرده و به صورت زیر کامپایل می‌کنیم‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;src2pkg libxdg-basedir-*.tar.gz

installpkg /tmp/libxdg*.txz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;برای نصب oocairo و oopango نیز از دو اسکریپت به صورت زیر استفاده می‌کنیم‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;mkdir oocairo

&lt;span class="nb"&gt;cd &lt;/span&gt;oocairo

wget -c https://raw.github.com/cycojesus/slackbuilds/master/l/oocairo/oocairo.SlackBuild

chmod +x oocairo.SlackBuild

./oocairo.SlackBuild

upgradepkg --install-new /tmp/oocairo-*.txz



&lt;span class="nb"&gt;cd&lt;/span&gt; ..

mkdir oopango

&lt;span class="nb"&gt;cd &lt;/span&gt;oopango

wget -c https://raw.github.com/cycojesus/slackbuilds/master/l/oopango/oopango.SlackBuild

chmod +x oopango.SlackBuild

./oopango.SlackBuild

upgradepkg --install-new /tmp/oopango-*.txz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;و سرانجام نوبت به کامپایل خود Awesome می‌رسد‌. آن را از&lt;a title="Awesome wm download page" href="http://awesome.naquadah.org/download/" target="_blank"&gt; این صفحه&lt;/a&gt; دانلود و استخراج کنید. سپس فایل awesomeConfig.cmake را با یک ویرایشگر باز کرده و عبارت زیر را:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;DEFINED SYSCONFDIR&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;SYSCONFDIR &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYSCONFDIR&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; CACHE PATH &lt;span class="s2"&gt;"config directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;SYSCONFDIR &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;/etc CACHE PATH &lt;span class="s2"&gt;"config directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

endif&lt;span class="o"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;به صورت زیر ویرایش کنید‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;DEFINED SYSCONFDIR&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;SYSCONFDIR /etc CACHE PATH &lt;span class="s2"&gt;"config directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;SYSCONFDIR /etc CACHE PATH &lt;span class="s2"&gt;"config directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

endif&lt;span class="o"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;فایل را ذخیره کرده و دستور make را اجرا کنید‌. پس از به پایان رسیدن این دستور به صورت زیر عمل می‌کنیم‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;mkdir /tmp/awesome-version

make install &lt;span class="nv"&gt;DESTDIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/tmp/awesome-version

&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp/awesome-version

makepkg -l y -c n /tmp/awesome-version.tgz

installpkg /tmp/awesome-version.tgz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;و سرانجام پس از نصب Awesome برای این که بتوانیم آن را با xwmconfig انتخاب کنیم‌، دستور زیر را وارد کرده‌:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;vim /etc/X11/xinit/awesome.xinit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;و متن زیر را در آن وارد کنید:&lt;/p&gt;
&lt;p&gt;```bash#!/bin/sh&lt;/p&gt;
&lt;h2&gt;$Xorg: xinitrc.cpp,v 1.3 2000/08/17 19:54:30 cpqbld Exp $&lt;/h2&gt;
&lt;p&gt;userresources=$HOME/.Xresources&lt;/p&gt;
&lt;p&gt;usermodmap=$HOME/.Xmodmap&lt;/p&gt;
&lt;p&gt;sysresources=/etc/X11/xinit/.Xresources&lt;/p&gt;
&lt;p&gt;sysmodmap=/etc/X11/xinit/.Xmodmap&lt;/p&gt;
&lt;h2&gt;merge in defaults and keymaps&lt;/h2&gt;
&lt;p&gt;if [ -f $sysresources ]; then&lt;/p&gt;
&lt;p&gt;/usr/bin/xrdb -merge $sysresources&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;if [ -f $sysmodmap ]; then&lt;/p&gt;
&lt;p&gt;/usr/bin/xmodmap $sysmodmap&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;if [ -f $userresources ]; then&lt;/p&gt;
&lt;p&gt;/usr/bin/xrdb -merge $userresources&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;if [ -f $usermodmap ]; then&lt;/p&gt;
&lt;p&gt;/usr/bin/xmodmap $usermodmap&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;exec awesome&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;و سرانجام با دستور زیر به آن امکان اجرا می‌دهیم‌:&lt;/p&gt;
&lt;p&gt;```bash&lt;/p&gt;
&lt;p&gt;chmod +x /etc/X11/xinit/awesome.xinit&lt;/p&gt;
&lt;p&gt;```.&lt;/p&gt;
&lt;p&gt;در آینده‌ای نزدیک در مورد این مدیر پنجره و نحوه‌ی کار با آن بیشتر صحبت خواهم کرد ;-)&lt;/p&gt;</description><category>awesome wm</category><category>cairo</category><category>feh</category><category>libxdg</category><category>oocairo</category><category>oopango</category><category>sbopkg</category><category>Slackware</category><category>src2pkg</category><category>اسلکور</category><category>حل مشکل</category><category>نرم افزار</category><category>کدباز</category><category>گنو/لینوکس</category><guid>http://shahinism.com/posts/blog13910106nsb-awesome-wm-rwy-slkhwr.html</guid><pubDate>Sun, 25 Mar 2012 10:29:51 GMT</pubDate></item></channel></rss>