<!DOCTYPE html>
<html lang="fa">
  <head>
      <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Sometimes you gotta run before you can walk ">
  <meta name="author" content="شاهین آزاد">
  <title>شاهین (صفحهٔ ارسال‌های قدیمی 70) | شاهین</title>
  
  <link rel="stylesheet" href="assets/css/style.css" type="text/css" media="screen">
    <link href="assets/css/custom.css" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
      <![endif]-->

      <link rel="alternate" type="application/rss+xml" title="RSS fa" href="rss.xml/">
      <link rel="icon" href="favicon.ico" sizes="32x32">

    
  </head>
  <body>
    <div class="container">
      <header>
	<p>sometimes you gotta run before you can walk. <small><a href="https://en.wikipedia.org/wiki/Iron_Man">T Stark</a></small></p>
	<a class="nav-link" href="#navigation"></a>
      </header><!--/header-->
      <div class="columns four">
    <article>
      <h2 class="title"><a href="posts/blog13911103chtwr-z-wbstgy-bh-gythb-frr-khnym-p.html">چطور از وابستگی به گیت‌هاب فرار کنیم: پشتیبان‌گیری از مخازن گیت</a></h2>
      <div class="metadata">
	<span class="date">2013-01-22 22:22</span>
	<span class="writer">شاهین آزاد</span>
      </div>
<!--/metadata-->
      <p>
	</p>
<div>
<p></p>
<blockquote>
<p>یکی از نکاتی که قطعی‌های اخیر گیت‌هاب گوشزد می‌کنند این است که گیت به عنوان یک سیستم مدیریت نسخهٔ غیر متمرکز طراحی شده. بسیاری از مردم به این صورت آن را مورد استفاده قرار نمی‌دهند. به جای داشتن چند بایگانی راه دور‌، داده‌ها را به یک جا می‌فرستند و در اصل بیش از اندازه به گیت‌هاب تکیه می‌کنند. کسانی را دیده‌ام که کل سازمان‌شان را بر پایهٔ گیت‌هاب بنا کرده‌اند‌، چیز‌هایی نظیر گسترش اسکریپت‌های سایت‌شان و نصب اسکریپ‌ها برای توسعه دهندگان جدید‌شان. علاوه بر این‌، dependency manager‌هایی مثل Composer و Cocoapods نیز به گیت‌هاب وابسته‌اند تا پیش‌نیاز‌هایشان را دریافت کنند. اگر گیت‌هاب Down شود‌، شما نمی‌توانید پیش‌نیاز‌های‌تان را دستکاری کنید و یا نمونه‌های جدید‌تری به آن‌ها اضافه کنید. در یک دنیای ایده‌آل این Dependency manager‌ها باید قابلیت‌ پشتیبانی توکار از mirror‌ها را داشته باشند‌، ولی در حال حاضر من چنین قابلیت‌هایی را نمی‌بینم.</p>
<p>چیزی که من می‌خواهم انجام دهم این است که نشان‌تان دهم که چقدر آسان است که با استفاده از سرور‌های راه دور گیت در آن واحد به دو سرور مختلف داده‌های‌تان را ارسال کنید. اگر گیت‌هاب Down شد‌، مهم نیست‌، بر فرض این که همه افراد تیم‌تان از این راهنما پیروی کرده باشند‌، کد از طریق bitbucket نیز در دسترس خواهد بود‌، یا هر جای دیگری که شما انتخاب کرده‌اید. اما این راهنما از گیت‌هاب و بیت‌باکت به عنوان mirror استفاده می‌کند.</p>
<ol>
<li>اول فرض می‌کنم که شما یک سرور راه دور برای گیت‌هاب به عنوان "origin" ایجاد کرده‌اید. آن را به github تغییر نام دهید:</li>
</ol>
<pre class="code literal-block">git remote rename origin github
</pre>


<ol>
<li>
<p>یک مخزن جدید روی بیت‌باکت هم‌نام همان چیزی که در گیت‌هاب دارید بسازید.</p>
</li>
<li>
<p>این مخزن جدید را به صورت زیر به سرور‌های راه دور‌تان اضافه کنید. ولی مطمئن باشید که اسمش bitbucket باشد و نه origin. این‌طور:</p>
</li>
</ol>
<pre class="code literal-block">git remote add bitbucket ssh://git@bitbucket.org/username/somerepo.git

git push -u bitbucket --all
</pre>


<ol>
<li>
<p>و حالا با یک ادیتور از شاخهٔ ‎.git در مخزن گیت‌تان فایل config را باز کنید.</p>
</li>
<li>
<p>نوبت این است که url‌های مربوط به هر سرور راه دور را به مجموعهٔ جدیدی به اسم origin اضافه کنیم. می‌شود چیزی شبیه این:</p>
</li>
</ol>
<pre class="code literal-block"><span class="o">[</span>remote <span class="s2">"origin"</span><span class="o">]</span>

<span class="nv">url</span> <span class="o">=</span> git@github.com:username/somerepo.git

<span class="nv">url</span> <span class="o">=</span> ssh://git@bitbucket.org/username/somerepo.git
</pre>


<ol>
<li>دفعهٔ بعد که از دستور git push origin استفاده کردید‌، مخزن در هر دو سرور راه دور آپلود خواهد شد.</li>
</ol>
<p>به همین راحتی.</p>
<p>نسخه‌های اخیر گیت این اجازه را به شما می‌دهند که چند جا را به عنوان مخزن راه دور یک مجموعه معرفی کنید. ولی من ترجیح می‌دهم که ببینم چه کاری انجام می‌دهم.</p>
</blockquote>

<p><strong>نکته از شاهینیسم:</strong> بهتر است از یک public-key برای گیت‌هاب و بیت‌باکت استفاده کنید. این‌طوری مرحلهٔ شناسایی هر دو سرور مثل هم خواهد بود ;-)</p>
</div>
      
        
    </article>
    <article>
      <h2 class="title"><a href="posts/blog13911021expect-dstyr-bhwsh-shm-dr-shl-skhrypth.html">expect دستیار باهوش شما در شل اسکریپت‌ها!</a></h2>
      <div class="metadata">
	<span class="date">2013-01-10 22:33</span>
	<span class="writer">شاهین آزاد</span>
      </div>
<!--/metadata-->
      <p>
	</p>
<div>
<p>حالا شیوهٔ عملکرد expect معلوم شد‌، بهتر است نگاهی بیاندازیم به وضعیت من. بنا به دلایل کاملا غیر عادی و نامعلومی‌، در کشوری کاملا آزاد‌، نیاز دارم که از sshuttle برای انجام برخی امور استفاده کنم. این برنامه برای انجام دادن درست کار‌هایش‌، نیاز به iptables دارد که خوب من دوست ندارم که کاربر عادی‌ام به آن دسترسی داشته باشد. پس همین دوست نداشتن من یک مرحلهٔ اضافه در فرآیند استفاده از sshuttle هزینه دارد. یعنی یک همچین چیزی:</p>
<pre class="code literal-block">su

Vared Kardan Ramz

<span class="nb">cd</span> /home/shahin/bin/sshutle

./sshuttle ...

Vared Kardan Ramz
</pre>


<p>که خوب بعد از اولین تلاش کانکت نمی‌شود و باید دوباره دستور را بزنم و منتظر بمانم تا پرامپت رمز ssh ظاهر شود و باقی قضایا. خوب کمی سخت است. البته این را هم اضافه کنم که خوب می‌دانم می‌توانم کانکت بدون رمز ssh داشته باشم‌. می‌توانم دستور را درون یک path قرار دهم. می‌توانم‌، می‌توانم‌… ولی این روشی است که من کار می‌کنم ;-)</p>
<p>این است که دست به دامن expect می‌شوم و همچین اسکریپتی می‌نویسم:</p>
<pre class="code literal-block"><span class="c">#!/usr/bin/expect -f</span>



<span class="k">if</span> <span class="o">{[</span>llength <span class="nv">$argv</span><span class="o">]</span> !<span class="o">=</span> 5<span class="o">}</span> <span class="o">{</span>
    puts <span class="s2">"usage: ssh.exp client_root_pass username password server port"</span>
<span class="nb">exit </span>1

<span class="o">}</span>



<span class="nb">set </span>rootpass <span class="o">[</span>lrange <span class="nv">$argv</span> <span class="m">0</span> 0<span class="o">]</span>

<span class="nb">set </span>username <span class="o">[</span>lrange <span class="nv">$argv</span> <span class="m">1</span> 1<span class="o">]</span>

<span class="nb">set </span>password <span class="o">[</span>lrange <span class="nv">$argv</span> <span class="m">2</span> 2<span class="o">]</span>

<span class="nb">set </span>server <span class="o">[</span>lrange <span class="nv">$argv</span> <span class="m">3</span> 3<span class="o">]</span>

<span class="nb">set </span>port <span class="o">[</span>lrange <span class="nv">$argv</span> <span class="m">4</span> 4<span class="o">]</span>



<span class="nb">set </span>timeout -1



spawn su -c <span class="s2">"/home/shahin/bin/sshuttle/sshuttle --dns -r </span><span class="nv">$username</span><span class="s2">@</span><span class="nv">$server</span><span class="s2">:</span><span class="nv">$port</span><span class="s2"> 0/0 -vv"</span>

match_max 100000

expect <span class="s2">"Password:*"</span>

send -- <span class="s2">"</span><span class="nv">$rootpass</span><span class="s2">\r"</span>



expect <span class="s2">"*?assword:*"</span>

send -- <span class="s2">"</span><span class="nv">$password</span><span class="s2">\r"</span>

send -- <span class="s2">"\r"</span>

expect eof
</pre>


<p>حالا همانطور که معلوم است کافی است همچین دستوری را تایپ کنم:</p>
<pre class="code literal-block">./ssh.exp client_root_pass username password server port
</pre>


<p>حالا می‌شود این اسکریپت را بدون هیچ ضرر اضافه‌ای به path اضافه کرد و حالش را برد. برای این که بفهمید این اسکریپت چطور کار می‌کند راهنما‌های زیادی در اینترنت می‌یابید. man page خود برنامه هم می‌تواند کمک خوبی باشد. ضمن این که اگر اسکریپت نویسی بدانید‌، چیز زیادی برای یاد گرفتن پیش‌رویتان نیست ;-)</p>
</div>
      
        
    </article>
    <article>
      <h2 class="title"><a href="posts/blog139110136-sl-blg-nwsy.html">۶ سال شاهینیسم</a></h2>
      <div class="metadata">
	<span class="date">2013-01-02 09:28</span>
	<span class="writer">شاهین آزاد</span>
      </div>
<!--/metadata-->
      <p>
	</p>
<div>
<p>دیگر شاهین‌، شاهین قبلی نبود. نمی‌توانست باشد. همانطور که می‌خواست شده بود. آن‌هایی که نوشته‌هایش را می‌خواندند می‌دید. یاد گرفته بود به حرف‌شان بیاورد. خیلی‌هاشان مثل اطرافیانم در دنیای واقعی بودند. با همان بچه بازی‌ها. با همان نق نق‌ها. خیلی‌های دیگر عدایش را در می‌آوردند که مثلا بهترند. اما خیلی‌ها هم بودند که واقعا عالی بودند. از آن‌هایی که آرزو می‌کنی یک ساعت کنارشان بنشینی و گپ بزنی. از آن‌هایی که دوست داری اجتماعت باشند.</p>
<p>امروز دیگر شاهین‌، منی شده که دارد سعی می‌کند نقابش را بردارد. هر چند خوب می‌داند که… . به هر حال‌، شش سال شد. شش سال تغییرم مبارک ;-)</p>
</div>
      
        
    </article>
<div class="pageNav">
  <div class="prev">
    <a href="index-71.html">← ارسال‌های جدید‌تر</a>
  </div>
  <div class="next">
    <a href="index-69.html">پست‌های قدیمی‌تر →</a>
  </div>
</div>


      </div>
<!--columns four-->
    </div>
<!--container-->

    <nav id="navigation">
      <div class="logo"></div>
      
<!-- Custom search -->
<form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/">
<input type="hidden" name="k8" value="#444444">
<input type="hidden" name="k9" value="#D51920">
<input type="hidden" name="kt" value="h">
<input type="text" placeholder="جستجو…" maxlength="255" name="q">
<input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->

      <ul>
	      <li><a class="nav-icon home" href=".">Home</a></li>
      <li><a class="nav-icon about" href="stories/about-me.html">About</a></li>
      <li><a class="nav-icon resume" href=".">Resume</a></li>
      <li><a class="nav-icon archives" href="archive.html">Archives</a></li>
      <li><a class="nav-icon tags" href="categories/index.html">Tags</a></li>
      <li><a class="nav-icon rss" href="rss.xml">RSS</a></li>

      </ul>
<!--/ul-->
    </nav><!--/navigation-->

<!--/container-->
<footer class="container">
  <div class="columns one">
    <h2>About</h2>
    <p>Not much yet!</p>
  </div>
  <div class="columns one">
    <h2>Social</h2>
    <p class="center">
      <a class="social github" href="http://github.com/shahinism"></a>
      <a class="social twitter" href="http://twitter.com/shahinism"></a>
      <a class="social lastfm" href="http://last.fm/shahinism"></a>
      <a class="social reddit" href="http://reddit.com/user/shahinism"></a>
    </p>
<!-- center -->
  </div>
  <div class="columns one">
    <h2>Projects</h2>
  </div>
<!-- column one -->
  <div class="columns one">
    <h2>Links</h2>
  </div>
  <div class="columns four copyright">
    <p> Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>          </p>
    <p>Designed by <a href="http://5hah.in">Shahin Azad</a>. All rights reserved.</p>
  </div>
</footer><!--/container-->

</body>
</html>
