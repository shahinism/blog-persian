<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="شاهین آزاد">
<title>این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها) | شاهین</title>
<link rel="stylesheet" href="../assets/css/style.css" type="text/css" media="screen">
<link href="../assets/css/custom.css" rel="stylesheet" type="text/css">
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
      <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS fa" href="../rss.xml/">
<link rel="icon" href="favicon.ico" sizes="32x32">
</head>
<body>
    <div class="container">
      <header><p>sometimes you gotta run before you can walk. <small><a href="https://en.wikipedia.org/wiki/Iron_Man">T Stark</a></small></p>
	<a class="nav-link" href="#navigation"></a>
      </header><!--/header--><div class="columns four">
  <article><h2 class="title">این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها)
</h2>
    <div class="metadata">
      <span class="date">2013-04-14 10:23</span>
      <span class="writer">شاهین آزاد</span>
    </div>
    <p>
      </p>
<div>
<p>یکی از ویژگی‌های خوب‌، به درد بخور ولی سرسام آوری که در اکثر ویرایشگرهای
لینوکسی با پدر و مادر دیده‌ایم‌، قابلیت پشتیبان گیریست‌! قابلیتی که هر
چند می‌دانیم که خیلی به آن نیاز پیدا خواهیم کرد‌، عموما از ریختش خوشمان
نمی‌آید. عموما شیوهٔ کار این پشتیبان‌گیر‌ها به این صورت است که در همان
جایی که فایل اصلی وجود دارد‌، یک فایل پشتیبان به صورت خودکار ایجاد
می‌کنند و هیچ وقت هم آن را پاک نمی‌کنند‌! خوب برای آدم‌های وسواسی‌ای مثل
من‌، این کمی اذیت کننده است که آن‌ها را در کنار فایل‌های اصلی‌ام ببینم‌!
ساده‌ترین راه‌کار‌، خاموش کردنش است‌! ولی خاموش کردن هم خطرناک است.
قربانش بروم نیست کلا همه چیز‌مان قابل اطمینان است‌، مطمئن باشید سر
حساس‌ترین ادیت‌تان‌، برق سیستم قطع می‌شود (این خط‌| ، این نشان D:). این
است که برای ایمکس یک جای مخصوص درست می‌کنیم که این پشتیبان‌ها را در آن
جا بریزد. این‌طوری نه ساختار سیستم فایل‌مان را شلخته می‌کنیم‌، و نه از
نعمت وجود پشتیبان‌ها بی‌بهره می‌شویم.</p>
<p><tt class="docutils literal">`
cl <span class="pre">(custom-set-variables</span> ;; <span class="pre">custom-set-variables</span> was added by
Custom. ;; If you edit it by hand, you could mess it up, so be careful.
;; Your init file should contain only one such instance. ;; If there is
more than one, they won't work right. <span class="pre">'(auto-save-file-name-transforms</span>
(quote <span class="pre">((".\*"</span> <span class="pre">"~/.emacs.d/autosaves/\\\\1"</span> <span class="pre">t))))</span>
<span class="pre">'(backup-directory-alist</span> (quote <span class="pre">((".\*"</span> . <span class="pre">"~/.emacs.d/backups/")))))</span>
`</tt></p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">&lt;string&gt;</tt>, line 23)</p>
Unexpected indentation.</div>
<blockquote>
خوب‌، تمام نکتهٔ اصلی ماجرا این‌جاست که ما با تابع</blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 24)</p>
Block quote ends without a blank line; unexpected unindent.</div>
<p>custom-set-variables سر و کار داریم. این تابع را در واقع قرار نیست که ما
صدا بزنیم (ولی این یک‌بار اشکال ندارد‌). حقیقتش نیاز هم نیست‌، چون این
تنظیمات را می‌توان با خود ایمکس انجام داد. کافیست از منوی ایمکس‌،
Options و Customize Emacs را انتخاب کنیم‌، بخش مورد نظر را پیدا و
انگولکش کنیم و سپس Apply &amp; Save و خود ایمکس همچین چیزی را برای‌مان اضافه
می‌کند! ولی خوب من حال سر و کله زدن با این منو‌ها را ندارم. پس باید بروم
و همین متغیر‌ها که می‌بینید را مستقیما تغییر دهم. خوب آن وقت یک کمی
کثیف‌کاری می‌شود. چرا؟ چون آن وقت این Customize ایمکس تنظیمات ما را
نمی‌خواند و ممکن است برای یک همچین تنظیم پایه‌ای‌، مشکل بزاید برای‌مان.
باauto-save-file-name-transforms ما در واقع شیوهٔ نام‌گذاری Autosave‌ها
را با یک Regex تغییر می‌دهیم. خود ایمکس‌، آن بخش آدرس دایرکتوری را‌، به
مسیر جدید فایل تبدیل می‌کند و فایل‌ها را در آن‌جا ذخیره می‌کند.
Autosave‌ها به صورت #FileName#  و به صورت خودکار ذخیره می‌شوند و شامل
آخرین تغییرات یک بافر هستند. دقیقا همین کار را هم با
متغیرbackup-directory-alist انجام می‌دهیم که وظیفهٔ تغییر نام backup‌ها
را بر عهده دارد. این پشتیبان‌ها در واقع آخرین وضعیت Save شدهٔ یک بافر را
ارائه می‌دهند و به صورت FileName~ ‎ نام‌گذاری می‌شوند. حالا نکته
این‌جاست که احتمالا بعد از Restart ایمکس‌، با این اخطار روبرو می‌شوید که
دایرکتوری Autosaves که آدرس داده‌اید وجود ندارد. یک کار این است که آن را
به صورت دستی ایجادش کنید. فقط یک بار لازم است. و بعد ایمکس‌تان را اجرا
کنید. یک کار دیگر هم می‌توان با دستور لیسپ زیر‌، چک کرد که اگر دایرکتوری
وجود نداشت‌، خود ایمکس ایجادش کند: ```cl (make-directory
"~/.emacs.d/autosaves/" t) ``` من این تنظیمات را از <a class="reference external" href="http://snarfed.org/gnu_emacs_backup_files">این
پست</a> یاد گرفتم. وبلاگ
قدیمی‌ایست‌، و چیز‌های خوبی در مورد ایمکس می‌توان ازش یاد گرفت.</p>
</div>
    
    <div class="pageNav">
      <ul class="pager">
<div class="prev">
    <a href="blog13920122yn-ymkhs-dwst-dshtny-ido-modewp.html">← ارسال پیشین</a>
  </div>
  <div class="next">
    <a href="blog13920127yn-ymkhs-dwst-dshtny-blns-khrdn-prnwp.html">ارسال بعدی →</a>
  </div>
  </ul>
</div>
    <div class="postMeta">
        <section class="comments hidden-print"><h2>دیدگاه‌‌‌ها</h2>
                          <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="shahinism",
            disqus_url="http://5hah.in/posts/blog13920125yn-ymkhs-dwst-dshtny-backuph-w-autosavehwp.html",
        disqus_title="\u0627\u06cc\u0646 \u0627\u06cc\u0645\u06a9\u0633 \u062f\u0648\u0633\u062a \u062f\u0627\u0634\u062a\u0646\u06cc (Backup\u200c\u0647\u0627 \u0648 Autosave\u200c\u0647\u0627)",
        disqus_identifier="cache/posts/blog13920125yn-ymkhs-dwst-dshtny-backuph-w-autosaveh.wp.html",
        disqus_config = function () {
            this.language = "fa";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section>
</div>
  </article>
</div>
<!--columns four-->
    </div>
<!--container-->

    <nav id="navigation"><div class="logo"></div>
      
<!-- Custom search -->
<form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" placeholder="جستجو…" maxlength="255" name="q"><input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->

      <ul>
<li><a class="nav-icon home" href="../">Home</a></li>
      <li><a class="nav-icon about" href="../stories/about-me.html">About</a></li>
      <li><a class="nav-icon resume" href="../">Resume</a></li>
      <li><a class="nav-icon archives" href="../archive.html">Archives</a></li>
      <li><a class="nav-icon tags" href="../categories/index.html">Tags</a></li>
      <li><a class="nav-icon rss" href="../rss.xml">RSS</a></li>

      </ul>
<!--/ul--></nav><!--/navigation--><!--/container--><footer class="container"><div class="columns one">
    <h2>About</h2>
    <p>Not much yet!</p>
  </div>
  <div class="columns one">
    <h2>Social</h2>
    <p class="center">
      <a class="social github" href="http://github.com/shahinism"></a>
      <a class="social twitter" href="http://twitter.com/shahinism"></a>
      <a class="social lastfm" href="http://last.fm/shahinism"></a>
      <a class="social reddit" href="http://reddit.com/user/shahinism"></a>
    </p>
<!-- center -->
  </div>
  <div class="columns one">
    <h2>Projects</h2>
  </div>
<!-- column one -->
  <div class="columns one">
    <h2>Links</h2>
  </div>
  <div class="columns four copyright">
    <p> Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>          </p>
    <p>Designed by <a href="http://5hah.in">Shahin Azad</a>. All rights reserved.</p>
  </div>
</footer><!--/container-->
</body>
</html>
