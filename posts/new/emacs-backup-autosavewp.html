<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="http://5hah.in/posts/new/emacs-backup-autosavewp.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها) .. date: | شاهین</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://5hah.in/posts/new/emacs-backup-autosavewp.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="شاهین آزاد">
<link rel="prev" href="ebuddy-messengerwp.html" title="مسنجری برای کاربران اینترنت و ایرانسل .. date: 2007/9/26" type="text/html">
<link rel="next" href="emacs-ergoemacswp.html" title="این ایمکس دوست داشتنی (ergoemacs-mode) .. date: 2013/4/8" type="text/html">
<meta property="og:site_name" content="شاهین">
<meta property="og:title" content="این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها) .. date:">
<meta property="og:url" content="http://5hah.in/posts/new/emacs-backup-autosavewp.html">
<meta property="og:description" content="یکی از ویژگی‌های خوب‌، به درد بخور ولی سرسام آوری که در اکثر ویرایشگرهای
لینوکسی با پدر و مادر دیده‌ایم‌، قابلیت پشتیبان گیریست‌! قابلیتی که هر
چند می‌دانیم که خیلی به آن نیاز پیدا خواهیم کرد‌، عموما ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-11-01T00:00:00+03:30">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://5hah.in/">

                <span id="blog-title">شاهین</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../">Home</a>
                </li>
<li>
<a href="../../stories/about-me.html">About</a>
                </li>
<li>
<a href="../../">Resume</a>
                </li>
<li>
<a href="../../archive.html">Archives</a>
                </li>
<li>
<a href="../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" placeholder="جستجو…" maxlength="255" name="q"><input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="emacs-backup-autosavewp.rst" id="sourcelink">منبع</a>
    </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها) .. date:</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    شاهین آزاد
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" itemprop="datePublished" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="emacs-backup-autosavewp.html#disqus_thread" data-disqus-identifier="cache/posts/new/emacs-backup-autosave.wp.html">Comments</a>


                    </p>
<p class="sourceline"><a href="emacs-backup-autosavewp.rst" id="sourcelink">منبع</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p></p>
<p>یکی از ویژگی‌های خوب‌، به درد بخور ولی سرسام آوری که در اکثر ویرایشگرهای
لینوکسی با پدر و مادر دیده‌ایم‌، قابلیت پشتیبان گیریست‌! قابلیتی که هر
چند می‌دانیم که خیلی به آن نیاز پیدا خواهیم کرد‌، عموما از ریختش خوشمان
نمی‌آید. عموما شیوهٔ کار این پشتیبان‌گیر‌ها به این صورت است که در همان
جایی که فایل اصلی وجود دارد‌، یک فایل پشتیبان به صورت خودکار ایجاد
می‌کنند و هیچ وقت هم آن را پاک نمی‌کنند‌! خوب برای آدم‌های وسواسی‌ای مثل
من‌، این کمی اذیت کننده است که آن‌ها را در کنار فایل‌های اصلی‌ام ببینم‌!
ساده‌ترین راه‌کار‌، خاموش کردنش است‌! ولی خاموش کردن هم خطرناک است.
قربانش بروم نیست کلا همه چیز‌مان قابل اطمینان است‌، مطمئن باشید سر
حساس‌ترین ادیت‌تان‌، برق سیستم قطع می‌شود (این خط‌| ، این نشان D:).</p>
<p>این است که برای ایمکس یک جای مخصوص درست می‌کنیم که این پشتیبان‌ها را در
آن جا بریزد. این‌طوری نه ساختار سیستم فایل‌مان را شلخته می‌کنیم‌، و نه
از نعمت وجود پشتیبان‌ها بی‌بهره می‌شویم.</p>
<pre class="code cl"><a name="rest_code_ece073ce09bd420ba2de0dca2f993929-1"></a><span class="p">(</span><span class="nv">custom-set-variables</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-2"></a><span class="c1">;; custom-set-variables was added by Custom.</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-3"></a><span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-4"></a><span class="c1">;; Your init file should contain only one such instance.</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-5"></a><span class="c1">;; If there is more than one, they won't work right.</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-6"></a><span class="o">'</span><span class="p">(</span><span class="nv">auto-save-file-name-transforms</span> <span class="p">(</span><span class="k">quote</span> <span class="p">((</span><span class="s">".*"</span> <span class="s">"~/.emacs.d/autosaves/\\1"</span> <span class="no">t</span><span class="p">))))</span>
<a name="rest_code_ece073ce09bd420ba2de0dca2f993929-7"></a><span class="o">'</span><span class="p">(</span><span class="nv">backup-directory-alist</span> <span class="p">(</span><span class="k">quote</span> <span class="p">((</span><span class="s">".*"</span> <span class="o">.</span> <span class="s">"~/.emacs.d/backups/"</span><span class="p">)))))</span>
</pre>
<p>خوب‌، تمام نکتهٔ اصلی ماجرا این‌جاست که ما با تابع custom-set-variables
سر و کار داریم. این تابع را در واقع قرار نیست که ما صدا بزنیم (ولی این
یک‌بار اشکال ندارد‌). حقیقتش نیاز هم نیست‌، چون این تنظیمات را می‌توان
با خود ایمکس انجام داد. کافیست از منوی ایمکس‌، Options و Customize Emacs
را انتخاب کنیم‌، بخش مورد نظر را پیدا و انگولکش کنیم و سپس Apply &amp; Save
و خود ایمکس همچین چیزی را برای‌مان اضافه می‌کند! ولی خوب من حال سر و کله
زدن با این منو‌ها را ندارم. پس باید بروم و همین متغیر‌ها که می‌بینید را
مستقیما تغییر دهم. خوب آن وقت یک کمی کثیف‌کاری می‌شود. چرا؟ چون آن وقت
این Customize ایمکس تنظیمات ما را نمی‌خواند و ممکن است برای یک همچین
تنظیم پایه‌ای‌، مشکل بزاید برای‌مان.</p>
<p>باauto-save-file-name-transforms ما در واقع شیوهٔ نام‌گذاری Autosave‌ها
را با یک Regex تغییر می‌دهیم. خود ایمکس‌، آن بخش آدرس دایرکتوری را‌، به
مسیر جدید فایل تبدیل می‌کند و فایل‌ها را در آن‌جا ذخیره می‌کند.
Autosave‌ها به صورت #FileName#  و به صورت خودکار ذخیره می‌شوند و شامل
آخرین تغییرات یک بافر هستند.</p>
<p>دقیقا همین کار را هم با متغیرbackup-directory-alist انجام می‌دهیم که
وظیفهٔ تغییر نام backup‌ها را بر عهده دارد. این پشتیبان‌ها در واقع آخرین
وضعیت Save شدهٔ یک بافر را ارائه می‌دهند و به صورت FileName~ ‎ نام‌گذاری
می‌شوند.</p>
<p>حالا نکته این‌جاست که احتمالا بعد از Restart ایمکس‌، با این اخطار روبرو
می‌شوید که دایرکتوری Autosaves که آدرس داده‌اید وجود ندارد. یک کار این
است که آن را به صورت دستی ایجادش کنید. فقط یک بار لازم است. و بعد
ایمکس‌تان را اجرا کنید. یک کار دیگر هم می‌توان با دستور لیسپ زیر‌، چک
کرد که اگر دایرکتوری وجود نداشت‌، خود ایمکس ایجادش کند:</p>
<pre class="code cl"><a name="rest_code_8ccd02a77ee943c68d7b3e60e3dfef22-1"></a><span class="p">(</span><span class="nv">make-directory</span> <span class="s">"~/.emacs.d/autosaves/"</span> <span class="no">t</span><span class="p">)</span>
</pre>
<p>من این تنظیمات را از این پست یاد گرفتم. وبلاگ قدیمی‌ایست‌، و چیز‌های
خوبی در مورد ایمکس می‌توان ازش یاد گرفت.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="ebuddy-messengerwp.html" rel="prev" title="مسنجری برای کاربران اینترنت و ایرانسل .. date: 2007/9/26">ارسال پیشین</a>
            </li>
            <li class="next">
                <a href="emacs-ergoemacswp.html" rel="next" title="این ایمکس دوست داشتنی (ergoemacs-mode) .. date: 2013/4/8">ارسال بعدی</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>دیدگاه‌‌‌ها</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="shahinism",
            disqus_url="http://5hah.in/posts/new/emacs-backup-autosavewp.html",
        disqus_title="\u0627\u06cc\u0646 \u0627\u06cc\u0645\u06a9\u0633 \u062f\u0648\u0633\u062a \u062f\u0627\u0634\u062a\u0646\u06cc (Backup\u200c\u0647\u0627 \u0648 Autosave\u200c\u0647\u0627) .. date:",
        disqus_identifier="cache/posts/new/emacs-backup-autosave.wp.html",
        disqus_config = function () {
            this.language = "fa";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="../../assets/js/all-nocdn.js"></script><script src="../../assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
