<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="wot-verification" content="1e0ce5594a67af53269c">
<base href="https://5hah.in/posts/wp/chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw/">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>چگونه ایمکس‌مان را تربیت کنیم (قسمت دوم) | شاهین</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://5hah.in/posts/wp/chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="شاهین">
<link rel="prev" href="../chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-w/" title="چگونه ایمکس‌مان را تربیت کنیم (قسمت اول)" type="text/html">
<link rel="next" href="../z-autojump-dr-trmynl-qfl-nshwyd/" title="از Autojump در ترمینال غافل نشوید‌!" type="text/html">
<meta property="og:site_name" content="شاهین">
<meta property="og:title" content="چگونه ایمکس‌مان را تربیت کنیم (قسمت دوم)">
<meta property="og:url" content="https://5hah.in/posts/wp/chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw/">
<meta property="og:description" content="یکی از اجزای جدا نشدنی توابع برنامه نویسی‌، آرگومان‌هایی هستند که می‌توان با استقاده از آن‌ها کارکرد توابع را تحت تاثیر قرار داد‌. توابع ایمکس هم از این قائده مستثنا نیستند‌. برای مثال می‌توان با C-u ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-07-23T10:49:27+04:30">
</head>
<body>
  <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

  <div class="navigator">
    
  </div>

  <nav class="navbar navbar-default"><div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../"><img src="../../../assets/images/logo.png"></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about-me">درباره</a>
                </li>
<li>
<a href="../../../docs/resume.pdf">رزومه</a>
                </li>
<li>
<a href="../../../archive.html">آرشیو</a>
                </li>
<li>
<a href="../../../categories/">دسته‌ها</a>
                </li>
<li>
<a href="../../../rss.xml">خوراک</a>

                    
        </li>
</ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container-fluid -->
  </nav><div class="jumbotron">
    <section class="container"><div id="headerbox" class="col-md-6 col-md-offset-3 text-center">
        <h1>شاهین</h1>
        <hr class="hdrline">
<a class="social" href="https://github.com/shahinism">
          <img src="../../../assets/images/github.png"></a>
        <a class="social" href="https://twitter.com/shahinism">
          <img src="../../../assets/images/twitter.png"></a>
        <a class="social" href="https://ir.linkedin.com/in/shahinism">
          <img src="../../../assets/images/linkedin.png"></a>
      </div>
    </section>
</div>

  <div class="container" id="content" role="main">
    <!--Body content-->
    <div class="col-md-6 col-md-offset-3">
      <div class="row">
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><div class="text-center">
          <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">چگونه ایمکس‌مان را تربیت کنیم (قسمت دوم)</a></h1>

        شاهین
      <a href="." rel="bookmark"><time class="published dt-published" datetime="2012-07-23T10:49:27+04:30" itemprop="datePublished" title="2012-07-23 10:49">2012-07-23 10:49</time></a>
    </div>
    
  </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>یکی از اجزای جدا نشدنی توابع برنامه نویسی‌، آرگومان‌هایی هستند که می‌توان با استقاده از آن‌ها کارکرد توابع را تحت تاثیر قرار داد‌. توابع ایمکس هم از این قائده مستثنا نیستند‌. برای مثال می‌توان با C-u 3 C-x C-n نشانگر را به سه پنجره بعد از پنجرهٔ حاضر منتقل کرد‌. می‌خواهید امتحان کنید؟ ایمکس‌تان را باز کنید و آن را به چهار پنجره تقسیم کنید و فرمان بالا را وارد کنید‌. همان‌طور که می‌بینید تابع other-window که در این‌جا مورد بحث ماست‌، با استفاده از آرگومان دریافتی توسط C-u که همان عدد سه است‌، می‌تواند به سه پنجره بعد بپرد و ما را از فراخوانی پیاپی‌اش نجات دهد‌. حالا نکته این‌جاست که این تابع آرگومان منفی‌ای مثل ‎-۱ را هم می‌پذیرد‌. و احتمالا این دقیقا همان چیزی است که ما برای حرکت در پنجره‌ها به سمت چپ نیاز داریم‌. یک بار امتحانش کنید: C-u -1 C-x C-n</p>
<p><strong>نکته:</strong> اکثر توابع موجود در ایمکس با استفاده از مقادیری مثل ‎-۱ عکس عمل عادی‌شان را انجام می‌دهند‌. فکر کنید که با این ترکیب چه توابع جالب و کاربردی‌ای می‌توان ساخت‌. مثلا کلید delete عقب‌گرد که در ایمکس به طور عادی تعریف نشده D: (در آینده یک نمونه خواهیم ساخت ;-))</p>
<h5>تعریف اولیه other-window-backward</h5>

<p>برای این که از سختی وارد کردن همچون دستوری بکاهیم‌، بهتر است که آن را به صورت یک تابع تعریف کنیم تا هر جایی که نیاز بود بتوانیم به راحتی از آن استفاده کنیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>

<span class="s2">"Select the previous window."</span>

<span class="o">(</span>interactive<span class="o">)</span>

<span class="o">(</span>other-window -1<span class="o">))</span>
</pre>


<p>خوب این خطوط به چه معناست؟ به ترتیب آن‌ها را بررسی می‌کنیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>
</pre>


<p>در این خط مثل اکثر زبان‌های برنامه‌نویسی دیگر‌، شروع به تعریف تابع می‌کنیم‌. defun عبارتی است مانند def در پایتون که وظیفهٔ تعریف توابع را بر عهده دارد‌. در ادامه نیز اسم تابع other-window-backward و یک جفت پرانتز خالی (که محل تعریف آرگومان‌هایمان در آینده است) را قرار می‌دهیم‌.</p>
<p>در خط دوم:</p>
<pre class="code literal-block"><span></span><span class="s2">"Select the previous window"</span>
</pre>


<p>تنها یک توضیح کوتاه برای عملکرد تابع می‌نویسیم‌. این توضیح عملا تاثیری در روند اجرا تابع ندارد‌. اما وقتی کاربر بخواهد با دستوری مثل describe-function از نحوهٔ عملکرد تابع مطلع شود‌، این توضیح است که نمایش داده می‌شود‌.</p>
<p>خط سوم شامل:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>interactive<span class="o">)</span>
</pre>


<p>این خط در واقع بر نوع عملکرد تابع نسبت به آرگومان‌ها در زمان فراخوانی‌شان دلالت می‌کند‌. در ادامه با مزایای این دستور بیشتر آشنا خواهیم شد‌. فعلا الاالحساب آن را همانطور که هست وارد می‌کنیم‌.</p>
<p>و خط آخر:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>other-window -1<span class="o">))</span>
</pre>


<p>همان‌طور که معلوم است‌، تابع other-window آشنایمان را با آرگومان ‎-۱ صدا می‌کند‌. این آرگومان منفی همانطور که توضیح دادیم به تابع می‌فهماند که باید عقب‌گرد حرکت کند‌.</p>
<p>حالا دیگر تقریبا کارمان تمام است‌. تنها کافی است که آن را به کلید ترکیبی مد نظرمان (C-x C-p چنان که در قسمت قبل تصمیم گرفتیم) پیوند دهیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-p"</span> <span class="err">'</span>other-window-backward<span class="o">)</span>
</pre>


<p>و کار تقریبا تمام است‌.</p>
<h5>افزودن مزایای آرگومان‌ها</h5>

<p>تا این‌جای کار other-window-backward کاری که می‌خواهیم را درست انجام می‌دهد‌. اما هنوز یک کمبود دارد‌. کدام کمبود؟ همانطور که بالا‌تر توضیح دادم ما می‌توانستیم با C-u به other-window بگوییم که مثلا به دو پنجره بعد بپرد و ما را از فراخوانی دوباره و دوباره‌اش نجات دهد‌. اما تابعی که الان تعریف کردیم‌، این قابلیت را ندارد‌. در نتیجه کاربر بخت برگشته باید برای پرش به سه پنجره قبل سه بار این کلید‌ها را فشار دهد‌! و این یعنی عذاب ;-)</p>
<p>برای این که تابع‌مان یک آرگومان بپذیرد‌، آن را به شکل زیر ویرایش می‌کنیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>defun other-window-backward <span class="o">(</span>n<span class="o">)</span>

<span class="s2">"Select Nth previous window."</span>

<span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>

<span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">)))</span>
</pre>


<p>همانطور که می‌بینید در خط اول‌، یک آرگومان به لیست آرگومان‌های تابع به اسم n اضافه کردیم‌. با این کار به تابع فهماندیم اگر کاربر با C-u آرگومانی را فرستاد (مثلا ۲) آن را در متغیر n قرار بده‌.</p>
<p>همینطور در خط آخر به جای استفاده از ‎-۱ تابع other-window را با آرگومان منفی n صدا زدیم‌. یعنی هر عددی به n فرستاده شد‌، به ترکیب فوق‌، به صورت منفی به other-window فرستاده می‌شود‌.</p>
<p><strong>توجه:</strong> به فاصلهٔ میان علامت منفی و حرف n توجه کنید‌. در صورتی که بخواهید آن را به صورت:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>-n<span class="o">)</span>
</pre>


<p>بنویسید‌، مفسر لیسپ به مشکل بر می‌خورد‌. احتمالا یادتان هست که برای تفریق دو عدد چه کار باید می‌کردیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>- <span class="m">2</span> 6<span class="o">)</span>
</pre>


<p>لیسپ در این‌جا دو عدد را از هم کم می‌کند‌، اما اگر به جای دو عدد فقط یک عدد وجود داشته باشد‌، مثل تابع ما‌، آن را به صورت عدد منفی تلقی می‌کند‌.</p>
<p>اما یک نکتهٔ مهم و اساسی در خط سوم وجود دارد که باید به آن نیز بپردازیم‌. ما در این خط به صورت زیر عمل کردیم‌:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>
</pre>


<p>جریان آن p مشکوک چیست؟ اگر تابع مثل روش اول‌مان‌، هیچ آرگومانی نگیرد‌، interactive هم بدون آرگومان می‌ماند‌. اما اگر مثل روش اخیرمان بخواهیم در تابع از آرگومانی استفاده کنیم‌، باید یک آرگومان به صورت رشته کد به interactive هم اضافه کنیم‌. کد p کوچک به تابع می‌فهماند که اگر یک آرگومان به تابع فرستاده شد آن را به صورت یک عدد ترجمه کن و به تابع برگردان‌. اما اگر آرگومانی فرستاده نشد‌، خودت به صورت پیش‌فرض عدد ۱ را به تابع برگردان‌. و این دقیقا کاری است که ما تا این‌جای کار از تابع‌مان می‌خواهیم‌.</p>
<h5>اختیاری کردن آرگومان</h5>

<p>همان‌طور که می‌بینید‌، این تابع قابلیت فراخوانی توسط توابع دیگر لیسپ را نیز دارد‌. اما در این وضعیت (منظورم در حالتی است که تابع توسط توابع دیگر فراخوانده شود و نه در صورتی که توسط کاربر صدا زده می‌شوند) حتما باید به همراه فراخوانی تابع یک آرگومان هم به آن اطلاق شود‌. و این کمی کار را پیچیده می‌کند و ممکن است در آینده خسته کننده به نظر بیاید‌. بهتر است تابع را طوری تعریف کنیم که وقتی به صورت other-window-backward صدا شد خودکار روش انجام کار پیش‌فرضش را پیش بگیرد‌. پس آن را به صورت زیر ویرایش می‌کنیم:</p>
<pre class="code literal-block"><span></span><span class="o">(</span>defun other-window-backward <span class="o">(</span><span class="p">&amp;</span>amp<span class="p">;</span>optional n<span class="o">)</span>

<span class="s2">"Select Nth previous window."</span>

<span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>

<span class="o">(</span><span class="k">if</span> n

<span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">))</span> <span class="p">;</span> <span class="k">if</span> n is non-nil

<span class="o">(</span>other-window -1<span class="o">)))</span> <span class="p">;</span> <span class="k">if</span> n is nil
</pre>


<p>در خط اول با ‏‎&amp;optional به تابع می‌فهمانیم که آرگومان n باید اختیاری باشد‌. یعنی اگر فرستاده شد مقدار دهی شود و اگر نه‌، بی‌خیالش باشد‌. همچنین از یک عبارت کنترلی if هم استفاده کردیم‌. در این عبارت اگر n مقدار داشته باشد‌، پس if با یک وضعیت non-nil یا همان True در اکثر زبان‌های برنامه نویسی روبروست‌. و اگر مقدار نداشته باشد‌، برابر است با nil یا False. با توجه با کامنت‌های موجود در کد احتمالا می‌توانید بفهمید که در صورت وقوع هر یک از این وضعیت‌ها کدام حالت رخ خواهد داد‌.</p>
<p>فکر می‌کنم تا این‌جای کار برای امروز کافی باشد‌. کارمان هنوز با این تابع تمام نشده‌. هنوز کمی دیگر راه باقی است که بتوان آن را به عنوان یک تابع ایمکس لیسپی کامل قبول کرد‌. اما لازم است قبل از توضیح بیشتر و سخت کردن کار‌، مفاهیم گفته شده تا این‌جای کار کاملا درک شوند‌.</p>
<p><strong>پی‌نوشت:</strong> مرا به علت دیر‌کرد این چند وقته در انتشار ادامهٔ مطلب حاضر ببخشید‌. امروز هم احتمالا نتوانسته‌ام آن‌طور که باید و شاید حق مطلب رو عدا کنم‌. حقیقتش امروز از آن روز‌هایی بود که در مود نوشتن برای وبلاگ نبودم ولی باید حتما تا این‌جای کار را بیان می‌کردم تا نوشته‌ها از خودم عقب نمانند ;-)</p>
</div>
    </div>
    <aside class="postpromonav"><nav><div class="bg-info">
        
      </div>
              <ul class="pager hidden-print">
<li class="previous">
                <a href="../chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-w/" rel="prev" title="چگونه ایمکس‌مان را تربیت کنیم (قسمت اول)">Previous post</a>
            </li>
            <li class="next">
                <a href="../z-autojump-dr-trmynl-qfl-nshwyd/" rel="next" title="از Autojump در ترمینال غافل نشوید‌!">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="shahinism",
            disqus_url="https://5hah.in/posts/wp/chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw/",
        disqus_title="\u0686\u06af\u0648\u0646\u0647 \u0627\u06cc\u0645\u06a9\u0633\u200c\u0645\u0627\u0646 \u0631\u0627 \u062a\u0631\u0628\u06cc\u062a \u06a9\u0646\u06cc\u0645 (\u0642\u0633\u0645\u062a \u062f\u0648\u0645)",
        disqus_identifier="cache/posts/wp/chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
    </div>
    <!--End of body content-->
  </div>

  <footer id="footer" class="site-footer">
    Contents © 2016         <a href="mailto:me@5hah.in">شاهین</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
    
  </footer><script src="../../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
  </script><!-- end fancy dates -->
</body>
</html>
