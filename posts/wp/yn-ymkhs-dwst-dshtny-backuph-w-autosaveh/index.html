<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<meta name="wot-verification" content="1e0ce5594a67af53269c">
<base href="https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها) | شاهین</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="شاهین">
<link rel="prev" href="../yn-ymkhs-dwst-dshtny-ido-mode/" title="این ایمکس دوست داشتنی (ido-mode)" type="text/html">
<link rel="next" href="../yn-ymkhs-dwst-dshtny-blns-khrdn-prn/" title="این ایمکس دوست داشتنی (بالانس کردن پرانتز‌ها)" type="text/html">
<meta property="og:site_name" content="شاهین">
<meta property="og:title" content="این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها)">
<meta property="og:url" content="https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/">
<meta property="og:description" content="این است که برای ایمکس یک جای مخصوص درست می‌کنیم که این پشتیبان‌ها را در آن جا بریزد. این‌طوری نه ساختار سیستم فایل‌مان را شلخته می‌کنیم‌، و نه از نعمت وجود پشتیبان‌ها بی‌بهره می‌شویم.


 (custom-set-v">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-04-14T10:23:13+04:30">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@shahinism">
</head>
<body>
  <a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

  <div class="navigator">
    
  </div>

  <nav class="navbar navbar-default"><div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../"><img src="../../../assets/images/logo.png"></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
<li>
<a href="../../../stories/about-me">درباره</a>
                </li>
<li>
<a href="../../../docs/resume.pdf">رزومه</a>
                </li>
<li>
<a href="../../../archive.html">آرشیو</a>
                </li>
<li>
<a href="../../../categories/">دسته‌ها</a>
                </li>
<li>
<a href="../../../rss.xml">خوراک</a>

                    
        </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="جستجو" class="form-control" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


      </div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container-fluid -->
  </nav><section class="container"><div id="headerbox" class="col-md-6 col-centered">
      <div class="terminal">
        <span class="prompt"> <span class="cursor"></span></span>
      </div>
    </div>
  </section><div class="container" id="content" role="main">
    <!--Body content-->
    <div class="col-md-7 col-centered">
      <div class="row">
        
  <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><div class="publish-date">
      <i class="glyphicon glyphicon-calendar"></i>
      <time class="published dt-published" datetime="2013-04-14T10:23:13+04:30" title="2013-04-14 10:23">2013-04-14 10:23</time>
</div>

        <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">این ایمکس دوست داشتنی (Backup‌ها و Autosave‌ها)</a></h1>

    
  </header><div class="e-content entry-content" itemprop="articleBody text">
      <div>
<p>این است که برای ایمکس یک جای مخصوص درست می‌کنیم که این پشتیبان‌ها را در آن جا بریزد. این‌طوری نه ساختار سیستم فایل‌مان را شلخته می‌کنیم‌، و نه از نعمت وجود پشتیبان‌ها بی‌بهره می‌شویم.</p>


<pre class="code literal-block"><span></span> <span class="p">(</span><span class="nv">custom-set-variables</span>
 <span class="c1">;; custom-set-variables was added by Custom.</span>
 <span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
 <span class="c1">;; Your init file should contain only one such instance.</span>
 <span class="c1">;; If there is more than one, they won't work right.</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">auto-save-file-name-transforms</span> <span class="p">(</span><span class="k">quote</span> <span class="p">((</span><span class="s">".*"</span> <span class="s">"~/.emacs.d/autosaves/\\1"</span> <span class="no">t</span><span class="p">))))</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">backup-directory-alist</span> <span class="p">(</span><span class="k">quote</span> <span class="p">((</span><span class="s">".*"</span> <span class="o">.</span> <span class="s">"~/.emacs.d/backups/"</span><span class="p">)))))</span>
</pre>


<p>خوب‌، تمام نکتهٔ اصلی ماجرا این‌جاست که ما با تابع custom-set-variables سر و کار داریم. این تابع را در واقع قرار نیست که ما صدا بزنیم (ولی این یک‌بار اشکال ندارد‌). حقیقتش نیاز هم نیست‌، چون این تنظیمات را می‌توان با خود ایمکس انجام داد. کافیست از منوی ایمکس‌، Options و Customize Emacs را انتخاب کنیم‌، بخش مورد نظر را پیدا و انگولکش کنیم و سپس Apply &amp; Save و خود ایمکس همچین چیزی را برای‌مان اضافه می‌کند! ولی خوب من حال سر و کله زدن با این منو‌ها را ندارم. پس باید بروم و همین متغیر‌ها که می‌بینید را مستقیما تغییر دهم. خوب آن وقت یک کمی کثیف‌کاری می‌شود. چرا؟ چون آن وقت این Customize ایمکس تنظیمات ما را نمی‌خواند و ممکن است برای یک همچین تنظیم پایه‌ای‌، مشکل بزاید برای‌مان.</p>
<p>باauto-save-file-name-transforms ما در واقع شیوهٔ نام‌گذاری Autosave‌ها را با یک Regex تغییر می‌دهیم. خود ایمکس‌، آن بخش آدرس دایرکتوری را‌، به مسیر جدید فایل تبدیل می‌کند و فایل‌ها را در آن‌جا ذخیره می‌کند. Autosave‌ها به صورت #FileName#  و به صورت خودکار ذخیره می‌شوند و شامل آخرین تغییرات یک بافر هستند.</p>
<p>دقیقا همین کار را هم با متغیرbackup-directory-alist انجام می‌دهیم که وظیفهٔ تغییر نام backup‌ها را بر عهده دارد. این پشتیبان‌ها در واقع آخرین وضعیت Save شدهٔ یک بافر را ارائه می‌دهند و به صورت FileName~ ‎ نام‌گذاری می‌شوند.</p>
<p>حالا نکته این‌جاست که احتمالا بعد از Restart ایمکس‌، با این اخطار روبرو می‌شوید که دایرکتوری Autosaves که آدرس داده‌اید وجود ندارد. یک کار این است که آن را به صورت دستی ایجادش کنید. فقط یک بار لازم است. و بعد ایمکس‌تان را اجرا کنید. یک کار دیگر هم می‌توان با دستور لیسپ زیر‌، چک کرد که اگر دایرکتوری وجود نداشت‌، خود ایمکس ایجادش کند:</p>
<pre class="code literal-block"><span></span><span class="p">(</span><span class="nv">make-directory</span> <span class="s">"~/.emacs.d/autosaves/"</span> <span class="no">t</span><span class="p">)</span>
</pre>


<p>من این تنظیمات را از <a href="http://snarfed.org/gnu_emacs_backup_files">این پست</a> یاد گرفتم. وبلاگ قدیمی‌ایست‌، و چیز‌های خوبی در مورد ایمکس می‌توان ازش یاد گرفت.</p>
</div>
    </div>

    <div class="terminal">
      <span class="prompt">python ./share.py help</span>
      <div class="result">
        <span>
          If you enjoyed it you can use following links to share this article:
        </span>
        <ol>
<li><a href="https://twitter.com/intent/tweet/?text=%D8%A7%DB%8C%D9%86%20%D8%A7%DB%8C%D9%85%DA%A9%D8%B3%20%D8%AF%D9%88%D8%B3%D8%AA%20%D8%AF%D8%A7%D8%B4%D8%AA%D9%86%DB%8C%20(Backup%E2%80%8C%D9%87%D8%A7%20%D9%88%20Autosave%E2%80%8C%D9%87%D8%A7)%20by%20@shahinism&amp;url=https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/" target="_blank">twitter</a></li>
          <li><a href="https://plus.google.com/share?url=https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/" target="_blank">google_plus</a></li>
          <li><a href="https://facebook.com/sharer/sharer.php?u=https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/" target="_blank">facebook</a></li>
        </ol>
</div>
      
      <span class="prompt">ls ./tags</span>
      

      <span class="prompt"><span class="cursor"></span></span>
    </div> <!-- .terminal -->
    <nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../yn-ymkhs-dwst-dshtny-ido-mode/" rel="prev" title="این ایمکس دوست داشتنی (ido-mode)">ارسال پیشین</a>
            </li>
            <li class="next">
                <a href="../yn-ymkhs-dwst-dshtny-blns-khrdn-prn/" rel="next" title="این ایمکس دوست داشتنی (بالانس کردن پرانتز‌ها)">ارسال بعدی</a>
            </li>
        </ul></nav><section class="comments hidden-print"><h2>دیدگاه‌‌‌ها</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="shahinism",
            disqus_url="https://5hah.in/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh/",
        disqus_title="\u0627\u06cc\u0646 \u0627\u06cc\u0645\u06a9\u0633 \u062f\u0648\u0633\u062a \u062f\u0627\u0634\u062a\u0646\u06cc (Backup\u200c\u0647\u0627 \u0648 Autosave\u200c\u0647\u0627)",
        disqus_identifier="cache/posts/wp/yn-ymkhs-dwst-dshtny-backuph-w-autosaveh.html",
        disqus_config = function () {
            this.language = "fa";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


      </section></article><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
    </div>
    <!--End of body content-->
  </div>

  <footer id="footer" class="site-footer">
    Contents © 2016         <a href="mailto:me@5hah.in">شاهین</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
    
  </footer><script src="../../../assets/js/all-nocdn.js"></script><script src="../../../assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
  </script><!-- end fancy dates -->
</body>
</html>
