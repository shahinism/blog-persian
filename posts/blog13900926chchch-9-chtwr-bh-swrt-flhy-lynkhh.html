<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="//5hah.in/posts/blog13900926chchch-9-chtwr-bh-swrt-flhy-lynkhh.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>چ‌چ‌چ (۹): چطور به صورت فله‌ای لینک‌های یوتیوب را از وب‌سایتی استخراج و دانلود کنیم‌! | شاهین</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/bootstrap-rtl.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/style.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="//5hah.in/posts/blog13900926chchch-9-chtwr-bh-swrt-flhy-lynkhh.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="شاهین آزاد">
<link rel="prev" href="blog13900911chchch-8-rngy-khrdn-khrwjy-frmn-ls-dr-bash.html" title="چ‌چ‌چ‌ (۸)‌: رنگی کردن خروجی فرمان ls در BASH" type="text/html">
<link rel="next" href="blog13901010hl-mshkhl-usb-stickhyy-khh-bh-swrt-unsafe-z-systm-jd.html" title="حل مشکل USB Stick‌هایی که به صورت Unsafe از سیستم جدا شده‌اند" type="text/html">
<meta property="og:site_name" content="شاهین">
<meta property="og:title" content="چ‌چ‌چ (۹): چطور به صورت فله‌ای لینک‌های یوتیوب را از وب‌سایتی استخراج ">
<meta property="og:url" content="//5hah.in/posts/blog13900926chchch-9-chtwr-bh-swrt-flhy-lynkhh.html">
<meta property="og:description" content="کار عادی‌اش به این صورت است که بنشینیم و با حوصله تک تک لینک‌ها را کپی پیست کرده و جایی ذخیره کنیم‌. ولی با وجود دویست صفحه و لینک‌، کمی (‌خیلی‌) خسته کننده (‌خریت‌ به معنای واقعی کلمه‌، البته ببخشید ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2011-12-17T20:01:46+03:30">
</head>
<body>
  <a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

  <div class="navigator">
    
  </div>

  <nav class="navbar navbar-default"><div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../"><img src="../assets/images/logo.png"></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
<li>
<a href="../stories/about-me.html">درباره</a>
                </li>
<li>
<a href="../">رزومه</a>
                </li>
<li>
<a href="../archive.html">آرشیو</a>
                </li>
<li>
<a href="../categories/index.html">دسته‌ها</a>
                </li>
<li>
<a href="../rss.xml">خوراک</a>

                    
        </li>
</ul>
<!-- DuckDuckGo custom search --><form class="navbar-form navbar-left" role="search" method="get" id="search" action="//duckduckgo.com/">
<div class="input-group">
<input type="hidden" name="sites" value="//5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" class="form-control" placeholder="جستجو..."><span class="input-group-btn">
<input class="btn btn-default" type="submit" value="برو"></span>
</div>
</form>
<!-- End of custom search -->


      </div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container-fluid -->
  </nav><div class="jumbotron">
    <section class="container"><div id="headerbox" class="col-md-6 col-md-offset-3 text-center">
        <h1>شاهین</h1>
        <hr class="hdrline">
<a class="social" href="https://github.com/shahinism">
          <img src="../assets/images/github.png"></a>
        <a class="social" href="https://twitter.com/shahinism">
          <img src="../assets/images/twitter.png"></a>
        <a class="social" href="https://ir.linkedin.com/in/shahinism">
          <img src="../assets/images/linkedin.png"></a>
      </div>
    </section>
</div>

  <div class="container" id="content" role="main">
    <!--Body content-->
    <div class="col-md-6 col-md-offset-3">
      <div class="row">
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><div class="text-center">
          <h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">چ‌چ‌چ (۹): چطور به صورت فله‌ای لینک‌های یوتیوب را از وب‌سایتی استخراج و دانلود کنیم‌!</a></h1>

        شاهین آزاد
      <a href="#" rel="bookmark"><time class="published dt-published" datetime="2011-12-17T20:01:46+03:30" itemprop="datePublished" title="2011-12-17 20:01">2011-12-17 20:01</time></a>
    </div>
    
  </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>کار عادی‌اش به این صورت است که بنشینیم و با حوصله تک تک لینک‌ها را کپی پیست کرده و جایی ذخیره کنیم‌. ولی با وجود دویست صفحه و لینک‌، کمی (‌خیلی‌) خسته کننده (‌خریت‌ به معنای واقعی کلمه‌، البته ببخشید ;-)) است. خوب جواب مساله را خودم هم نمی‌دانستم‌، ولی مطمئن بودم‌، با ابزار‌های گنو‌/‌لینوکسی‌، نتیجه‌ی خیلی خوبی خواهم گرفت‌. اولین کاری که به فکرم رسید‌، دانلود صفحه‌ی اصلی و صفحه‌های پیوند شده به هر لینک بود که با wget خیلی خوب بلد بودم! به این صورت‌:</p>
<pre class="code literal-block">wget -rl1 http://thenewboston.org/list.php?cat<span class="o">=</span>11
</pre>


<p>خوب نتیجه‌ مجموعه‌ای از فایل‌ها بود که با اسم‌هایی شبیه به آدرس‌شان در پوشه‌ی جاری ذخیره شده بود. با استفاده از آرگومان‌های rl1 به wget فهماندم که صفحه‌ی حاضر را به عمق یک صفحه رو به جلو دانلود کند‌. حالا مساله‌ی سخت این‌جا بود که چطور به grep بفهمانیم که چه چیزی را (‌در این‌جا لینک ویدیو در یوتیوب‌) برایمان جدا کند‌. دستوری که با دفعات زیادی آزمون و خطا نتیجه داد‌، به این صورت بود‌: <span style="color: #ff6600;">(‌برای دیدن دستور کامل‌تر به آخر مطلب رجوع کنید‌، ویرایش۱)</span></p>
<pre class="code literal-block">grep -ohE <span class="s2">"http://www.youtube.com/watch\?v=[[:alnum:]-]{11}"</span> * <span class="p">&amp;</span>gt<span class="p">;</span> list
</pre>


<p>کار این دستور این است که یک لیست از الگوی داده شده را ایجاد و در فایل list ذخیره کند‌. آرگومان‌های ohE به طور خلاصه به grep می‌فهمانند‌ که فقط عبارت داخل پرانتز را در فایل‌ها پیدا کند و در خروجی نمایش دهد‌. قسمت جالب قضیه که بیشتر از همه وقتم را گرفت بخش زیر بود‌:</p>
<pre class="code literal-block"><span class="o">[[</span>:alnum:<span class="o">]</span>-<span class="o">]{</span>11<span class="o">}</span>
</pre>


<p>که به grep می‌گفت ترکیبی از حروف و ارقام را به تعداد یازده عدد قبول کند‌. در مورد این عبارت‌ها در آینده‌ای نزدیک پستی در شاهینیسم خواهیم داشت.</p>
<p>برای دانلود لینک‌ها هم می‌توانید همان فایل خروجی را به صورت زیر به youtube-dl بدهید‌:</p>
<pre class="code literal-block">youtube-dl -ta list
</pre>


<p>البته سرعت دانلود youtube-dl واقعا پایین است‌. روی سروری با دانلود عادی ده مگ‌، سرعت به زور می‌توانست به چهل کیلوبایت برسد‌. پیشنهاد من به شما‌، نصب یک نسخه از RapidLeech است‌. سرعت و کاربرد بسیار بهتری دارد ;-)</p>
<p>ویرایش ۱: بعد از مدتی استفاده از این دستور‌، فهمیدم که از اونجایی که توی آدرس‌های Youtube امکان وجود آندرلاین هم هست‌، تعدادی از لینک‌ها رو با دستور بالا از دست می‌دیم‌. به همین دلیل دنبال یه راه دیگه گشتم‌، و سر‌انجام به دستور زیر رسیدم که نتیجه‌ی خیلی قابل قبول‌تری می‌ده‌:</p>
<pre class="code literal-block">grep -ohE <span class="s2">"http://www.youtube.com/watch\?v=[[:alnum:](-|_)]{11}"</span> * <span class="p">|</span> uniq <span class="p">&amp;</span>gt<span class="p">;</span> list2
</pre>


<p>همچنین توی این دستور با استفاده از uniq از تکرار لینک‌ها در صفحه خروجی جلوگیری می‌شه ;-)</p>
</div>
    </div>
    <aside class="postpromonav"><nav><div class="bg-info">
        
      </div>
              <ul class="pager hidden-print">
<li class="previous">
                <a href="blog13900911chchch-8-rngy-khrdn-khrwjy-frmn-ls-dr-bash.html" rel="prev" title="چ‌چ‌چ‌ (۸)‌: رنگی کردن خروجی فرمان ls در BASH">ارسال پیشین</a>
            </li>
            <li class="next">
                <a href="blog13901010hl-mshkhl-usb-stickhyy-khh-bh-swrt-unsafe-z-systm-jd.html" rel="next" title="حل مشکل USB Stick‌هایی که به صورت Unsafe از سیستم جدا شده‌اند">ارسال بعدی</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>دیدگاه‌‌‌ها</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="shahinism",
            disqus_url="//5hah.in/posts/blog13900926chchch-9-chtwr-bh-swrt-flhy-lynkhh.html",
        disqus_title="\u0686\u200c\u0686\u200c\u0686 (\u06f9): \u0686\u0637\u0648\u0631 \u0628\u0647 \u0635\u0648\u0631\u062a \u0641\u0644\u0647\u200c\u0627\u06cc \u0644\u06cc\u0646\u06a9\u200c\u0647\u0627\u06cc \u06cc\u0648\u062a\u06cc\u0648\u0628 \u0631\u0627 \u0627\u0632 \u0648\u0628\u200c\u0633\u0627\u06cc\u062a\u06cc \u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0648 \u062f\u0627\u0646\u0644\u0648\u062f \u06a9\u0646\u06cc\u0645\u200c!",
        disqus_identifier="cache/posts/blog13900926chchch-9-chtwr-bh-swrt-flhy-lynkhh.html",
        disqus_config = function () {
            this.language = "fa";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
    </div>
    <!--End of body content-->
  </div>

  <footer id="footer" class="site-footer">
    Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
    
  </footer><script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
  </script><!-- end fancy dates -->
</body>
</html>
