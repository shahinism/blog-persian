<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="//5hah.in/index.html">
<meta name="description" content="Sometimes you gotta run before you can walk ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>شاهین</title>
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/bootstrap-rtl.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="assets/css/style.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="//5hah.in/index.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<link rel="next" href="index-81.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/multithreading-bug-experiment-on-PyMongo-driver.html" type="text/html">
</head>
<body>
  <a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

  <div class="navigator">
    
  </div>

  <nav class="navbar navbar-default"><div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="."><img src="assets/images/logo.png"></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
<li>
<a href="stories/about-me.html">درباره</a>
                </li>
<li>
<a href=".">رزومه</a>
                </li>
<li>
<a href="archive.html">آرشیو</a>
                </li>
<li>
<a href="categories/index.html">دسته‌ها</a>
                </li>
<li>
<a href="rss.xml">خوراک</a>

                    
        </li>
</ul>
<!-- DuckDuckGo custom search --><form class="navbar-form navbar-left" role="search" method="get" id="search" action="//duckduckgo.com/">
<div class="input-group">
<input type="hidden" name="sites" value="//5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" class="form-control" placeholder="جستجو..."><span class="input-group-btn">
<input class="btn btn-default" type="submit" value="برو"></span>
</div>
</form>
<!-- End of custom search -->


      </div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container-fluid -->
  </nav><div class="jumbotron">
    <section class="container"><div id="headerbox" class="col-md-6 col-md-offset-3 text-center">
        <h1>شاهین</h1>
        <hr class="hdrline">
<a class="social" href="https://github.com/shahinism">
          <img src="assets/images/github.png"></a>
        <a class="social" href="https://twitter.com/shahinism">
          <img src="assets/images/twitter.png"></a>
        <a class="social" href="https://ir.linkedin.com/in/shahinism">
          <img src="assets/images/linkedin.png"></a>
      </div>
    </section>
</div>

  <div class="container" id="content" role="main">
    <!--Body content-->
    <div class="col-md-6 col-md-offset-3">
      <div class="row">
        
<div class="postindex">
    <article class="h-entry post-text"><div class="text-center">

        <h1 class="p-name entry-title"><a href="posts/multithreading-bug-experiment-on-PyMongo-driver.html" class="u-url">وقایع نگاری یک دیباگ: وضعیت عجیب MongoDB</a></h1>
            شاهین
      <a href="posts/multithreading-bug-experiment-on-PyMongo-driver.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-09T09:58:21+03:30" title="2015-11-09 09:58">2015-11-09 09:58</time></a>
    </div>
    <div class="p-summary entry-summary">
    <div>
<p>استفاده از Mongo و Python برای ایجاد یک RESTFUL API دیگر آن‌چنان هم سناریوی دور از انتظاری نیست، خصوصا این که اگر کمی جستجو کنید می‌بینید که افراد زیادی اشاره به پایداری و Performance همچین استکی می‌کنند و راه‌کار‌های بسیار زیادی نیز برای بهتر کردن آن ارائه کرده‌اند. در یکی از پروژه‌های تیم <a class="reference external" href="http://www.foundersbuddy.com/">فاندرز</a> ما هم با استکی به شرح زیر، RESTFUL API مربوط به اپلیکیشمان را طراحی‌کرده‌ایم:</p>
<ul class="simple">
<li><a class="reference external" href="http://mongodb.org">Mongo</a></li>
<li>Python 3</li>
<li><a class="reference external" href="http://api.mongodb.org/python/">PyMongo</a></li>
<li><a class="reference external" href="http://djangoproject.com">Django</a></li>
<li><a class="reference external" href="http://memcached.org">Memcached</a></li>
<li><a class="reference external" href="https://uwsgi.readthedocs.org/">uWsgi</a></li>
<li><a class="reference external" href="http://nginx.com">Nginx</a></li>
</ul>
<p>در چهار ماه اول لانچ API، هیچ مشکلی در داده‌های دریافتی و پردازش‌های مورد نیاز مشاهده نمی‌شد. Performance کلی استک هم در حد قابل قبولی جواب‌گوی نیاز‌ها بود. تا این که با تغییری در نحوهٔ ارائهٔ خدمات پروژهٔ اصلی‌، حجم کاربران سرویس به نحو چشم‌گیری بالا رفت و ماجرا آغاز شد!</p>
<p>مشکل ایجاد شده‌، نه در Performance سیستم بود و نه حتی می‌توان گفت که پایداری API زیر سوال رفته بود. قضیه از این قرار بود که درخواست‌هایی که منجر به خواندن داده از پایگاه دادهٔ سرویس بود‌ (Mongo) در زمان‌های خاصی از روز‌ (که عمدتا تایم شلوغی برای پروژه بود) تنها تکه‌ای از داده‌های مورد انتظار را بر می‌گرداندند. برای مثال اگر ما انتظار داشتیم که کوئری X روی دیتابیس‌، شامل ۲۰ سند (Document منظور آبجکت‌های دیتابیس Mongo است) باشد‌، بعضی از درخواست‌ها نتیجه‌ای در بازه‌ای کوچکتر از ۲۰ را بر می‌گرداند.</p>
<p>قضیه جایی بحرانی می‌شد که این نتیجه را برای یک بازهٔ زمانی مشخص Cache می‌کردیم، و خوب در صورت خراب شدن یکی از این کوئری‌ها‌، کاربران در آن مدت‌، نتیجهٔ ناقص را مشاهده می‌کردند. جدای از این، هیچ ضعف مشخصی از سیستم برای تراکنش‌ها مشاهده نمی‌شد.</p>
<p class="more"><a href="posts/multithreading-bug-experiment-on-PyMongo-driver.html">بیشتر بخوانید…</a></p>
</div>
    </div>

    <div class="text-center">
                    <a class="btn btn-success" href="posts/multithreading-bug-experiment-on-PyMongo-driver.html#disqus_thread" data-disqus-identifier="cache/posts/multithreading-bug-experiment-on-pymongo-driver.html">Comments</a>


    </div>

    </article><article class="h-entry post-text"><div class="text-center">

        <h1 class="p-name entry-title"><a href="posts/douglas-crockford-javascript-the-good-parts.html" class="u-url">خوبی‌های جاوا اسکریپت؟</a></h1>
            شاهین
      <a href="posts/douglas-crockford-javascript-the-good-parts.html" rel="bookmark"><time class="published dt-published" datetime="2015-07-08T15:55:01+04:30" title="2015-07-08 15:55">2015-07-08 15:55</time></a>
    </div>
    <div class="p-summary entry-summary">
    <div>
<p>خیلی وقت است ننوشته‌ام و حقیقتش همین الان هم زیاد مثل گذشته حس نوشتن ندارم. موضوع
این است که از طرفی چند نفر از شما دوستان در ایمیل‌هایی از من خواستید که باز
بنویسم (راستش اصلا فکر نمی‌کردم کسی آن بیرون به فکر چرایی آپدیت نشدن این وبلاگ
باشد.) که ازشان متشکرم. و از طرف دیگر‌، به دلیل شغل جدیدم‌، و هدف‌مند‌تر شدن
فعالیت‌هایم‌، عمدتا تجربه‌های جدید فوق‌العاده‌ای را مزه‌مزه می‌کنم که دوست ندارم زود
فراموش شوند و فکر می‌کنم بازگویی‌شان در این وبلاگ بتواند کمک کند. این است که:</p>
<p>نمی‌دانم چقدر با JavaScript آشنایی دارید‌، ولی بعید می‌دانم که پی‌اش رفته باشید و
اسم داگلاس کراکفورد (<a class="reference external" href="http://www.crockford.com/">Douglas Crockford</a>) به گوشتان نخورده باشد.</p>
<p>عمدهٔ معروفیت ایشان هم پی کتابی به اسم Javascript the Good Parts شکل گرفته که شاید
برای خیلی‌ها یک جک به نظر برسد. چطور؟</p>
<p>خوب بگذارید این‌طور شروع کنم‌: آشنایی من با جاوااسکریپت به کتاب <a class="reference external" href="http://eloquentjavascript.net/">Eloquent
Javascript</a> بر می‌گردد. و شاید یک آشنایی جزئی با <a class="reference external" href="https://nodejs.org/">Nodejs</a> را بتوان چاشنی
تجربه‌ام با این زبان دانست. حقیقت امر این است که از این زبان عمرا لذت نمی‌بردم. چه
می‌دانم شاید اکثریتش بابت معلوم نبودن ریشهٔ درست و حسابی‌اش مثل زبان‌های دیگر
باشد. شاید همین دلیل اولش باعث شده باشد که بتوان داخل اینترنت هزار و یک گزینهٔ
چرند را به عنوان Best practices این زبان پیدا کرد که متاسفانه در خیلی از کد‌های
منتشر شده به این زبان مورد استفاده قرار گرفته‌اند. شاید ساده‌ترین نمونهٔ این‌ها را
بتوان استفاده نکردن از سمی کولون «;» برای پایان دادن به statement‌ها دانست.</p>
<p>دلیلشان ساده است‌، می‌گویند خود مفسر جاوا‌اسکریپت سمی‌کولون‌ها را در جای مناسبشان
می‌گذارد یا حتی بدتر می‌گویند بودن یا نبودن سمی‌کولون در پایان جملات‌، اختیاری
است. این است که ممکن است فاجعه‌ای مانند کد زیر رخ دهد:</p>
<pre class="code javascript"><a name="rest_code_1db46b86109c4bc4a56be1fbdd27718c-1"></a><span class="k">return</span>
<a name="rest_code_1db46b86109c4bc4a56be1fbdd27718c-2"></a><span class="p">{</span>
<a name="rest_code_1db46b86109c4bc4a56be1fbdd27718c-3"></a>    <span class="nx">done</span><span class="o">:</span> <span class="kc">true</span>
<a name="rest_code_1db46b86109c4bc4a56be1fbdd27718c-4"></a><span class="p">}</span>
</pre>
<p>همه چیزش درست به نظر می‌رسد این‌طور نیست؟ اگر این‌طور فکر می‌کنید، یا نقص قضیه را
می‌دانید و به همین دلیل از جاوا اسکریپت بی‌زارید‌، پیشنهاد می‌کنم <a class="reference external" href="http://www.youtube.com/watch?v=hQVTIJBZook">این ارائهٔ</a> آقای
کراکفورد را از دست ندهید.</p>
<p>نکتهٔ کلی در مورد این زبان این است که نقص‌های طراحی فراوان و به صورت بحرانی
مشکل‌زایی را می‌توان در آن یافت. همین‌طور نبود منابع یک‌پارچه با وجود پیاده‌سازی‌های
متنوع (که به قول خود کراکفورد‌، تنها مشکلات طراحی را کپی کردن) باعث کج‌فهمی
برنامه‌نویسانی که فکر می‌کنند می‌توانند این زبان را به راحتی یاد بگیرند شده است.
تمام این‌ها در کنار گستردگی پلتفرمی که تقریبا هیچ زبان دیگری حتی به نزدیکی‌اش هم
نرسیده است (مرورگرها)، و چه می‌دانم شاید امکاناتی که Prototype‌ها به برنامه‌نویس
می‌دهند‌، آن‌چنان نقش تیغ دو لبه را برای برنامه‌نویسان زیبا ایفا می‌کند که نه می‌توان
به کلی از خیرش گذشت (و به قول کراکفورد یادش نگرفت تا موقعی که بهش نیاز داریم) نه
این که بتوان به عنوان یک غول همه چیز تمام برای هر مساله‌ای (سیستم‌عامل NodeJsای رو
که یادتون می‌آد؟) به آن نگاه کرد (دارم به پایتون فکر می‌کنم، ولی اون هم نمی‌تونه
جاهایی که جاوااسکریپت خوب عمل می‌کنه‌، خودی نشون بده).</p>
<a class="reference external image-reference" href="https://xkcd.com/1508/"><img alt="XKCD operation systems" src="https://imgs.xkcd.com/comics/operating_systems.png"></a>
<p>در پایان این ارائه کسی از کراکفورد نظرش را در مورد HTML5 می‌پرسد و حقیقتش یک
جورهایی حرف دلم را می‌زند. تا قبل از HTML5 و یا CSS3 تکلیفمان روشن بود. ساختار را
با HTML و آن DOM چلاغش نشان می‌دادیم. رنگ و لعاب را با CSS می‌گفتیم و هر جینگولک
دیگر را با جاوااسکریپت. حالا HTML5 و CSS3 عمدتا قابلیت‌هایی را به خودشان اضافه
کرده‌اند که قبول دارم داشتنشان با جاوااسکریپت شاید کمی دردسر بیشتری داشت‌، ولی
مربوط به همان حوزه می‌شد و بس. به قول کراکفورد که می‌گوید:</p>
<pre class="code text"><a name="rest_code_bcc3add408dd4880a3bb3e555b8bbac5-1"></a>It's easy to make things bigger, it's harder to make things better.
</pre>
<p>قبل از پایان مطلب هم دوباره اشاره کنم که همانطور که در متن گفتم‌، من را فعلا
نمی‌توان یک برنامه‌نویس جاوااسکریپت دانست و احتمالا از خیلی از کارهای خارق‌العاده‌ای
که Nodejs می‌تواند بکند بی‌خبرم. هدفم از نوشتن این مطلب برایم حکم ثبت استارت یک
تجربه جدید را دارد. احتمالا در آینده بیشتر در مورد کلنجارهایم با جاوااسکریپت
خواهم نوشت. هر چند بعید می‌دانم به این زودی‌ها دوستش داشته باشم :)</p>
</div>
    </div>

    <div class="text-center">
                    <a class="btn btn-success" href="posts/douglas-crockford-javascript-the-good-parts.html#disqus_thread" data-disqus-identifier="cache/posts/douglas-crockford-javascript-the-good-parts.html">Comments</a>


    </div>

    </article><article class="h-entry post-text"><div class="text-center">

        <h1 class="p-name entry-title"><a href="posts/mary-live-codes-a-javascript-game-from-scratch.html" class="u-url">کدنویسی بازی جاوااسکریپت به صورت زنده توسط Mary Rose</a></h1>
            شاهین
      <a href="posts/mary-live-codes-a-javascript-game-from-scratch.html" rel="bookmark"><time class="published dt-published" datetime="2014-10-08T15:56:04+03:30" title="2014-10-08 15:56">2014-10-08 15:56</time></a>
    </div>
    <div class="p-summary entry-summary">
    <div>
<p>نمی‌دونم چقدر با جاوااسکریپت آشنایی دارین، ولی جدا زبان فوق‌العاده‌ایه. خصوصا این که پلتفرم جذابی داره‌، اصلا نیاز نیست چیزی کامپایل شه یا برنامه خاصی نصب شه‌، یه مرورگر و تموم، دیگه شمایید و خلاقیتتون. گاها آدم یه چیزایی می‌بینه که بدجوری سر شوق می‌آد (هوم‌! البته این شوق هزار جور می‌شه تفسیر شه‌، حتی از نوع … بی‌خیال!). این ویدئو یکی از اون ویدوئوهای Motivational واقعیه. Mary Rose توی یه کنفرانس و در حدود ۳۰ دقیقه‌، یه بازی جذاب جاوااسکریپتی رو بدون هیچ <span class="strike">فرم‌ویری‌ای</span> فریم‌ورکی برنامه‌نویسی می‌کنه.</p>
<iframe src="//player.vimeo.com/video/105955605" width="281" height="500" frameborder="0" webkitallowfullscreen="webkitAllowFullScreen" mozallowfullscreen="mozallowfullscreen" allowfullscreen="allowFullScreen">
</iframe>
</div>
    </div>

    <div class="text-center">
                    <a class="btn btn-success" href="posts/mary-live-codes-a-javascript-game-from-scratch.html#disqus_thread" data-disqus-identifier="cache/posts/mary-live-codes-a-javascript-game-from-scratch.html">Comments</a>


    </div>

    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-81.html" rel="next">پست‌های قدیمی‌تر</a>
            </li>
        </ul></nav><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
    </div>
    <!--End of body content-->
  </div>

  <footer id="footer" class="site-footer">
    Contents © 2015         <a href="mailto:me@5hah.in">شاهین</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
    
  </footer><script src="assets/js/jquery.min.js"></script><script src="assets/js/bootstrap.min.js"></script><script src="assets/js/moment-with-locales.min.js"></script><script src="assets/js/fancydates.js"></script><script src="assets/js/jquery.colorbox-min.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
  </script><!-- end fancy dates -->
</body>
</html>
