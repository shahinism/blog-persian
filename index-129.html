<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="http://5hah.in/index-129.html">
<meta name="description" content="Sometimes you gotta run before you can walk ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>شاهین (صفحهٔ ارسال‌های قدیمی 129) | شاهین</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://5hah.in/index-129.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<link rel="prev" href="index-130.html" type="text/html">
<link rel="next" href="index-128.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://5hah.in/">

                <span id="blog-title">شاهین</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href=".">Home</a>
                </li>
<li>
<a href="stories/about-me.html">About</a>
                </li>
<li>
<a href=".">Resume</a>
                </li>
<li>
<a href="archive.html">Archives</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" placeholder="جستجو…" maxlength="255" name="q"><input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910904dryft-tlt-systm-bdwn-stfdh-z-conkywp.html" class="u-url">.. date: 2012/11/24 00:55:9</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910904dryft-tlt-systm-bdwn-stfdh-z-conkywp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910904dryft-tlt-systm-bdwn-stfdh-z-conkywp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910904dryft-tlt-systm-bdwn-stfdh-z-conky.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>همانطور که می‌دانید‌، چند ماهی می‌شود که از i3 استفاده می‌کنیم‌، ولی در
i3bar به جای i3status (به دلیل سادگی بیش از اندازه‌اش D:) از Conky بهره
می‌گیرم. کانکی اطلاعات خیلی خوبی ارائه می‌دهد و کار‌های جالبی هم می‌توان
روی خروجی‌اش انجام داد‌. ولی وقتی قرار است آن را به i3status بخورانم‌،
باید از آپشن shell روی Conky استفاده کنم که دیگر خبری از آن جینگولک
بازی‌های معروف Conky نیست‌. همه چیز خیلی ساده می‌شود. تصویر زیر وضعیت
فعلی i3barام را نشان می‌دهد‌:</p>
<blockquote>
برای دیدن در اندازهٔ بزرگ کلیک کنید</blockquote>
<p>و فعلا چند اشکال به آن وارد است‌: اول این که دارم از یک برنامهٔ خیلی
گنده‌، برای یک کار ساده استفاده می‌کنم‌. دوم این که در حالت شل قدرت
زیادی برای انگولک خروجی Conky ندارم (مثلا آن قسمت درصد استفاده از CPU
برای درصد‌های مختلف تک رقمی‌، دو رقمی و سه رقمی‌، طول‌های متفاوتی
می‌گیرد و کمی قضیه را لوس می‌کند) و سوم این که اگر به ماندن در همین
وضعیت رضایت دهم‌، سوادم هیچ وقت زیاد نمی‌شود‌ D:</p>
<p>پس تصمیم می‌گیرم که خروجی فعلی کانکی را (البته با چند تغییر کوچک) با
ابزار ساده‌تری جایگزین کنم‌. خوب کار تقریبا پیچیده و سختی به نظر می‌رسد
(وقتی که از لینوکس هیچ چیز ندانم) اما خوب همین Conky هم اطلاعاتش را از
روی هوا نمی‌گیرد که! از طرفی مسالهٔ زبان پایش به میان می‌آید‌. به چه
زبانی بنویسم؟ من که ته تهش پایتون را (آن هم دست و پا شکسته) می‌دانم‌.</p>
<p>بعد از کمی جستجو و دو دو تا چهار تا با دانسته‌های قبلی‌ام‌، مساله را
این‌طور حل می‌کنم (از راست به چپ تصویر):</p>
<ul><li>
<p>زمان: روی توزیعم با دستور date می‌توانم زمان حاضر را به طور کامل ببینم و
البته می‌توانم آن را به صورت دلخواهم فرمت کنم‌.</p>
</li></ul>
<pre class="literal-block">
&lt;li&gt;صدا: حقیقتش کشف کردم نیازی به این ندارم و زیاد دنبال واکشی مقدارش نگشتم‌. ولی مطمئنم یک راه ساده برای فهمیدنش هست ;-)&lt;/li&gt;
&lt;li&gt;مجموع آپلود/دانلود نشست حاضر (TU/TD): خوب بعد از کمی جستجو‌، با دوست قدیمی ولی ناشناخته‌ام proc آشنا شدم‌، که از قرار خیلی خیلی‌، بیشتر از چیز‌هایی که می‌خواهم را بهم می‌رساند‌. فعلا ‎/proc/net/dev جواب تا این‌جای کار است‌.&lt;/li&gt;
&lt;li&gt;سرعت دانلود/آپلود (D/U): راستش را بخواهید‌، این یکی مرا خیلی در کف نگه داشت‌! فکر می‌کردم باید جایی مثلا در proc برای این قضیه باشد‌. ولی نکته‌اش این‌جا بود که من اصلا نفهمیده بودم که چه می‌خواهم‌. که البته با تقلب از روی این &lt;a title="code-project-monitor-proc-python-and-clutter" href="http://www.tuxradar.com/content/code-project-monitor-proc-python-and-clutter" target="_blank"&gt;آموزش&lt;/a&gt; آن هم به صورت اتفاقی قضیه را درک کردم و شبیه سازی (البته نکاتی هم باقی می‌ماند که در ادامه مطرح می‌کنم).&lt;/li&gt;
&lt;li&gt;وضعیت رم: خوب این یکی هم مثل date. می‌دانستم که دستوری به اسم free برای این‌کار ساخته شده‌. ولی باید کمی خروجی‌اش را انگولک می‌کردم و چیزی که می‌خواستم را بیرون می‌کشیدم.&lt;/li&gt;
&lt;li&gt;وضعیت CPU: این یکی ترکیبی از همهٔ کار‌هاییست که در بالا باید انجام دهم به علاوه کلی چیز جدید که باید یاد بگیرم‌. فایل ‎/proc/stat وضعیت فعلی CPU را در خودش نگه می‌دارد که با اسکریپتی که در &lt;a title="cpu usage monitor script on github" href="https://github.com/moisespsena/linux-cpu-usage/blob/master/cpu-usage-monitor.sh" target="_blank"&gt;این‌جا&lt;/a&gt; دیدم فهمیدم که چطور وضعیت کل CPU را واکشی کنم‌. اما من وضعیت کل را نمی‌خواستم‌، بلکه به دنبال وضعیت تک تک هسته‌ها بودم که خوب باید دست و بالم رو کثیف‌تر می‌کردم ;-)&lt;/li&gt;
</pre>
<p>خوب تمام این کار‌ها را می‌شود با پایتون هم انجام داد (با هر زبان دیگری
هم می‌شود) ولی‌، دم دستی‌ترین چیز ممکن shell scripting است‌. هم احتمالا
کمتر از مفسر پایتون به سیستم فشار می‌آورد و هم این که اصلا چیزی در موردش
نمی‌دانم (نه این که اصلا‌، ولی نه در حد یک اسکریپت نویس ;-)). این می‌شود
که طی دو روز گذشته‌، تمام فکر و ذکرم را می‌گذارم روی نوشتن این اسکریپت‌،
تا هم چیز یاد بگیرم‌، و هم مستقل‌تر شوم ;-)</p>
<p>اسکریپت حاضر است و از این‌جا قابل دریافت. در ادامه ذره‌، ذره به بررسی‌اش
می‌پردازیم‌:</p>
<h5></h5>
<p>تاریخ</p>
<p>خوب اولین چیزی که لازم داشتیم‌، خروجی گرفتن زمان فعلی سیستم بود که گفتیم
با دستور date قادر به انجامش هستیم‌. به صورت زیر:</p>
<pre class="code bash"><a name="rest_code_8acb6fdb0d3549a8b25ec6d444f4bb63-1"></a><span class="nv">date</span><span class="o">=</span><span class="k">$(</span>date +<span class="s2">"%a %Y.%m.%d %H:%M"</span><span class="k">)</span>
</pre>
<p>نکتهٔ این دستور آن‌جاست که من برای مقدار دهی به متغیر date، از خروجی یک
دستور استفاده کرده‌ام (کاری که در ادامه خیلی زیاد انجام می‌دهم‌). برای
این کار کافیست دستور مورد نظر را در ‎$(‎)‎ بنویسیم‌. به همین راحتی!</p>
<h5></h5>
<p>اطلاعات شبکه</p>
<p>اولین چیز‌هایی که می‌خواهیم‌، این است که بفهمیم چقدر دانلود یا آپلود
کرده‌ایم‌. که همانطور که گفتم این اطلاعات را در فایل ‎/proc/net/dev
می‌توان یافت‌. همینطور‌، با محاسبهٔ این که در یک ثانیهٔ گذشته‌، چقدر
دانلود/آپلود کرده‌ایم‌، می‌توان سرعت دانلود بر ثانیه را محاسبه کرد. این
است که برای تمیزی کار‌، اول یک تابع می‌نویسیم که از proc ذکر شده‌، مقدار
بایت‌های ارسالی یا دریافتی را واکشی کند:</p>
<pre class="code bash"><a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-1"></a><span class="k">function</span> getNetBytes
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-2"></a>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-3"></a><span class="o">{</span>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-4"></a>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-5"></a><span class="nv">Brecived</span><span class="o">=</span><span class="k">$(</span>cat <span class="nv">$netInterface</span> <span class="p">|</span> grep <span class="s2">"eth0"</span> <span class="p">|</span> awk <span class="s1">'{print($2)}'</span><span class="k">)</span>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-6"></a>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-7"></a><span class="nv">Btransmited</span><span class="o">=</span><span class="k">$(</span>cat <span class="nv">$netInterface</span> <span class="p">|</span> grep <span class="s2">"eth0"</span> <span class="p">|</span> awk <span class="s1">'{print($10)}'</span><span class="k">)</span>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-8"></a>
<a name="rest_code_8a9422c67a1c46378c552bc3e1b54b20-9"></a><span class="o">}</span>
</pre>
<p>متغیر ‎$netInterface اشاره به همان فایل ‎/proc/net/dev می‌کند که در اول
اسکریپت تعریفش کرده‌ام‌. بعد هم با grep تنها خطی که مربوط به اینترفیسی
که می‌خواهم است را جدا می‌کنم (eth0) و حالا با awk خانهٔ شمارهٔ ۲ را
برای بایت‌های دریافت شده‌، و خانهٔ شمارهٔ ۱۰ این خروجی را برای بایت‌های
فرستاده شده جدا می‌کنم‌. این کار را به روش‌های دیگری هم می‌شد انجام
داد‌، ولی به نظرم با این روش‌، خط‌های کمتری تایپ کردم ;-)</p>
<p>حالا با دستورات زیر‌، چیز‌هایی که می‌خواهم را محاسبه می‌کنم:</p>
<pre class="code bash"><a name="rest_code_6ba53d5f69494645bfd5e4984b695a9e-1"></a><span class="nv">dlSpeed</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="k">$((</span> <span class="nv">$Brecived</span><span class="o">-</span><span class="nv">$oldBRecived</span> <span class="k">))</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $1/1024)}'</span><span class="k">)</span>
<a name="rest_code_6ba53d5f69494645bfd5e4984b695a9e-2"></a>
<a name="rest_code_6ba53d5f69494645bfd5e4984b695a9e-3"></a><span class="nv">upSpeed</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="k">$((</span> <span class="nv">$Btransmited</span><span class="o">-</span><span class="nv">$oldBTransmited</span> <span class="k">))</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $1/1024)}'</span><span class="k">)</span>
<a name="rest_code_6ba53d5f69494645bfd5e4984b695a9e-4"></a>
<a name="rest_code_6ba53d5f69494645bfd5e4984b695a9e-5"></a><span class="nv">traffic</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$Brecived</span><span class="s2"> </span><span class="nv">$Btransmited</span><span class="s2">"</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", ($1+$2)/1024/1024 )}'</span><span class="k">)</span>
</pre>
<p>طی این دستورات‌، از قابلیت متغیر‌گیری به صورت
‎<span class="math">\(num و همینطور‌، پرینت فرمت شده (برای نمایش حداکثر دو رقم اعشار) awk استفاده کرده‌ام. این کار‌ها با dc هم قابل انجام بود‌، ولی خروجی به تمیزی awk نبود‌. همانطور که می‌بینید در این دستورات از متغیر‌های ‎\)</span>oldBRecived
و ‎$oldBTransmited استفاده شده‌ که در واقع وضعیت یک ثانیه قبل
دانلود/آپلود را در خود نگاه می‌دارند‌. تنها کافیست دستورات فوق را هر یک
ثانیه اجرا کنیم تا خروجی درست را بگیریم‌. (حلقهٔ کامل این دستورات در آخر
مطلب توضیح داده می‌شود)</p>
<p>نکته‌ای که می‌ماند دقت این محاسبه است‌. حقیقتش همانطور که گفتم من این
روش را از این‌جا [link] یاد گرفتم. اما دقیقا همان را پیاده سازی نکردم.
مساله سر زمان محاسبه بود. نمی‌دانم چرا نویسنده در آن‌جا از epoch (تاریخ
۱/۱/۱۹۷۰) استفاده کرده بود (خوشحال می‌شوم اگر کسی می‌داند به من هم توضیح
دهد‌.) نویسنده در آن‌جا می‌گوید مساله سر چند کیلوبایت است و از این
حرف‌ها!</p>
<h5></h5>
<p>وضعیت RAM</p>
<p>گفتم که دستور free -m این‌کارها را انجام می‌دهد‌، پس:</p>
<pre class="code bash"><a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-1"></a><span class="k">function</span> getRamInfo
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-2"></a>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-3"></a><span class="o">{</span>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-4"></a>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-5"></a><span class="nv">totalMemory</span><span class="o">=</span><span class="k">$(</span>free -m <span class="p">|</span> grep <span class="s2">"Mem:"</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $2/1024)}'</span> <span class="k">)</span>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-6"></a>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-7"></a><span class="nv">usedMemory</span><span class="o">=</span><span class="k">$(</span>free -m <span class="p">|</span> grep <span class="s2">"buffers/cache"</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $3/1024)}'</span><span class="k">)</span>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-8"></a>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-9"></a><span class="nv">memInPercent</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$totalMemory</span><span class="s2"> </span><span class="nv">$usedMemory</span><span class="s2">"</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.0f", $2/($1/100)) }'</span><span class="k">)</span>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-10"></a>
<a name="rest_code_79c4b3b554f6498f8ac95a907aa1ec50-11"></a><span class="o">}</span>
</pre>
<p>فکر نکنم نکته‌ای باقی مانده باشد که قبلا توضیح نداده باشم‌. پس دیگر
توضیح نمی‌دهم!</p>
<h5></h5>
<p>وضعیت CPU</p>
<p>خوب گفتم که برای یادگیری این کار‌، از این اسکریپت[link] استفاده کردم.
ولی این اسکریپت تنها وضعیت کل CPU را بر می‌گرداند‌. من آن را طوری تغییر
دادم که هر بار‌، آدرس هسته‌ای که می‌خواهم اطلاعاتش را بدانم در ورودی
بگیرد‌، و فقط همان را هسته را محاسبه کند و در خروجی نشان دهد:</p>
<pre class="code bash"><a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-1"></a><span class="k">function</span> getCpuInfo<span class="o">()</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-2"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-3"></a><span class="o">{</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-4"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-5"></a><span class="nv">CORE</span><span class="o">=</span><span class="nv">$1</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-6"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-7"></a><span class="nv">addr</span><span class="o">=</span><span class="s2">"^cpu</span><span class="si">${</span><span class="nv">CORE</span><span class="si">}</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-8"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-9"></a><span class="nb">local </span><span class="nv">CPU</span><span class="o">=(</span><span class="sb">`</span>cat /proc/stat <span class="p">|</span> grep <span class="nv">$addr</span><span class="sb">`</span><span class="o">)</span> <span class="c"># Get the total CPU statistics.</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-10"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-11"></a><span class="nb">unset </span>CPU<span class="o">[</span>0<span class="o">]</span> <span class="c"># Discard the "cpu" prefix.</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-12"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-13"></a><span class="nb">local </span><span class="nv">IDLE</span><span class="o">=</span><span class="si">${</span><span class="nv">CPU</span><span class="p">[4]</span><span class="si">}</span> <span class="c"># Get the idle CPU time.</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-14"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-15"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-16"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-17"></a><span class="c"># Calculate the total CPU time.</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-18"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-19"></a><span class="nb">local </span><span class="nv">TOTAL</span><span class="o">=</span>0
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-20"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-21"></a><span class="k">for</span> VALUE in <span class="s2">"</span><span class="si">${</span><span class="nv">CPU</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-22"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-23"></a><span class="nb">let</span> <span class="s2">"TOTAL=</span><span class="nv">$TOTAL</span><span class="s2">+</span><span class="nv">$VALUE</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-24"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-25"></a><span class="k">done</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-26"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-27"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-28"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-29"></a><span class="c"># Catch current cores last state</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-30"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-31"></a><span class="nv">PREV_IDLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">eval echo</span> <span class="se">\P</span>REV_IDLE<span class="nv">$CORE</span><span class="k">)</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-32"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-33"></a><span class="nv">PREV_TOTAL</span><span class="o">=</span><span class="k">$(</span><span class="nb">eval echo</span> <span class="se">\P</span>REV_TOTAL<span class="nv">$CORE</span><span class="k">)</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-34"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-35"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-36"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-37"></a><span class="c"># Calculate the CPU usage since we last checked.</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-38"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-39"></a><span class="nb">let</span> <span class="s2">"DIFF_IDLE=</span><span class="nv">$IDLE</span><span class="s2">-</span><span class="nv">$PREV_IDLE</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-40"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-41"></a><span class="nb">let</span> <span class="s2">"DIFF_TOTAL=</span><span class="nv">$TOTAL</span><span class="s2">-</span><span class="nv">$PREV_TOTAL</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-42"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-43"></a><span class="nb">let</span> <span class="s2">"DIFF_USAGE=(1000*(</span><span class="nv">$DIFF_TOTAL</span><span class="s2">-</span><span class="nv">$DIFF_IDLE</span><span class="s2">)/</span><span class="nv">$DIFF_TOTAL</span><span class="s2">+5)/10"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-44"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-45"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-46"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-47"></a><span class="nb">eval</span> <span class="se">\P</span>REV_TOTAL<span class="nv">$CORE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TOTAL</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-48"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-49"></a><span class="nb">eval</span> <span class="se">\P</span>REV_IDLE<span class="nv">$CORE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$IDLE</span><span class="s2">"</span>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-50"></a>
<a name="rest_code_120af10ca9ab40f0be0bfbd4989b0282-51"></a><span class="o">}</span>
</pre>
<p>برای این کار از یک متغیر برای تابع استفاده می‌کنم و مقدارش را به متغیر
CORE اختصاص می‌دهم‌. با استفاده از این آدرس یک عبارت با قائده (Regex) به
صورت "‎^cpu${CORE}‎" می‌سازم‌. این عبارت باقائده با خطوطی که در اولشان
عبارت cpuN را دارند مطابقت می‌کند‌. و سپس با استفاده از داده‌هایی که
دارم یک آرایه با استفاده از پردازش فایل ‎/proc/stat می‌سازم و آن را به
متغیر CPU نسبت می‌دهم‌. خوب حالا چون اولین خانهٔ این آرایه اسم CPU را
دارد‌، و به درد محاسبات بعدی نمی‌خورد‌، آن را از آرایه بیرون می‌اندازم
(unset CPU[0]‎) و همین‌طور مقدار خانهٔ IDLE را هم در متغیری به همین نام
ذخیره می‌کنم‌.</p>
<p>با جمع کردن تمامی مقادیر موجود در آرایهٔ CPU می‌توانم کل وضعیت کارکرد
CPU را به دست آورم‌. این می‌شود که به صورت زیر این کار را انجام می‌دهم:</p>
<pre class="code bash"><a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-1"></a><span class="nb">local </span><span class="nv">TOTAL</span><span class="o">=</span>0
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-2"></a>
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-3"></a><span class="k">for</span> VALUE in <span class="s2">"</span><span class="si">${</span><span class="nv">CPU</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-4"></a>
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-5"></a><span class="nb">let</span> <span class="s2">"TOTAL=</span><span class="nv">$TOTAL</span><span class="s2">+</span><span class="nv">$VALUE</span><span class="s2">"</span>
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-6"></a>
<a name="rest_code_b2bb1bad7af1429ea51622e5f314eb05-7"></a><span class="k">done</span>
</pre>
<p>ساده است این‌طور نیست؟ آن let آن‌جا همان کار ‎(())$ را می‌کند‌. حالا وقت
انجام محاسبات است‌. چون هر بار نیاز است که وضعیت قبلی CPU مورد نظر را
داشته باشیم‌، پس لازم است برای هر CPU متغیر‌های مربوطه را بسازیم‌. که
این کار را با دستورات زیر انجام می‌دهیم:</p>
<pre class="code bash"><a name="rest_code_7960767c2f1649b38f627591e05fd407-1"></a><span class="nb">eval</span> <span class="se">\P</span>REV_TOTAL<span class="nv">$CORE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TOTAL</span><span class="s2">"</span>
<a name="rest_code_7960767c2f1649b38f627591e05fd407-2"></a>
<a name="rest_code_7960767c2f1649b38f627591e05fd407-3"></a><span class="nb">eval</span> <span class="se">\P</span>REV_IDLE<span class="nv">$CORE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$IDLE</span><span class="s2">"</span>
</pre>
<p>این دستور eval فوق‌العاده است‌. با استفاده از آدرس CPU فعلی (CORE)
متغیر‌های مورد نظرم را می‌سازد و مقادیر مربوطه را درشان ذخیره می‌کند‌.
اما چون نمی‌خواهم زیادی کثیف کاری شود‌، قبل از انجام محاسبات‌،
متغیر‌هایی که ساخته‌ایم را به یک نام ثابت در می‌آورم تا کارم را آسان
کنم:</p>
<pre class="code bash"><a name="rest_code_d53f312a6f03459ea7d86cedb2a26d17-1"></a><span class="nv">PREV_IDLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">eval echo</span> <span class="se">\P</span>REV_IDLE<span class="nv">$CORE</span><span class="k">)</span>
<a name="rest_code_d53f312a6f03459ea7d86cedb2a26d17-2"></a>
<a name="rest_code_d53f312a6f03459ea7d86cedb2a26d17-3"></a><span class="nv">PREV_TOTAL</span><span class="o">=</span><span class="k">$(</span><span class="nb">eval echo</span> <span class="se">\P</span>REV_TOTAL<span class="nv">$CORE</span><span class="k">)</span>
</pre>
<p>حالا این دو متغیر‌، وضعیت قبلی CPU را در خود نگه می‌دارند‌. پس نوبت این
است که محاسباتم را انجام دهم:</p>
<pre class="code bash"><a name="rest_code_d10ed846ed614286ba8482c988695656-1"></a><span class="nb">let</span> <span class="s2">"DIFF_IDLE=</span><span class="nv">$IDLE</span><span class="s2">-</span><span class="nv">$PREV_IDLE</span><span class="s2">"</span>
<a name="rest_code_d10ed846ed614286ba8482c988695656-2"></a>
<a name="rest_code_d10ed846ed614286ba8482c988695656-3"></a><span class="nb">let</span> <span class="s2">"DIFF_TOTAL=</span><span class="nv">$TOTAL</span><span class="s2">-</span><span class="nv">$PREV_TOTAL</span><span class="s2">"</span>
<a name="rest_code_d10ed846ed614286ba8482c988695656-4"></a>
<a name="rest_code_d10ed846ed614286ba8482c988695656-5"></a><span class="nb">let</span> <span class="s2">"DIFF_USAGE=(1000*(</span><span class="nv">$DIFF_TOTAL</span><span class="s2">-</span><span class="nv">$DIFF_IDLE</span><span class="s2">)/</span><span class="nv">$DIFF_TOTAL</span><span class="s2">+5)/10"</span>
</pre>
<p>چیز خاصی نیست دیگر‌، همه چیز روشن است ;-)</p>
<h5></h5>
<p>پایان کار</p>
<pre class="code bash"><a name="rest_code_b00926da20164d5b9c7c46f9598602f1-1"></a><span class="k">while</span> <span class="nb">true</span><span class="p">;</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-2"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-3"></a><span class="k">do</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-4"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-5"></a>getNetBytes
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-6"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-7"></a>getRamInfo
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-8"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-9"></a><span class="k">for</span> <span class="o">((</span> <span class="nv">COUNT</span><span class="o">=</span>0<span class="p">;</span> COUNT <span class="p">&amp;</span>lt<span class="p">;</span> <span class="nv">$CORES</span><span class="p">;</span> COUNT++ <span class="o">))</span><span class="p">;</span><span class="k">do</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-10"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-11"></a>getCpuInfo <span class="nv">$COUNT</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-12"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-13"></a><span class="nb">eval</span> <span class="se">\c</span>pu<span class="nv">$COUNT</span><span class="o">=</span><span class="nv">$DIFF_USAGE</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-14"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-15"></a><span class="k">done</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-16"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-17"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-18"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-19"></a><span class="nv">dlSpeed</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="k">$((</span> <span class="nv">$Brecived</span><span class="o">-</span><span class="nv">$oldBRecived</span> <span class="k">))</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $1/1024)}'</span><span class="k">)</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-20"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-21"></a><span class="nv">upSpeed</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="k">$((</span> <span class="nv">$Btransmited</span><span class="o">-</span><span class="nv">$oldBTransmited</span> <span class="k">))</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", $1/1024)}'</span><span class="k">)</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-22"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-23"></a><span class="nv">traffic</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$Brecived</span><span class="s2"> </span><span class="nv">$Btransmited</span><span class="s2">"</span> <span class="p">|</span> awk <span class="s1">'{printf( "%.2f", ($1+$2)/1024/1024 )}'</span><span class="k">)</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-24"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-25"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-26"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-27"></a><span class="nb">printf</span> <span class="se">\</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-28"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-29"></a><span class="s2">"CPU: %3s,%3s,%3s,%3s | RAM: %sG/%sG (%s%%) | LAN: ↓: %4sƘ ↑: %4sƘ T↕: %6s | %s\n"</span> <span class="se">\</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-30"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-31"></a><span class="s2">"</span><span class="nv">$cpu0</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$cpu1</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$cpu2</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$cpu3</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$usedMemory</span><span class="s2">"</span> <span class="se">\</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-32"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-33"></a><span class="s2">"</span><span class="nv">$totalMemory</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$memInPercent</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$dlSpeed</span><span class="s2">"</span> <span class="se">\</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-34"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-35"></a><span class="s2">"</span><span class="nv">$upSpeed</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$traffic</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$date</span><span class="s2">"</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-36"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-37"></a><span class="nv">oldBRecived</span><span class="o">=</span><span class="nv">$Brecived</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-38"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-39"></a><span class="nv">oldBTransmited</span><span class="o">=</span><span class="nv">$Btransmited</span>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-40"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-41"></a>sleep 1
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-42"></a>
<a name="rest_code_b00926da20164d5b9c7c46f9598602f1-43"></a><span class="k">done</span>
</pre>
<p>حالا نوبت این است که کار را تمام کنم‌. یک حلقهٔ همیشه درست می‌سازم و فقط
بهش می‌گویم بعد از این که همهٔ کار‌هایت را انجام دادی یک ثانیه استراحت
کن (برای این که سرعت اینترنت را درست محاسبه کند‌، این مقدار ضروری است).
بر همین اساس تابع‌های getNetBytes و getRamInfo را صدا می‌کنم تا
متغیر‌های جدیدشان را تولید کنند‌. اما در مورد تابع getCpuInfo قضیه کمی
فرق دارد‌. قرار است که چهار بار این تابع را با متغیر‌های متفاوت صدا کنیم
و نتیجهٔ حاصله‌اش را در متغیرهای جداگانه ذخیره کنیم‌. این است که آن
حلقهٔ for سر و کله‌اش پیدا می‌شود‌. یک حلقهٔ for به سبک C که خداییش به
نظرم کامل‌ترین حلقه‌های for است D: حالا تابع را درش به صورت getCpuInfo
<span class="math">\(COUNT صدا می‌زنم و متغیر ‎\)</span>DIFF_USAGE که همان طرصد مصرف است را
به یک متغیر به صورت cpuN نسبت می‌دهم‌. این N همان آدرس هسته است.</p>
<p>همان‌طور که می‌بینید در ادامه محاسبهٔ سرعت اینترنت می‌آید که قبلا توضیحش
داده‌ام‌. printf را فعلا ول کنید و به دو خط بعدش نگاهی کنید‌. همان دو
متغیری که وضعیت قبلی ترافیک را نگه می‌دارند‌. فکر کنم دیگر همه چیز روشن
شده باشد‌.</p>
<p>حالا برسیم به آن printf. حتما می‌پرسید چرا از echo استفاده نکردم‌. echo
خوب است‌، ولی خیلی ساده هم هست‌. آن مشکل کنترل فضای پرینت که در Conky
گرفتارش بودم‌، این‌جا هم پیدا می‌شد‌. یک نگاهی به این خروجی بیاندازید:</p>
<pre class="code bash"><a name="rest_code_b3acd5d02c7e473e83946d24edf7a216-1"></a>CPU: 48,3,40,3 <span class="p">|</span> RAM: 1.11G/1.95G <span class="o">(</span>57%<span class="o">)</span> <span class="p">|</span> LAN: ↓:0.00Ƙ ↑:0.00Ƙ T↕:221.20 <span class="p">|</span> Sat 2012.11.24 14:41
<a name="rest_code_b3acd5d02c7e473e83946d24edf7a216-2"></a>
<a name="rest_code_b3acd5d02c7e473e83946d24edf7a216-3"></a>CPU: 8,4,76,4 <span class="p">|</span> RAM: 1.11G/1.95G <span class="o">(</span>57%<span class="o">)</span> <span class="p">|</span> LAN: ↓:0.00Ƙ ↑:0.00Ƙ T↕:221.20 <span class="p">|</span> Sat 2012.11.24 14:41
<a name="rest_code_b3acd5d02c7e473e83946d24edf7a216-4"></a>
<a name="rest_code_b3acd5d02c7e473e83946d24edf7a216-5"></a>CPU: 24,5,64,6 <span class="p">|</span> RAM: 1.11G/1.95G <span class="o">(</span>57%<span class="o">)</span> <span class="p">|</span> LAN: ↓:0.00Ƙ ↑:0.00Ƙ T↕:221.20 <span class="p">|</span> Sat 2012.11.24 14:41
</pre>
<p>می‌بینید‌، هنوز هم طول خروجی کم و زیاد می‌شود که اصلا خوب نیست‌. این است
که باید دنبال دستوری باشم که خروجی را آرایش کند و بیرون بدهد‌. printf
سالاری که از زمان یادگیری C می‌شناسم این کار را برایم می‌کند‌. کافیست
فضای متغیر‌ها را به صورت ‎%Ns که N همان طول مینیموم رشته است را مشخص
کنم‌. خودش باقی کار‌ها را انجام می‌دهد‌. خوب همین دیگر‌. کارمان تمام
شد‌. مرحلهٔ بعدی این است که یک خروجی json دار درست حسابی بسازم که i3
بتواند رنگی رنگی‌اش کند ;-)</p>
<blockquote>
برای دیدن در اندازهٔ بزرگ‌تر کلیک کنید</blockquote>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910902tbdyl-pdf-frsy-bh-mtn-b-stfdh-z-chnd-bwp.html" class="u-url">تبدیل PDF فارسی به متن با استفاده از چند ابزار لینوکسی و کمی</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910902tbdyl-pdf-frsy-bh-mtn-b-stfdh-z-chnd-bwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910902tbdyl-pdf-frsy-bh-mtn-b-stfdh-z-chnd-bwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910902tbdyl-pdf-frsy-bh-mtn-b-stfdh-z-chnd-b.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>همین اول کار بگویم که این روش تنها مخصوص موقعی است که PDF به صورت
دیجیتالی تولید شده باشد و کاراکتر‌ها تصویر نباشند‌‌، که خوب برای
کاراکتر‌های تصویری‌، نیاز به روش‌های اپتیکال است که فعلا در این بحث ما
نمی‌گنجد‌. برای نمونه من از کتاب _* که معرفی دوست خوبم ایمان است
استفاده می‌کنم‌. نمونهٔ اولیه بنا به دلایلی معلوم با کتابی از احمد شاملو
عوض شد! اول از همه PDF را با برنامهٔ PDFخوان پیش‌فرض میزکار KDE یعنی
Okular باز می‌کنیم‌. یک نگاه به قد و بالایش می‌اندازیم و سپس از منوی
فایل‌، گزینهٔ Export as و سپس Plain text را انتخاب می‌کنیم‌. خروجی این
عمل ما یک فایل متنی است که فکر می‌کنیم همه کار را به درستی انجام داده‌.
(البته من که اول اصلا فکرش را هم نمی‌کردم که بتوان خروجی فارسی گرفت) در
نگاه اول کارمان تمام شده است‌. ولی بگذارید آن را با یک ویرایشگر باز
کنیم‌. آن را با ایمکس باز می‌کنم و از آن‌جایی که تنظیم فونت‌هایم را از
روی روشی که فرود عزیز در stackoverflow پیشنهاد کرده‌، انجام داده‌ام
نکته‌ای عجیب به نظر می‌رسد‌!</p>
<p>مشکل این‌جاست که در ایمکس فونت سراسری‌ام متن فارسی را به صورت جدا جدا
نشان می‌دهد‌. ولی طبق روشی که به آن اشاره کردم‌، کاراکتر‌هایی که در رنج
خاصی از کد‌های یونیکد هستند‌، باید با فونت Tahoma (انتخاب من) نمایش داده
شوند. اما وقتی فایل خروجی Okular را باز می‌کنم می‌بینم کاراکتر‌ها کاملا
درست‌، ولی با فونتی غیر از تاهوما دیده می‌شوند‌. خوب تجربه ثابت کرده که
هیچ مشکلی به این راحتی حل نمی‌شود‌. کمی از خروجی را به یک فایل tex تبدیل
می‌کنم و خروجی PDFش را بررسی می‌کنم‌. خروجی تقریبا قابل قبول است ولی در
بعضی از خطوط کاراکتر‌ها به صورت مبهمی به هم ریخته‌اند‌. از آن‌جایی که
خودم برنامهٔ officeای روی سیستم ندارم و وضع اینترنت‌ام هم معلوم است‌، از
دوست libreoffice کار قهارم می‌خواهم که فایل خروجی Okular را یک بار دیگر
و این‌بار با libreoffice تست کند و ببیند آیا قابل ویرایش است یا نه‌؟
ایمان در جواب می‌گوید که کاراکتر‌ها مثل تصویر عمل می‌کنند و قدرت ویرایش
چندانی روی آن‌ها ندارم.(اگر دروغ گفته‌، یقهٔ خودش رو بگیرید ;-))</p>
<p>پس حالا نوبت این است که کمی دست‌هایمان را کثیف‌تر کنیم‌. مساله ساده
است‌. فایلی داریم شامل کاراکتر‌هایی که امیدواریم حداقل یونیکد باشند‌،
ولی می‌خواهیم آن‌ها را به رنج استانداردی که می‌شناسیم تبدیل کنیم (یک
Find &amp; Replace سریع و دوست داشتنی D:)‌. پایتون دوست‌داشتنی چند تابع
خیلی‌، خیلی باحال برای کمک به ما در همچین وضعیت‌هایی دارد‌. اولی‌شان ord
است‌. کارش این است که یک کاراکتر را به عنوان ورودی بگیرد و در خروجی کد
معادلش را چاپ کند‌. دیگری unichr است که تقریبا کاری برعکس کار ord
می‌کند‌. یک کد (که فکر می‌کند یونیکد است) در ورودی می‌گیرد‌، و کاراکتر
یونیکد معادلش را در خروجی بر می‌گرداند‌.</p>
<p>پس برای شروع کار چند تابع کوچک می‌نویسیم که برای دستکاری فایل کمک‌مان
کند‌. تابع اول‌مان‌، چیزی است که در بقیه راه نیازش داریم‌. تابعی که یک
فایل را از ورودی بخواند‌:</p>
<pre class="code bash"><a name="rest_code_bbd9c2dd7c4042a496c6fbfa4d153d78-1"></a>def read_file<span class="o">(</span>file_name<span class="o">)</span>:
<a name="rest_code_bbd9c2dd7c4042a496c6fbfa4d153d78-2"></a>
<a name="rest_code_bbd9c2dd7c4042a496c6fbfa4d153d78-3"></a><span class="nv">the_file</span> <span class="o">=</span> codecs.open<span class="o">(</span>file_name, <span class="nv">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="o">)</span>
<a name="rest_code_bbd9c2dd7c4042a496c6fbfa4d153d78-4"></a>
<a name="rest_code_bbd9c2dd7c4042a496c6fbfa4d153d78-5"></a><span class="k">return</span> the_file
</pre>
<p>همین‌طور برای این که خیال‌مان راحت شود‌، تابعی می‌نویسیم که کل محتوای
فایل ورودی‌اش را به صورت کاراکتر به کاراکتر (هر کاراکتر در یک خط) چاپ
کند:</p>
<pre class="code bash"><a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-1"></a>def show_characters<span class="o">(</span>input_file<span class="o">)</span>:
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-2"></a>
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-3"></a><span class="k">for</span> line in read_file<span class="o">(</span>input_file<span class="o">)</span>.readlines<span class="o">()</span>:
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-4"></a>
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-5"></a><span class="k">for</span> char in line:
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-6"></a>
<a name="rest_code_5c7bc93d421d449fa8cbcee827cf9185-7"></a>print char
</pre>
<p>حالا نوبت بخش هیجان‌انگیز‌تر ماجرا می‌رسد‌. تابعی دیگر می‌نویسیم که
این‌بار به جای کاراکتر‌ها‌، کد‌های معادل‌شان را چاپ کند:</p>
<pre class="code bash"><a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-1"></a>def show_unicode_code<span class="o">(</span>input_file<span class="o">)</span>:
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-2"></a>
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-3"></a><span class="k">for</span> line in read_file<span class="o">(</span>input_file<span class="o">)</span>.readlines<span class="o">()</span>:
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-4"></a>
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-5"></a><span class="k">for</span> char in line:
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-6"></a>
<a name="rest_code_8ca948869bd74656b50dc2d9bd9c1010-7"></a>print ord<span class="o">(</span>char<span class="o">)</span>
</pre>
<p>و سر‌انجام تابعی می‌نویسیم که عکس کار بالا را انجام دهد:</p>
<pre class="code bash"><a name="rest_code_c17977f017344b4380441d4ab4c37c16-1"></a>def replace_unicode_char<span class="o">(</span>input_file<span class="o">)</span>:
<a name="rest_code_c17977f017344b4380441d4ab4c37c16-2"></a>
<a name="rest_code_c17977f017344b4380441d4ab4c37c16-3"></a><span class="k">for</span> line in read_file<span class="o">(</span>input_file<span class="o">)</span>.readlines<span class="o">()</span>:
<a name="rest_code_c17977f017344b4380441d4ab4c37c16-4"></a>
<a name="rest_code_c17977f017344b4380441d4ab4c37c16-5"></a>print unichr<span class="o">(</span>int<span class="o">(</span>line<span class="o">))</span>.encode<span class="o">(</span><span class="s1">'utf-8'</span><span class="o">)</span>
</pre>
<p>مطمئنا می‌شد این توابع را به صورت‌های ساده‌تری هم نوشت‌. ولی خوب اولا
سواد من به همین‌قدر می‌رسید‌، دوما هم به نظرم برنامه خوانا‌تر شده‌. برای
کسانی که پایتون می‌دانند به نظرم کد‌ها به قدر کافی گویا هستند (آن‌هایی
هم که نمی‌دانند کافیست انگلیسی‌شان کفایت کند‌. نا سلامتی هنر پایتون همین
است D:). فقط یک نکته در تابع replace_unicode_char باقی می‌ماند و آن هم
این که کاراکتر‌های ورودی به صورت رشته هستند و قبل از خوراندنشان به
unichar باید تبدیل به عدد (int) شوند‌. همینطور اگر می‌خواهید کاراکتر‌ها
را در خروجی چاپ کنید‌، باید به صورت utf-8 کد کنید که خود دستور به قدر
کافی گویا هست‌.</p>
<p>من کل این توابع به علاوهٔ یک تابع مهم‌تر از آن‌ها را (که پایین‌تر
توضیح‌اش می‌دهم) به صورت یک اسکریپت نوشته‌ام که می‌توانید از این‌جا
دریافتش کنید‌. که خوب به عنوان راهنما اضافه کنم که در صورتی که خواستید
فایل را به صورت کاراکتر به کاراکتر در خروجی ببینید از دستور زیر بهره
بگیرید:</p>
<pre class="code bash"><a name="rest_code_19144810772f4eeeb0fa091a16f8f831-1"></a>python chrvalidator.py -i INPUT_FILE -c
</pre>
<p>اگر خواستید که کد‌های یونیکد کاراکتر‌هایش را ببینید از دستور زیر استفاده
کنید:</p>
<pre class="code bash"><a name="rest_code_f2a5c4c3b79d4a3aa3763a9e66a3ecd6-1"></a>python chrvalidator.py -i INPUT_FILE -u
</pre>
<p>و اگر هم خواستید که بر عکس کار فوق (تبدیل کد‌های یونیکد به کاراکتر‌های
نظیرشان) را انجام دهید‌، به جای ‎-u در دستور فوق از ‎-U استفاده کنید‌.
خوب بگذارید به مسالهٔ اصلی‌مان برگردیم‌. برای شروع کار بیایید با دستورات
زیر‌، لیستی از کد‌های کاراکتر استفاده شده در فایل‌مان به دست آوریم:</p>
<pre class="code bash"><a name="rest_code_46c6a21c5bdd4b41810a3fad0c197f3f-1"></a>python chrvalidator.py -i ashamloo.txt -u <span class="p">&amp;</span>gt<span class="p">;</span> chrcodes.txt
<a name="rest_code_46c6a21c5bdd4b41810a3fad0c197f3f-2"></a>
<a name="rest_code_46c6a21c5bdd4b41810a3fad0c197f3f-3"></a>sort -u chrcodes.txt <span class="p">&amp;</span>gt<span class="p">;</span> uniq.txt
</pre>
<p>خوب همان‌طور که معلوم است اول از همه کد تمام کاراکتر‌ها را استخراج
کردیم‌. و سپس از آن‌جایی که مطمئنیم کاراکتر‌های تکراری زیادی داریم‌، و
صد البته مطمئن‌تریم که یک فایل مرتب شده بیشتر به دردمان می‌خورد با
استفاده از دستور sort -u کاراکتر‌های تکراری را حذف کرده و فایل را مرتب
می‌کنیم‌. حالا همین فایل مرتب شده را دوباره به اسکریپت‌مان می‌خورانیم تا
کاراکتر‌های نظیر‌شان را پیدا کنیم:</p>
<pre class="code bash"><a name="rest_code_de3bc1d2e04445ad80538b25c3548195-1"></a>python chrvalidator.py -i uniq.txt <span class="p">&amp;</span>gt<span class="p">;</span> uniqchr.txt
</pre>
<p>یک بررسی سرسری‌، نشان‌مان می‌دهد که تنها کاراکتر‌های محدودی از مجموع
کاراکتر‌ها نیاز به تعویض دارند‌. دسته‌ای از کل کاراکتر‌ها مربوط به حروف
انگلیسی یا اعدادند‌. دسته‌ای دیگر هم در این بین کاراکتر‌های استانداردند.
و این وسط ما اکثرا نیاز به تغییر کاراکتر‌هایی موسوم به Arabic
Presentation Forms-B داریم‌. خوب همانطور که می‌بینید در بین این
کاراکتر‌ها برای نمونه حرف «ب» در سه حالت مختلف «اول‌، وسط‌، آخر» نمایش
داده می‌شود که هر کدام کاراکتر مربوط به خود و در نتیجه کد مربوط به خود
را دارند‌. برای همین ما تابعی دیگری نیز به صورت زیر به اسکریپت‌مان اضافه
می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-1"></a><span class="k">for</span> line in read_file<span class="o">(</span>input_file<span class="o">)</span>.readlines<span class="o">()</span>:
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-2"></a>
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-3"></a><span class="k">for</span> char in line:
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-4"></a>
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-5"></a><span class="k">if</span> ord<span class="o">(</span>char<span class="o">)</span> in <span class="o">(</span>64343, 64344, 64345<span class="o">)</span>:
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-6"></a>
<a name="rest_code_e3bb7f61da4a4cd38e1b41583d7f1a41-7"></a><span class="nv">char</span> <span class="o">=</span> <span class="s2">"پ"</span>
</pre>
<p>در این تابع همان‌طور که پر واضح است‌، می‌گوییم فایل را کاراکتر به
کاراکتر بخوان‌، کد دسیمال کاراکتر را پیدا کن‌، و اگر این کد دسیمال شبیه
به یکی از سه عدد (کد‌های مربوط به حروف پ اول‌، وسط و آخر) بود آن را با
حرف پ جایگزین کن‌. ساده است‌، این‌طور نیست؟ خوب من این کار را برای
تقریبا چهل کاراکتر استاندارد انجام دادم که نتیجه‌اش در اسکریپت معلوم است
(اگر شما خواستید فایل دیگری را به این روش تبدیل کنید و کاراکتری به این
لیست اضافه کردید‌، خوشحال می‌شوم که اسکریپت تکمیل شده‌تان را با من و
بقیه به اشتراک بگذارید‌)‌. در آخر کار هم با دستور زیر تابع را می‌بندیم:</p>
<pre class="code bash"><a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-1"></a>sys.stdout.softspace<span class="o">=</span>False
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-2"></a>
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-3"></a>try:
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-4"></a>
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-5"></a>print char.encode<span class="o">(</span><span class="s2">"utf-8"</span><span class="o">)</span>,
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-6"></a>
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-7"></a>except UnicodeDecodeError:
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-8"></a>
<a name="rest_code_bb7a9dd4ec87435a81abd954a6fbc846-9"></a>print char,
</pre>
<p>خوب خط اول این مجموعه مربوط به این است که به پایتون بفهمانیم در هنگام
چاپ کاراکتر‌ها بین‌شان فاصله نگذارد‌. اگر این مقدار درست باشد‌،
کاراکتر‌ها به صورت س ل ا م نوشته می‌شوند، که خوب به درد ما نمی‌خورد‌.
همینطور ممکن است به دلیل این که بعضی اوقات در بین کاراکتر‌ها‌، کاراکتر
به صورت utf-8 کد شده‌ای پیدا شود و خروجی را بشکند‌، با یک try, except
جلوی این اتفاق را می‌گیریم‌، که یک کمی ممکن است گیج کنند باشد‌. در این
مورد فقط به من اعتماد داشته باشید که اسکریپت کار می‌کند ;-)</p>
<p>برای پایان کار هم فایل تکست اولیه‌مان را به صورت زیر با اسکریپت حاضرمان
ویرایش می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_ca5fdfcf2c904cedb065467dbec419ed-1"></a>python chrvalidator.py -i ashamloo.txt <span class="p">&amp;</span>gt<span class="p">;</span> validashamloo.txt
</pre>
<p>خوب کار تقریبا تمام شد‌. ولی خوب‌، کامپیوتر است دیگر‌. همیشه که درست عمل
نمی‌کند‌. فایل خروجی نمونهٔ مرا در این‌جا می‌بینید‌. خالی از اشکال هم
نیست‌، ولی خوب طبیعتا مشکلات زیادی را برایم حل می‌کند (دیگر لازم نیست به
آن فونت کذایی Arial زل بزنم). دیگر باقی کار‌ها می‌افتد گردن یک ویراستار
به درد بخور‌. (البته شاید بتوان از نگار هم کمک گرفت‌، که فعلا دارم شدیدا
رویش کار می‌کنم‌. نسخهٔ فعلی‌اش مشکلاتی دارد‌، ولی امیدوارم بتوانم
حل‌شان کنم‌)</p>
<p>پی‌نوشت: Okular از قرار‌، قادر نیست PDF‌هایی که رمزگذاری شده‌اند را باز
کند (خودم امتحان نکردم) در آن صورت یک ابزار پایتونی برای این کار وجود
دارد که در آینده در موردش می‌نویسم‌. تا این‌جای کار‌، خروجی‌های این تابع
زیاد با روش ذکر شده همخوانی ندارد‌، پس باید به فکر دستکاری‌اش باشم‌. اسم
این تابع هم در صورتی که دل‌تان می‌خواهد کشفش کنید pdfminer است.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910825wqty-dzdy-mykhnmnydwp.html" class="u-url">وقتی دزدی می‌کن(م،ن،ید) .. date: 2012/11/15 16:17:14</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910825wqty-dzdy-mykhnmnydwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910825wqty-dzdy-mykhnmnydwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910825wqty-dzdy-mykhnmnyd.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>پیش‌نوشت: تو را سر جدتان‌، اگر آدمش نیستید‌، این متن را بی‌خیال شوید‌‌،
ماشالله تا دل‌تان بخواهد در اینترنت‌مان متن خوشمزه پیدا می‌شود. نه
حوصله‌اش را دارم‌، نه توانش را‌، پس لطفا بی‌خیال بحث‌های فلسفی صدتا یه
غاز شوید ;-) آن وقت‌ها که بچه‌تر بودم‌، می‌دیدم که بزرگ‌تر‌ها هر مشکلی
که خودشان نمی‌توانستند حل کنند می‌انداختند گردن دسته‌ای خاصی از مردم‌.
دایم می‌شنیدم که زمان ما که این‌طور نبود که‌، از وقتی این … اومدن‌،
این‌طوری شد‌. اگر دزدی بود‌، باعث بانی‌اش همین‌ها بودند‌. اگر دروغ بود‌،
از دهن همین آدم‌ها می‌جست بیرون‌. نمی‌دانم‌، خود‌تان دیگر تا ته ماجرا را
می‌دانید‌. وقتی برزرگتر شدم‌، دیدم که همان آدم‌ها هم دایما تقصیر‌ها را
بین گردن‌های مبارک یکدیگر مبادله می‌کنند‌.</p>
<p>حتما شما هم دیده‌اید دیگر‌، آدم‌هایی که تا تقی به توقی می‌خورد دم از
حکومت دو هـــــــزار و پانصد سالهٔ آریایی و فرهنگش می‌زنند و کلی هم به
آن افتخار می‌کنند‌. بعدش هم پشت‌بندش از عبارات نوازش‌گرانه‌ای نسبت به
اعراب و دست ساخت‌هاشان برای رفع مسئولیت استفاده می‌کنند‌.</p>
<p>حرف من نیست که کدام یک از این حرف‌ها بی‌خود است و کدام یکی نه‌. می‌خواهم
بگویم کرم از درخت است آقا جان‌. خودمان هم در کسری از ثانیه‌، اگر پایش
بیافتد‌، آن‌چنان دروغ و دزدی‌ای می‌کنیم‌، که خود خدا هم در چگونگی‌اش
می‌ماند! اگر می‌گویند و می‌شنویم که فساد در قبل از انقلاب به دم در
خانه‌مان رسیده بود (که هنوز هم نتوانسته‌ام درک کنم اگر طبیعت انسان
می‌شود فساد‌، پس چرا این‌ها نمی‌شود) به حول قوهٔ فرهنگ دو هزار و پانصد
ساله‌ای که داریم‌، بیشعوری به عمق وجودمان رسوخ کرده‌.</p>
<p>ماشالله نیست که بیشعور‌های سطح بالایمان کم اینترنت‌مان را با بهانهٔ این
که کشور‌های غربی هم آن را محدود می‌کنند محدود کرده‌اند (کسی هم نیست
بگوید آن‌ها اینترنت را با کیفیتی غیر قابل مقایسه با آنی که شما ارائه
می‌دهید و با قیمتی خیلی‌، خیلی‌، خیلی پایین‌تر از چیزی که شما به مردم
تحمیل می‌کنید ارائه می‌دهند‌، چرا آن‌وقت شما چیز‌های بدش رو بهانه قرار
می‌دهید‌) و اصلا بیشعور‌های سطح بالای دنیوی (یکیش همین دار و دستهٔ گوگل)
باقی جاهای باقی مانده را از دستمان در نیاورده‌اند، این شرکت‌های به قولی
غیر دولتی که از میان همین مردم در آمده‌اند‌، در آن زخم سر باز کرده مثل
چی نمک می‌ریزند و کیف می‌کنند‌!</p>
<p>نمی‌دانم این تبلیغات اخیر پارس آنلاین را در سایتش دیده‌اید یا نه‌.
این‌جاها را ببینید:</p>
<p>این سرویس مناسب چه کسانی است؟</p>
<blockquote>
<p>کاربران پرمصرفی که مصرف گیگ بسیار بالایی دارند. قاعدتاً برای این گروه از
کاربران به لحاظ مالی مقرون به صرفه نخواهد بود تا پکیج های حجمی محدود به
همراه گیگ اضافه را خریداری نمایند.</p>
<p>کاربرانی که نیاز به اطمینان خاطر از بابت اتصال دائمی به اینترنت و عدم
قطعی اینترنت خود دارند و مایلند در تمام شبانه روز آنلاین باشند. برای این
دسته از کاربران نیز بهینه نیست که پکیج های حجمی محدود به همراه گیگ اضافه
خریداری نمایند.</p>
</blockquote>
<p>یا خصوصا این بخش را:</p>
<blockquote>
<p>کاربرانی که پکیج های نامحدود را خریداری می نمایند مطمئن باشند همواره
سرعت اسمی پکیج خود را دریافت می نمایند و هیچ نگرانی از این بابت وجود
ندارد و می توانند بدون محدودیت حجمی از اینترنت پرسرعت استفاده نمایند.</p>
</blockquote>
<p>مای از همه جا بی‌خبر‌، که دیگر داشت دردش خیلی زیاد می‌شد که هر ماه یک
پکیج چهار گیگی بخریم و در صورت کم آمدنش که عموما همان ۱۰ روز اول
می‌آمد‌، پول یک گیگ حجم را ۵۰۰۰ تومانی واریز کنیم (خداییش درد دارد) به
امید این که یک ماه اینترنت با سرعت ۱۲۸ کیلوبایت (دانلود) و بدون استرس
تمام شدن حجم داشته باشیم‌، خر شدیم (هر چه گشتم عبارت با مسماتری پیدا
نکردم) و به مبلغ ۲۸۵۰۰ تومان‌، یعنی ۲۷۰۰۰ تومان هزینهٔ سرویس + ۱۵۰۰
تومان مالیات (یعنی حتی مالیات هم دادم) یک دانه‌اش را خریدم‌. تا دو هفتهٔ
اول خوب بود‌. واقعا خوب بود‌. سرعت گاها تا ۱۳۰ کیلوبایت هم می‌رسید‌. ولی
این وضعیت تا زمانی ادامه داشت که حجم دانلودی‌ام زیر هشت گیگابایت بود‌.</p>
<p>الان که این متن را می‌نویسم یک هفته‌ای می‌شود که سرعت دانلودم به زور از
۱۳، ۱۴ کیلوبایت فراتر می‌رود‌. تازه آن هم در صورتی که بتوانم کانکت شوم‌.
خواستم بگویم که همچین یاد حرف آن بندهٔ خدایی افتادم که گفته بود:</p>
<blockquote>
<p>اگر همین فردا کل کابینهٔ دولت را یکجا بردارند و همتایان سوئیسی‌شان را
بنشانند سر جایشان‌، یک هفتهٔ بعد باز هم وضع همین است.</p>
</blockquote>
<p>هر چه هم سعی کردم نفهمیدم این حرف را از کدام بندهٔ خدا خوانده‌ام‌.</p>
</div>
    </div>
    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-130.html" rel="prev">ارسال‌های جدید‌تر</a>
            </li>
            <li class="next">
                <a href="index-128.html" rel="next">پست‌های قدیمی‌تر</a>
            </li>
        </ul></nav><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="assets/js/all-nocdn.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
