<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" dir="rtl" lang="fa">
<head>
<meta charset="utf-8">
<base href="http://5hah.in/index-123.html">
<meta name="description" content="Sometimes you gotta run before you can walk ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>شاهین (صفحهٔ ارسال‌های قدیمی 123) | شاهین</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://5hah.in/index-123.html">
<link rel="icon" href="favicon.ico" sizes="32x32">
<link rel="prev" href="index-124.html" type="text/html">
<link rel="next" href="index-122.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">متن اصلی را نادیده بگیر</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://5hah.in/">

                <span id="blog-title">شاهین</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href=".">Home</a>
                </li>
<li>
<a href="stories/about-me.html">About</a>
                </li>
<li>
<a href=".">Resume</a>
                </li>
<li>
<a href="archive.html">Archives</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="http://5hah.in/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" placeholder="جستجو…" maxlength="255" name="q"><input id="searchsubmit" type="submit" value="DDG Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910514z-autojump-dr-trmynl-qfl-nshwydwp.html" class="u-url">از Autojump در ترمینال غافل نشوید‌! .. date: 2012/8/4 9:9:9</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910514z-autojump-dr-trmynl-qfl-nshwydwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910514z-autojump-dr-trmynl-qfl-nshwydwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910514z-autojump-dr-trmynl-qfl-nshwyd.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>قبلا در مورد Bashmark نوشته بودم و دقیقا همین قبلا بود که فرود عزیز گفت
که از Autojump استفاده می‌کند‌. اما آن موقع‌ها بخاطر یک باگ کوچک نادیده
گرفته بودمش‌! امروز که دیگر آن باگ یادم نبود بار دیگر تستش کردم و (آخه
دیگه چی بگم؟ این لعنتی خیلی با شعوره‌!) اصلا خودتان این ویدئو را ببینید
تا زورش را درک کنید:</p>
<p class="aligncenter"><iframe src="http://www.youtube.com/embed/tnNyoMGnbKg" frameborder="0" width="420" height="315"></iframe></p>
<p>هــاها‌! کدام ابزار را می‌شناسید که سریع‌تر بین دایرکتوری‌ها جابجایتان
کند؟ خوب دیگر پر حرفی بس است‌. برویم سر اصل ماجرا‌. نصب و حل یک مشکل‌!</p>
<h5></h5>
<p>نصب</p>
<p>برای نصب اگر پایتون روی سیستم‌تان بالا‌تر از ۲.۷ است که خیال‌تان راحت و
تنها کافییست که آن را از کانال گیتش دریافت کنید و پس از ورود به پوشه‌اش
اسکریپت install.sh را اجرا کنید‌. اما اگر مثل من با این ترافیک داغان
اینترنت روی اسلکور استیبل گیر کرده‌اید (این یعنی پایتون ۲.۶) پس باید یک
چند‌تا کار اضافه انجام دهید‌ (یا شاید هم بخواهید به ورژن ۱۹ که توی
اسلک‌بیلد‌ها پیدا می‌شود بسنده کنید):</p>
<pre class="code bash"><a name="rest_code_ed9eabdc33eb4afb9a41bfbcd618a1cd-1"></a>sbopkg -R -i <span class="s2">"pysetuptools pip"</span>
</pre>
<p>امیدوارم sbopkg را نصب کرده و بی‌خودی زندگی را برای خود سخت نگیرید ;-)
حالا هم کافیست که با pip بستهٔ مورد نیاز Autojump را نصب کنید‌:</p>
<pre class="code bash"><a name="rest_code_85be5548533f4148ac95acad1ba33fb6-1"></a>pip install argparse
</pre>
<p>و سپس:</p>
<pre class="code bash"><a name="rest_code_c6e1d655c64d4f699e9970c5168399db-1"></a>git clone git://github.com/joelthelion/autojump.git
<a name="rest_code_c6e1d655c64d4f699e9970c5168399db-2"></a>
<a name="rest_code_c6e1d655c64d4f699e9970c5168399db-3"></a><span class="nb">cd </span>autojump
<a name="rest_code_c6e1d655c64d4f699e9970c5168399db-4"></a>
<a name="rest_code_c6e1d655c64d4f699e9970c5168399db-5"></a>./install.sh --force
</pre>
<p>و حالا خط زیر را به ‎.zshrc اضافه کنید:</p>
<pre class="code bash"><a name="rest_code_0f4b4f54a9d64a8dbf8bde4507562114-1"></a><span class="o">[[</span> -s /etc/profile.d/autojump.zsh <span class="o">]]</span> <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> <span class="nb">source</span> /etc/profile.d/autojump.zsh
</pre>
<p>و سر‌انجام:</p>
<pre class="code bash"><a name="rest_code_a5205e6c5aa94b18a1bab06f8b0fc1c1-1"></a><span class="nb">source</span> ~/.zshrc
</pre>
<h5></h5>
<p>مشکل</p>
<p>و خوب کار باید تمام شده باشد اما دستور زیر را امتحان کنید:</p>
<pre class="code bash"><a name="rest_code_2fe8e70ef9f5453586174bcb6d6cab18-1"></a>vim ~/.zsh<span class="o">[</span>TAB<span class="o">]</span>
</pre>
<p>که احتمالا چیزی شبیه خروجی زیر نصیبتان می‌شود:</p>
<pre class="code bash"><a name="rest_code_3e7fc1d46431471fb469e03454d1e293-1"></a>_arguments:439: _vim_files: <span class="k">function</span> definition file not found
<a name="rest_code_3e7fc1d46431471fb469e03454d1e293-2"></a>
<a name="rest_code_3e7fc1d46431471fb469e03454d1e293-3"></a>_arguments:439: _vim_files: <span class="k">function</span> definition file not found
<a name="rest_code_3e7fc1d46431471fb469e03454d1e293-4"></a>
<a name="rest_code_3e7fc1d46431471fb469e03454d1e293-5"></a>_arguments:439: _vim_files: <span class="k">function</span> definition file not found
</pre>
<p>و این یعنی اتوکامپلیشن فوق‌العادهٔ ZSH جلوی دستور vim از کار می‌افتد‌!
خوب چه کنیم؟ تنها یک راه حل در اینترنت جواب این مساله بود و آن هم از
انجمن آرچر‌های اعظم:</p>
<pre class="code bash"><a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-1"></a><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$fpath</span> <span class="o">(</span>see the <span class="k">function</span> PATH of zsh<span class="o">)</span>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-2"></a>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-3"></a>/usr/share/zsh/site-functions /usr/share/zsh/4.3.11/functions
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-4"></a>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-5"></a><span class="nv">$ </span><span class="nb">cd</span> /usr/share/zsh/4.3.11/functions
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-6"></a>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-7"></a><span class="nv">$ </span>ls _vi*
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-8"></a>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-9"></a>_vim
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-10"></a>
<a name="rest_code_1ae10032e3ee406cb4b863b51a362d2c-11"></a>rm _vim
</pre>
<p>و حالا لذت ببرید ;-)</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dwwp.html" class="u-url">چگونه ایمکس‌مان را تربیت کنیم (قسمت دوم) .. date: 2012/7/23</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dwwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dwwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910502chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-dw.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>در قسمت قبل نکات ساده و پایه‌ای را بیان کردیم و یک کلید ساده را جایگزین
کلید قبلی پرش به پنجرهٔ بعدی کردیم‌. در این قسمت می‌خواهیم کمی هیجان کار
را بالا ببریم‌.</p>
<h5></h5>
<p>این آرگومان‌های دوست داشتنی</p>
<p>یکی از اجزای جدا نشدنی توابع برنامه نویسی‌، آرگومان‌هایی هستند که
می‌توان با استقاده از آن‌ها کارکرد توابع را تحت تاثیر قرار داد‌. توابع
ایمکس هم از این قائده مستثنا نیستند‌. برای مثال می‌توان با C-u 3 C-x C-n
نشانگر را به سه پنجره بعد از پنجرهٔ حاضر منتقل کرد‌. می‌خواهید امتحان
کنید؟ ایمکس‌تان را باز کنید و آن را به چهار پنجره تقسیم کنید و فرمان
بالا را وارد کنید‌. همان‌طور که می‌بینید تابع other-window که در این‌جا
مورد بحث ماست‌، با استفاده از آرگومان دریافتی توسط C-u که همان عدد سه
است‌، می‌تواند به سه پنجره بعد بپرد و ما را از فراخوانی پیاپی‌اش نجات
دهد‌. حالا نکته این‌جاست که این تابع آرگومان منفی‌ای مثل ‎-۱ را هم
می‌پذیرد‌. و احتمالا این دقیقا همان چیزی است که ما برای حرکت در پنجره‌ها
به سمت چپ نیاز داریم‌. یک بار امتحانش کنید: C-u -1 C-x C-n</p>
<p>نکته: اکثر توابع موجود در ایمکس با استفاده از مقادیری مثل ‎-۱ عکس عمل
عادی‌شان را انجام می‌دهند‌. فکر کنید که با این ترکیب چه توابع جالب و
کاربردی‌ای می‌توان ساخت‌. مثلا کلید delete عقب‌گرد که در ایمکس به طور
عادی تعریف نشده D: (در آینده یک نمونه خواهیم ساخت ;-))</p>
<h5></h5>
<p>تعریف اولیه other-window-backward</p>
<p>برای این که از سختی وارد کردن همچون دستوری بکاهیم‌، بهتر است که آن را به
صورت یک تابع تعریف کنیم تا هر جایی که نیاز بود بتوانیم به راحتی از آن
استفاده کنیم:</p>
<pre class="code bash"><a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-1"></a><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-2"></a>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-3"></a><span class="s2">"Select the previous window."</span>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-4"></a>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-5"></a><span class="o">(</span>interactive<span class="o">)</span>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-6"></a>
<a name="rest_code_662ca908cbfc4a4485ae5f3ff489847d-7"></a><span class="o">(</span>other-window -1<span class="o">))</span>
</pre>
<p>خوب این خطوط به چه معناست؟ به ترتیب آن‌ها را بررسی می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_b01a29518a4d477c9f5bca221983d0c1-1"></a><span class="o">(</span>defun other-window-backward <span class="o">(</span> <span class="o">)</span>
</pre>
<p>در این خط مثل اکثر زبان‌های برنامه‌نویسی دیگر‌، شروع به تعریف تابع
می‌کنیم‌. defun عبارتی است مانند def در پایتون که وظیفهٔ تعریف توابع را
بر عهده دارد‌. در ادامه نیز اسم تابع other-window-backward و یک جفت
پرانتز خالی (که محل تعریف آرگومان‌هایمان در آینده است) را قرار می‌دهیم‌.</p>
<p>در خط دوم:</p>
<pre class="code bash"><a name="rest_code_7aa22481cd6e44a288a2dd65a49ff753-1"></a><span class="s2">"Select the previous window"</span>
</pre>
<p>تنها یک توضیح کوتاه برای عملکرد تابع می‌نویسیم‌. این توضیح عملا تاثیری
در روند اجرا تابع ندارد‌. اما وقتی کاربر بخواهد با دستوری مثل
describe-function از نحوهٔ عملکرد تابع مطلع شود‌، این توضیح است که نمایش
داده می‌شود‌.</p>
<p>خط سوم شامل:</p>
<pre class="code bash"><a name="rest_code_6038f02fda5e4e378d30de59bd551c47-1"></a><span class="o">(</span>interactive<span class="o">)</span>
</pre>
<p>این خط در واقع بر نوع عملکرد تابع نسبت به آرگومان‌ها در زمان
فراخوانی‌شان دلالت می‌کند‌. در ادامه با مزایای این دستور بیشتر آشنا
خواهیم شد‌. فعلا الاالحساب آن را همانطور که هست وارد می‌کنیم‌.</p>
<p>و خط آخر:</p>
<pre class="code bash"><a name="rest_code_b5e3495385324db1a5cc1842b2856c8f-1"></a><span class="o">(</span>other-window -1<span class="o">))</span>
</pre>
<p>همان‌طور که معلوم است‌، تابع other-window آشنایمان را با آرگومان ‎-۱ صدا
می‌کند‌. این آرگومان منفی همانطور که توضیح دادیم به تابع می‌فهماند که
باید عقب‌گرد حرکت کند‌.</p>
<p>حالا دیگر تقریبا کارمان تمام است‌. تنها کافی است که آن را به کلید ترکیبی
مد نظرمان (C-x C-p چنان که در قسمت قبل تصمیم گرفتیم) پیوند دهیم:</p>
<pre class="code bash"><a name="rest_code_4d7b29fd4e9f4be79083235eb1c53e43-1"></a><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-p"</span> <span class="err">'</span>other-window-backward<span class="o">)</span>
</pre>
<p>و کار تقریبا تمام است‌.</p>
<h5></h5>
<p>افزودن مزایای آرگومان‌ها</p>
<p>تا این‌جای کار other-window-backward کاری که می‌خواهیم را درست انجام
می‌دهد‌. اما هنوز یک کمبود دارد‌. کدام کمبود؟ همانطور که بالا‌تر توضیح
دادم ما می‌توانستیم با C-u به other-window بگوییم که مثلا به دو پنجره
بعد بپرد و ما را از فراخوانی دوباره و دوباره‌اش نجات دهد‌. اما تابعی که
الان تعریف کردیم‌، این قابلیت را ندارد‌. در نتیجه کاربر بخت برگشته باید
برای پرش به سه پنجره قبل سه بار این کلید‌ها را فشار دهد‌! و این یعنی
عذاب ;-)</p>
<p>برای این که تابع‌مان یک آرگومان بپذیرد‌، آن را به شکل زیر ویرایش
می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_4bb15571f592422b95a98cf755a0f296-1"></a><span class="o">(</span>defun other-window-backward <span class="o">(</span>n<span class="o">)</span>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-2"></a>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-3"></a><span class="s2">"Select Nth previous window."</span>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-4"></a>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-5"></a><span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-6"></a>
<a name="rest_code_4bb15571f592422b95a98cf755a0f296-7"></a><span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">)))</span>
</pre>
<p>همانطور که می‌بینید در خط اول‌، یک آرگومان به لیست آرگومان‌های تابع به
اسم n اضافه کردیم‌. با این کار به تابع فهماندیم اگر کاربر با C-u
آرگومانی را فرستاد (مثلا ۲) آن را در متغیر n قرار بده‌.</p>
<p>همینطور در خط آخر به جای استفاده از ‎-۱ تابع other-window را با آرگومان
منفی n صدا زدیم‌. یعنی هر عددی به n فرستاده شد‌، به ترکیب فوق‌، به صورت
منفی به other-window فرستاده می‌شود‌.</p>
<p>توجه: به فاصلهٔ میان علامت منفی و حرف n توجه کنید‌. در صورتی که بخواهید
آن را به صورت:</p>
<pre class="code bash"><a name="rest_code_5dcc194948d74deab2d9e6b456a699b5-1"></a><span class="o">(</span>-n<span class="o">)</span>
</pre>
<p>بنویسید‌، مفسر لیسپ به مشکل بر می‌خورد‌. احتمالا یادتان هست که برای
تفریق دو عدد چه کار باید می‌کردیم:</p>
<pre class="code bash"><a name="rest_code_38b9f39c88304ce7b0972fdf7817bc6a-1"></a><span class="o">(</span>- <span class="m">2</span> 6<span class="o">)</span>
</pre>
<p>لیسپ در این‌جا دو عدد را از هم کم می‌کند‌، اما اگر به جای دو عدد فقط یک
عدد وجود داشته باشد‌، مثل تابع ما‌، آن را به صورت عدد منفی تلقی می‌کند‌.</p>
<p>اما یک نکتهٔ مهم و اساسی در خط سوم وجود دارد که باید به آن نیز
بپردازیم‌. ما در این خط به صورت زیر عمل کردیم‌:</p>
<pre class="code bash"><a name="rest_code_90b0f891fb6f4a9ea1612f0ce1076e80-1"></a><span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>
</pre>
<p>جریان آن p مشکوک چیست؟ اگر تابع مثل روش اول‌مان‌، هیچ آرگومانی نگیرد‌،
interactive هم بدون آرگومان می‌ماند‌. اما اگر مثل روش اخیرمان بخواهیم در
تابع از آرگومانی استفاده کنیم‌، باید یک آرگومان به صورت رشته کد به
interactive هم اضافه کنیم‌. کد p کوچک به تابع می‌فهماند که اگر یک
آرگومان به تابع فرستاده شد آن را به صورت یک عدد ترجمه کن و به تابع
برگردان‌. اما اگر آرگومانی فرستاده نشد‌، خودت به صورت پیش‌فرض عدد ۱ را
به تابع برگردان‌. و این دقیقا کاری است که ما تا این‌جای کار از تابع‌مان
می‌خواهیم‌.</p>
<h5></h5>
<p>اختیاری کردن آرگومان</p>
<p>همان‌طور که می‌بینید‌، این تابع قابلیت فراخوانی توسط توابع دیگر لیسپ را
نیز دارد‌. اما در این وضعیت (منظورم در حالتی است که تابع توسط توابع دیگر
فراخوانده شود و نه در صورتی که توسط کاربر صدا زده می‌شوند) حتما باید به
همراه فراخوانی تابع یک آرگومان هم به آن اطلاق شود‌. و این کمی کار را
پیچیده می‌کند و ممکن است در آینده خسته کننده به نظر بیاید‌. بهتر است
تابع را طوری تعریف کنیم که وقتی به صورت other-window-backward صدا شد
خودکار روش انجام کار پیش‌فرضش را پیش بگیرد‌. پس آن را به صورت زیر ویرایش
می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_7434417bae9144c09ced6a682484c626-1"></a><span class="o">(</span>defun other-window-backward <span class="o">(</span><span class="p">&amp;</span>amp<span class="p">;</span>optional n<span class="o">)</span>
<a name="rest_code_7434417bae9144c09ced6a682484c626-2"></a>
<a name="rest_code_7434417bae9144c09ced6a682484c626-3"></a><span class="s2">"Select Nth previous window."</span>
<a name="rest_code_7434417bae9144c09ced6a682484c626-4"></a>
<a name="rest_code_7434417bae9144c09ced6a682484c626-5"></a><span class="o">(</span>interactive <span class="s2">"p"</span><span class="o">)</span>
<a name="rest_code_7434417bae9144c09ced6a682484c626-6"></a>
<a name="rest_code_7434417bae9144c09ced6a682484c626-7"></a><span class="o">(</span><span class="k">if</span> n
<a name="rest_code_7434417bae9144c09ced6a682484c626-8"></a>
<a name="rest_code_7434417bae9144c09ced6a682484c626-9"></a><span class="o">(</span>other-window <span class="o">(</span>- n<span class="o">))</span> <span class="p">;</span> <span class="k">if</span> n is non-nil
<a name="rest_code_7434417bae9144c09ced6a682484c626-10"></a>
<a name="rest_code_7434417bae9144c09ced6a682484c626-11"></a><span class="o">(</span>other-window -1<span class="o">)))</span> <span class="p">;</span> <span class="k">if</span> n is nil
</pre>
<p>در خط اول با ‏‎&amp;optional به تابع می‌فهمانیم که آرگومان n باید اختیاری
باشد‌. یعنی اگر فرستاده شد مقدار دهی شود و اگر نه‌، بی‌خیالش باشد‌.
همچنین از یک عبارت کنترلی if هم استفاده کردیم‌. در این عبارت اگر n مقدار
داشته باشد‌، پس if با یک وضعیت non-nil یا همان True در اکثر زبان‌های
برنامه نویسی روبروست‌. و اگر مقدار نداشته باشد‌، برابر است با nil یا
False. با توجه با کامنت‌های موجود در کد احتمالا می‌توانید بفهمید که در
صورت وقوع هر یک از این وضعیت‌ها کدام حالت رخ خواهد داد‌.</p>
<p>فکر می‌کنم تا این‌جای کار برای امروز کافی باشد‌. کارمان هنوز با این تابع
تمام نشده‌. هنوز کمی دیگر راه باقی است که بتوان آن را به عنوان یک تابع
ایمکس لیسپی کامل قبول کرد‌. اما لازم است قبل از توضیح بیشتر و سخت کردن
کار‌، مفاهیم گفته شده تا این‌جای کار کاملا درک شوند‌.</p>
<p>پی‌نوشت: مرا به علت دیر‌کرد این چند وقته در انتشار ادامهٔ مطلب حاضر
ببخشید‌. امروز هم احتمالا نتوانسته‌ام آن‌طور که باید و شاید حق مطلب رو
عدا کنم‌. حقیقتش امروز از آن روز‌هایی بود که در مود نوشتن برای وبلاگ
نبودم ولی باید حتما تا این‌جای کار را بیان می‌کردم تا نوشته‌ها از خودم
عقب نمانند ;-)</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/new/blog13910423chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-wwp.html" class="u-url">چگونه ایمکس‌مان را تربیت کنیم (قسمت اول) .. date: 2012/7/13</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                شاهین آزاد
            </span></p>
            <p class="dateline"><a href="posts/new/blog13910423chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-wwp.html" rel="bookmark"><time class="published dt-published" datetime="2015-11-01T00:00:00+03:30" title="2015-11-01 00:00">2015-11-01 00:00</time></a></p>
                <p class="commentline">            <a href="posts/new/blog13910423chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-wwp.html#disqus_thread" data-disqus-identifier="cache/posts/new/blog13910423chgwnh-ymkhsmn-r-trbyt-khnym-qsmt-w.wp.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<h4></h4>
<p>مقدمه</p>
<p>اصولا اگر خوانندهٔ این وبلاگ باشید می‌دانید که بعضی وقت‌ها هیجان زده
می‌شوم و از روی ذوق نرم‌افزاری را انتخاب می‌کنم و پشت سر هم از جزئیاتش
اینجا می‌نویسم تا دیگر از آن حرارت اولیهٔ آشنایی با آن بیافتم و بگذارمش
کنار‌. ولی خوب خوبی‌اش این می‌شود که همیشه یک آرشیو دم دستی از چیز‌هایی
که یاد می‌گیرم کنار دستم دارم.</p>
<p>احتمالا هم دیگر معلوم است که چند وقتی است دارم عادت می‌کنم که با ایمکس
کار کنم‌. شاید برای باقی ملت این هم جزء همان جو گرفتن‌های اولیه باشد‌.
ولی این بار این‌طور نیست‌. موضوع ناموسی شده‌! بیشتر از تمام
نرم‌افزار‌هایی که در طول عمرم با آن‌ها سر و کار داشته‌ام‌، دوست دارم با
ایمکس کار کنم‌. ولی این یکی تمام دانسته‌هایم را‌، عادت‌هایم را‌، علایقم
را‌، بود و نبودم را به چالش می‌کشد‌! چطور؟ در این‌جا با نرم‌افزاری طرف
هستم که بسیاری چیز دارد که من نمی‌خواهم‌، و بسیاری چیز دیگر ندارد که من
می‌خواهم‌، (که دقیقا عکس همین عبارت هم صادق است). حالا نکته‌اش این‌جاست
که این نرم‌افزار این قابلیت را به من می‌دهد که تبدیلش کنم به همان چیزی
که می‌خواهم‌! چطور؟ elisp‌!</p>
<p>در این مدت دو سه ماهه که با ایمکس سر و کله زده‌ام‌، منابعی یافته‌ام (که
در پست بعدی سعی می‌کنم معرفی‌شان کنم) که کمکم کرده تا اندکی این زبان و
تنظیمات (زیادزیادزیاد) ایمکس را درک کنم‌. همین درک اندک کلی هیجان هم
برایم به همراه آورده‌. این است که می‌خواهم تا تمام شدن دوره کردن این
منابعم‌، هر چیزی که به نظرم جالب و کاربردی می‌آید را تحت یک سری مقاله
منتشر کنم‌. باشد که برای آیندگان مفید واقع شود ;-)</p>
<h4></h4>
<p>پیشنیاز</p>
<p>من این‌طور فرض می‌کنم که خوانندهٔ عادی این متن تا الان حداقل کلید‌های
میانبر ایمکس را حفظ کرده‌، بلد است Frame کدام است‌، یا چطور بین پنجره‌ها
جابجا شود یا پکیجی نصب کند‌! در این‌جا قرار است ما یاد بگیریم که چطور
پکیج‌های خودمان را بسازیم ;-)</p>
<h5></h5>
<p>یک نکته</p>
<p>قرار نیست که در مورد هر دستوری که استفاده می‌کنم کامل توضیح دهم‌. گاهی
می‌شود که تنها به یک توضیح کوتاه و نشان دادن عملکرد دستور بسنده می‌کنم‌.
این‌طوری سعی دارم که بیشتر تمرکز را بگذارم روی هدف اصلی مطلب.</p>
<h4></h4>
<p>ساختار دستورات elisp</p>
<p>اولین نکته در مورد لیسپ (یا در این مورد elisp) این است که تمامی دستوراتش
باید داخل پرانتز نوشته شود‌. یعنی فرمی به صورت زیر:</p>
<pre class="code bash"><a name="rest_code_6776f51c31d4466e86a3e03dc7b3c459-1"></a><span class="o">(</span><span class="nb">command</span><span class="o">)</span>
</pre>
<p>نکتهٔ بعد نوع نوشتن دستورات است‌. در زبان‌هایی مانند C یا Python یا دیگر
زبان‌هایی که تا الان دیده بودم‌ (جز اسمبلی) دستورات تقریبا به صورت
عامیانه نوشته می‌شد‌. مثلا ۲ + ۳ را دقیقا همینطور می‌نوشتیم‌. ولی در
لیسپ باید این ترتیب رعایت شود:‌ ۱- عملگر ۲- آرگومان‌ها‌. یعنی برای دستور
۲ + ۳ داریم:</p>
<pre class="code bash"><a name="rest_code_73a9802958a640daaf9f5b5e8d82401d-1"></a><span class="o">(</span>+ <span class="m">2</span> 3<span class="o">)</span>
</pre>
<p>خوب مزیتش می‌شود این که دیگر برای ۲ + ۳ + ۴ + ۵ + ۶ فقط می‌نویسیم:</p>
<pre class="code bash"><a name="rest_code_131df464df3b4dd7810cec0f6a49fdb8-1"></a><span class="o">(</span>+ <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="o">)</span>
</pre>
<p>و دیگر خبری هم از دردسر اولویت عملگر‌ها نمی‌شود‌. مثلا:</p>
<pre class="code bash"><a name="rest_code_94d6a5ab89ca4f59a3e5b0244bcaef2a-1"></a><span class="o">(</span>+ <span class="m">3</span> <span class="o">(</span>* <span class="m">4</span> 5<span class="o">))</span> که جوابش می‌شود ۲۳
<a name="rest_code_94d6a5ab89ca4f59a3e5b0244bcaef2a-2"></a>
<a name="rest_code_94d6a5ab89ca4f59a3e5b0244bcaef2a-3"></a><span class="o">(</span>* <span class="o">(</span>+ <span class="m">3</span> 4<span class="o">)</span> 5<span class="o">)</span> که جوابش می‌شود ۳۵
</pre>
<p>یا مثلا اگر قرار بود قبلا تابعی را با آرگومان‌هایش به صورت زیر فرا
بخوانیم:</p>
<pre class="code bash"><a name="rest_code_ef9db262a77e44de8311d3e23cce2796-1"></a>foo <span class="o">(</span><span class="m">3</span> + 4, <span class="m">5</span> + 6<span class="o">)</span>
</pre>
<p>الان کارمان به این صورت انجام می‌گیرد:</p>
<pre class="code bash"><a name="rest_code_09ff18870a964f0c86335dbf999be1e3-1"></a><span class="o">(</span>foo <span class="o">(</span>+ <span class="m">3</span> 4<span class="o">)</span> <span class="o">(</span>+ <span class="m">5</span> 6<span class="o">))</span>
</pre>
<p>ساده بود؟‌ خوب نکتهٔ‌ بعدی لیست‌ها هستند‌. که به صورت زیر تعریف می‌شوند:</p>
<pre class="code bash"><a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-1"></a><span class="o">(</span>hello there<span class="o">)</span> که لیست شامل دو نشانه است.
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-2"></a>
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-3"></a><span class="o">(</span><span class="m">1</span> <span class="m">2</span> xyz <span class="s2">") که لیستی شامل دو عدد و یک رشته است‌.</span>
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-4"></a>
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-5"></a><span class="s2">(a (b c)) که لیستی شامل یک نشانه و یک زیر لیست است‌.</span>
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-6"></a>
<a name="rest_code_cf2411c354b948fb891fa15ea21d6f5d-7"></a><span class="s2">() که یک لیست خالی است‌.</span>
</pre>
<p>خوب تنها نکته‌ای که باقی می‌ماند و از باقی نکته‌ها مهم‌تر است کامنت
است‌! در لیسپ کامنت‌ها بعد از «;» نوشته می‌شوند‌. هر وقت این علامت ظاهر
شد تا انتهای خط به عنوان کامنت توسط مفسر لیسپ کامنت طلقی شده و نادیده
گرفته می‌شود‌.</p>
<p>نکات پایه‌ای در مورد نحو لیسپ را تا این‌جای کار دیدیم‌. نکات ضریف‌تر و
کاربردی‌تری هم وجود دارد که در ادامهٔ مقالات و وقتی به آن‌ها نیاز شد
مطالعه‌شان می‌کنیم.</p>
<h4></h4>
<p>کلید‌ها در elisp</p>
<p>برای این که به ایمکس بفمانیم با فشرده شدن فلان کلید فلان کار را انجام
بده‌، باید اول بدانیم که چطور یک کلید را تعریف کنیم‌. کلید‌ها در حالت
عادی بین دو کتیشن "" و به صورت یک رشته تعریف می‌شوند‌. مثلا در مثلا زیر
ما سه کلید xyz را تعریف می‌کنیم:</p>
<pre class="code bash"><a name="rest_code_18b70ae8e2774d81890dc9c06f598ef1-1"></a><span class="s2">"xyz"</span>
</pre>
<p>اما نکته این‌جاست که چطور کلید‌های Ctrl و Alt را به ایمکس حالی کنیم‌!
این کلید‌ها عملا با حرف C بزرگ برای Ctrl و M برای کلید Meta یا همان Alt
شناخته می‌شوند‌. اما اگر ما "M" یا "C" استفاده کنیم، حروف M بزرگ و C
بزرگ را معرفی کرده‌ایم و نه Ctrl و Alt را‌. این‌جاست که از علامت شکنندهٔ
«» استفاده می‌کنیم‌. (اگر قبلا برنامه نویسی کرده باشید احتمالا خوب از
مزایایش با خبرید‌). و داریم:</p>
<pre class="code bash"><a name="rest_code_f1e5cdb246ce4a87a1329220135837f7-1"></a><span class="s2">"\M"</span>
</pre>
<p>خوب دیگر کارمان راحت شد‌. فقط یک نکتهٔ کوچک دیگر باقی می‌ماند‌. این که
چطور فرق بین پایین نگه داشتن کلید Ctrl و زدن x و بعد رها کردن هر دویشان
و زدن مثلا کلید l را تعیین کنیم‌. این عبارت در ایمکس به صورت C-x l نوشته
می‌شود‌. خوب احتمالا حدس زده‌اید‌:</p>
<pre class="code bash"><a name="rest_code_fd567924eeeb4c2fb8f3d6b9acc10e65-1"></a><span class="s2">"\C-x l"</span>
</pre>
<p>نکته: برای نمایش کلید Esc به صورت "" و برای کلید Del از عبارت "-‎?‎"
استفاده می‌کنیم.</p>
<h4></h4>
<p>امتحان تغییرات ایجاد شده روی ایمکس</p>
<p>خوب ما تغییرات و توابع ایجاد شده‌یمان را در فایل ‎.emacs موجود در پوشهٔ
خانگیمان وارد می‌کنیم‌. اما چطور تغییرات را اعمال کنیم؟ ساده‌ترین راه و
اولین چیزی که احتمالا به ذهنتان می‌رسد بستن ایمکس و باز کردن دوباره‌اش
است. روش خوبی است‌‌، ولی آسان‌تر از این هم پیدا می‌شود‌. مثلا زدن دستور
زیر:</p>
<pre class="code bash"><a name="rest_code_a2c3c8d045b5497b8b85a2ad8a32cebc-1"></a>M-x <span class="nb">eval</span>-buffer RET
</pre>
<p>این دستور تقریبا کار راه انداز است‌. ولی موقعی که فایل کانفیگتان زیادی
سنگین شد‌، و مثلا رسید به هزار خط (‌می‌رسد‌، غم مخورید ;-)) ممکن است
زمان زیادی تا لود شدن طول بکشد‌. پس منطقی نیست که همهٔ فایل را لود
کنیم‌. چطور است که فقط تغییرات ایجاد شده را دوباره لود کنیم؟ (همین
انتخاب‌های گسترده است که دارد عاشق دل باخته‌ام می‌کند ;-)) پس راه
بعدی‌مان می‌شود این که برویم در انتهای خطی که تغییر جدیدمان را اعمال
کرده‌ایم بایستیم و کلید‌های زیر را وارد کنیم:</p>
<pre class="code bash"><a name="rest_code_e52af32b433b4b16b60ac0ace43580f8-1"></a>C-x C-e
</pre>
<p>کار این کلید‌ها این است که خط قبل از علامت نشانگر را پردازش کنند و در
کانفیگ حاضر ایمکس مداخله دهند‌.</p>
<p>خوب ما می‌دانیم که این کلید‌ها حتما یک دستوری را پشت پردهٔ ایمکس اجرا
می‌کنند‌. می‌خواهید بدانید که آن دستور چیست؟ اول دستور زیر را وارد کنید:</p>
<pre class="code bash"><a name="rest_code_26c38f651e674e48b18e5ca8de063d71-1"></a>M-x describe-key
</pre>
<p>و سپس کلید‌های ترکیبی‌تان را وارد کنید‌. یک توضیح کامل از دستور مورد
استفاده در پنجره‌ای جدید روبرویتان ظاهر می‌شود‌.</p>
<p>خوب دیگر بحث تئوری کافیست‌. بهتر است برویم سراغ کمی کار عملی‌.</p>
<h4></h4>
<p>حل مشکل پرش بین پنجره‌های ایمکس</p>
<p>مساله خیلی ساده است‌. تا به حال حتما پیش آمده که چند تا پنجرهٔ باز دارید
و می‌خواهید بین‌شان سوئیچ کرده و به پنجرهٔ سمت راست‌تان بروید. خوب برای
این کار از کلید‌های C-x o استفاده می‌کنید‌. حالا اگر بخواهید به سمت چپ
بروید چطور؟ شاید وقتی دو پنجرهٔ باز دارید کار سختی نباشد و با تکرار همین
دستور به سمت چپی هدایت شوید‌. ولی در پنج پنجرهٔ باز چطور؟ چهار بار باید
این کار را انجام دهید‌. یا شاید اصلا نظرتان به نظر من نزدیک باشد که C-x
o یک کمی را دست نباشد‌. (این نظر شخصیست) طی ادامهٔ این شماره از مقاله و
شمارهٔ بعد قصد حل این مساله را داریم‌. یعنی اول این که کلید‌های C-x o که
وظیفه‌شان پرش به پنجرهٔ بعدی است را با یک کلید دلخواه جایگزین کنیم‌. و
سپس یک کلید که بتواند عکس همین عمل را یعنی پرش به پنجرهٔ سمت چپ را انجام
دهد هم بسازیم‌.</p>
<p>خوب تا این‌جای کار می‌دانیم چه کار‌هایی می‌توان انجام داد و می‌دانیم که
چه مساله‌ای پیش رو داریم‌. پس حل تقریبا آسان است‌. پس شروع می‌کنیم‌.
اولین کاری که باید بکنیم این است که بفهمیم با چه دستوری می‌توان یک کلید
میانبر تعریف کرد‌. دستور مورد نظر ما global-set-key نام دارد‌. که به
صورت زیر می‌تواند مورد استفاده قرار گیرد:</p>
<pre class="code bash"><a name="rest_code_91ea591f5e4b49b79772ea227b0c2010-1"></a><span class="o">(</span>global-set-key KEY COMMAND<span class="o">)</span>
</pre>
<p>خوب حالا دو چیز بعدی که نیاز داریم هم سر و کله‌شان پیدا شد‌. اولی KEY که
منظور کلید‌های میانبر مورد نظرمان است‌، و دیگری COMMAND که دستوری است که
می‌خواهیم با زدن کلید‌های KEY اجرا شود‌. خوب چه کلید‌هایی را انتخاب
کنیم؟ این کتابی که من به عنوان راهنما استفاده می‌کنم کلید‌های C-x C-n را
برای پرش به پنجرهٔ سمت راست و C-x C-p را برای پرش به پنجرهٔ سمت چپ
انتخاب کرده‌. انتخاب جالبی به نظر می‌رسد و من هم همان‌ها را انتخاب
می‌کنم‌. اما نکته این‌جاست که اول ببینیم نکند یادمان نباشد و بزنیم یکی
از کلید‌های میانبر حاضرمان را ناکار کنیم‌. پس می‌آییم و با describe-key
ته و توی قضیه را می‌ریزیم روی دایره‌. هاها بعله‌، این کلید‌ها به ترتیب
برای فراخوانی set-goal-column و mark-page استفاده می‌شوند‌. که خوب حتی
روحم هم از وجود چنین چیز‌هایی خبر‌دار نبود‌. پس فکر نمی‌کنم که این تغییر
اشکالی داشته باشد‌. ضمن این که هر وقت که بخواهم می‌توانم دستورام را بعد
از M-x وارد و اجرا کنم D:. پس کلید‌ها هم تعیین شد و تا اینجای کار دستور
مربوط به پرشمان به پنجرهٔ سمت راست چیزی شبیه به این شده:</p>
<pre class="code bash"><a name="rest_code_a6b25e9e574444ad8030f6696659496d-1"></a><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-n"</span> COMMAND<span class="o">)</span>
</pre>
<p>و حالا بخش آخر داستان‌. حتما دیگر یاد گرفته‌اید که چطور دستور مربوط به
C-x o را که می‌خواهیم به C-x C-n پیوند بدهیم را پیدا کنید‌. ما پیدایش
کردیم و فهمیدیم که دستوری به اسم other-window را اجرا می‌کند‌. پس
احتمالا می‌گویید که دستورمان بعد از تکامل می‌شود این:</p>
<pre class="code bash"><a name="rest_code_ff704893028249d5842cf03d8e2f35db-1"></a><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-n"</span> other-window<span class="o">)</span>
</pre>
<p>خوب تا حدودی راست گفته‌اید‌. ولی مشکل اینجاست که لیسپ کمی خنگ است و آن
دستوری که سمت راست نوشته‌ایم other-window را هم اجرا می‌کند و این اصلا
خوب نیست‌. پس باید یک جوری حالیش کنیم که بی‌خیال این دستور شود و فقط سمت
چپی را اجرا کند‌. این است که یک «'» به تنهایی به کمکمان می‌آید و دستور
می‌شود:</p>
<pre class="code bash"><a name="rest_code_17ddcb978f4746f8922cc526a1383022-1"></a><span class="o">(</span>global-set-key <span class="s2">"\C-x\C-n"</span> <span class="err">'</span>other-window<span class="o">)</span>
</pre>
<p>همین کتیشن کوچک در ابتدای دستور از اجرای دستور دوم جلوگیری می‌کند و
دستورمان کامل می‌شود‌. حالا می‌ماند که چطور به ایمکس بگوییم که از آن
استفاده کند‌. خوب قبلا در موردش توضیح دادم‌. مثلا همین الان بروی به آخر
خط همین دستور (C-e) و بزنید C-x C-e و تمام‌. حالا دستورتان را امتحان
کنید‌.</p>
<p>چیزی که باقی می‌ماند این است که کلید C-x C-p را تعریف کنیم تا پس از
زدنشان به پنجرهٔ قبلی یا سمت چپی‌مان برود و چون این کار یک کمی پیچیده‌تر
است بهتر است آن را برای قسمت بعد بگذاریم‌. قسمتی که شما تا این‌جای
داستان را به درستی درک کرده‌اید ;-)</p>
</div>
    </div>
    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-124.html" rel="prev">ارسال‌های جدید‌تر</a>
            </li>
            <li class="next">
                <a href="index-122.html" rel="next">پست‌های قدیمی‌تر</a>
            </li>
        </ul></nav><script>var disqus_shortname="shahinism";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2015         <a href="mailto:me@5hah.in">شاهین آزاد</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="assets/js/all-nocdn.js"></script><script src="assets/js/colorbox-i18n/jquery.colorbox-fa.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("fa");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
